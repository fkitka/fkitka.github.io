var AF=Object.defineProperty,SF=Object.defineProperties,xF=Object.getOwnPropertyDescriptors,Jx=Object.getOwnPropertySymbols,MF=Object.prototype.hasOwnProperty,RF=Object.prototype.propertyIsEnumerable,Xx=(ze,me,P)=>me in ze?AF(ze,me,{enumerable:!0,configurable:!0,writable:!0,value:P}):ze[me]=P,_t=(ze,me)=>{for(var P in me||(me={}))MF.call(me,P)&&Xx(ze,P,me[P]);if(Jx)for(var P of Jx(me))RF.call(me,P)&&Xx(ze,P,me[P]);return ze},pi=(ze,me)=>SF(ze,xF(me));(self.webpackChunkrestaurant=self.webpackChunkrestaurant||[]).push([[179],{7905:(ze,me,P)=>{"use strict";P.d(me,{hO:()=>Le,xv:()=>ue,Dh:()=>ne,GT:()=>fe,cc:()=>Ee,on:()=>B,pX:()=>te});var u=P(3668),Y=P(7892),k=P(7233);ze=P.hmd(ze);const ae=["ngOnDestroy"],te=(W,oe,Ce,ge={})=>new Proxy(W,{get:(qe,Se)=>Ce.runOutsideAngular(()=>{var $e;if(W[Se])return(null===($e=null==ge?void 0:ge.spy)||void 0===$e?void 0:$e.get)&&ge.spy.get(Se,W[Se]),W[Se];if(ae.indexOf(Se)>-1)return()=>{};const He=oe.toPromise().then(ut=>{const X=ut&&ut[Se];return"function"==typeof X?X.bind(ut):X&&X.then?X.then(ce=>Ce.run(()=>ce)):Ce.run(()=>X)});return new Proxy(()=>{},{get:(ut,X)=>He[X],apply:(ut,X,ce)=>He.then(_e=>{var ve;const Oe=_e&&_e(...ce);return(null===(ve=null==ge?void 0:ge.spy)||void 0===ve?void 0:ve.apply)&&ge.spy.apply(Se,ce,Oe),Oe})})})}),fe=(W,oe)=>{oe.forEach(Ce=>{Object.getOwnPropertyNames(Ce.prototype||Ce).forEach(ge=>{Object.defineProperty(W.prototype,ge,Object.getOwnPropertyDescriptor(Ce.prototype||Ce,ge))})})};class re{constructor(oe){return oe}}const ne=new u.OlP("angularfire2.app.options"),ue=new u.OlP("angularfire2.app.name");function B(W,oe,Ce){const qe="object"==typeof Ce&&Ce||{};qe.name=qe.name||"string"==typeof Ce&&Ce||"[DEFAULT]";const $e=Y.Z.apps.filter(He=>He&&He.name===qe.name)[0]||oe.runOutsideAngular(()=>Y.Z.initializeApp(W,qe));try{JSON.stringify(W)!==JSON.stringify($e.options)&&V("error",`${$e.name} Firebase App already initialized with different options${ze.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(He){}return new re($e)}const V=(W,...oe)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[W](...oe)},Q={provide:re,useFactory:B,deps:[ne,u.R0b,[new u.FiY,ue]]};let Le=(()=>{class W{constructor(Ce){Y.Z.registerVersion("angularfire",k.q4.full,"core"),Y.Z.registerVersion("angularfire",k.q4.full,"app-compat"),Y.Z.registerVersion("angular",u.q4F.full,Ce.toString())}static initializeApp(Ce,ge){return{ngModule:W,providers:[{provide:ne,useValue:Ce},{provide:ue,useValue:ge}]}}}return W.\u0275fac=function(Ce){return new(Ce||W)(u.LFG(u.Lbi))},W.\u0275mod=u.oAB({type:W}),W.\u0275inj=u.cJS({providers:[Q]}),W})();function Ee(W,oe,Ce,ge,qe){const[,Se,$e]=globalThis.\u0275AngularfireInstanceCache.find(He=>He[0]===W)||[];if(Se)return function(W,oe){try{return W.toString()===oe.toString()}catch(Ce){return W===oe}}(qe,$e)||(se("error",`${oe} was already initialized on the ${Ce} Firebase App with different settings.${Fe?" You may need to reload as Firebase is not HMR aware.":""}`),se("warn",{is:qe,was:$e})),Se;{const He=ge();return globalThis.\u0275AngularfireInstanceCache.push([W,He,qe]),He}}const Fe=!!ze.hot,se=(W,...oe)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[W](...oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7233:(ze,me,P)=>{"use strict";P.d(me,{q4:()=>rd,iC:()=>hs,fc:()=>La,HU:()=>Wc,vb:()=>Cf,JM:()=>id});var u=P(3668),Y=P(7713),k=P(8239),ae=P(1572),te=P(4213),fe=P(1177),re=P(3855),ne=P(4995);const ue="@firebase/installations",B="0.5.4",Q=`w:${B}`,Le="FIS_v2",oe=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ce(b){return b instanceof te.ZR&&b.code.includes("request-failed")}function ge({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function qe(b){return{token:b.token,requestStatus:2,expiresIn:_e(b.expiresIn),creationTime:Date.now()}}function Se(b,I){return $e.apply(this,arguments)}function $e(){return($e=(0,k.Z)(function*(b,I){const F=(yield I.json()).error;return oe.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function He({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function ut(b,{refreshToken:I}){const M=He(b);return M.append("Authorization",function(b){return`${Le} ${b}`}(I)),M}function X(b){return ce.apply(this,arguments)}function ce(){return(ce=(0,k.Z)(function*(b){const I=yield b();return I.status>=500&&I.status<600?b():I})).apply(this,arguments)}function _e(b){return Number(b.replace("s","000"))}function Oe(b,I){return de.apply(this,arguments)}function de(){return(de=(0,k.Z)(function*(b,{fid:I}){const M=ge(b),H={method:"POST",headers:He(b),body:JSON.stringify({fid:I,authVersion:Le,appId:b.appId,sdkVersion:Q})},Ie=yield X(()=>fetch(M,H));if(Ie.ok){const Ke=yield Ie.json();return{fid:Ke.fid||I,registrationStatus:2,refreshToken:Ke.refreshToken,authToken:qe(Ke.authToken)}}throw yield Se("Create Installation",Ie)})).apply(this,arguments)}function Et(b){return new Promise(I=>{setTimeout(I,b)})}const Vn=/^[cdef][\w-]{21}$/;function yt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function(b){return function(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Vn.test(M)?M:""}catch(b){return""}}function nn(b){return`${b.appName}!${b.appId}`}const Ir=new Map;function $r(b,I){const M=nn(b);An(M,I),function(b,I){const M=(!Ut&&"BroadcastChannel"in self&&(Ut=new BroadcastChannel("[Firebase] FID Change"),Ut.onmessage=b=>{An(b.data.key,b.data.fid)}),Ut);M&&M.postMessage({key:b,fid:I}),0===Ir.size&&Ut&&(Ut.close(),Ut=null)}(M,I)}function An(b,I){const M=Ir.get(b);if(M)for(const F of M)F(I)}let Ut=null;const Te="firebase-installations-store";let Gn=null;function kn(){return Gn||(Gn=(0,ne.openDb)("firebase-installations-database",1,b=>{0===b.oldVersion&&b.createObjectStore(Te)})),Gn}function dt(b,I){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,k.Z)(function*(b,I){const M=nn(b),G=(yield kn()).transaction(Te,"readwrite"),H=G.objectStore(Te),Ie=yield H.get(M);return yield H.put(I,M),yield G.complete,(!Ie||Ie.fid!==I.fid)&&$r(b,I.fid),I})).apply(this,arguments)}function _i(b){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,k.Z)(function*(b){const I=nn(b),F=(yield kn()).transaction(Te,"readwrite");yield F.objectStore(Te).delete(I),yield F.complete})).apply(this,arguments)}function at(b,I){return ht.apply(this,arguments)}function ht(){return(ht=(0,k.Z)(function*(b,I){const M=nn(b),G=(yield kn()).transaction(Te,"readwrite"),H=G.objectStore(Te),Ie=yield H.get(M),Ke=I(Ie);return void 0===Ke?yield H.delete(M):yield H.put(Ke,M),yield G.complete,Ke&&(!Ie||Ie.fid!==Ke.fid)&&$r(b,Ke.fid),Ke})).apply(this,arguments)}function Mt(b){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,k.Z)(function*(b){let I;const M=yield at(b,F=>{const G=Gr(F),H=qt(b,G);return I=H.registrationPromise,H.installationEntry});return""===M.fid?{installationEntry:yield I}:{installationEntry:M,registrationPromise:I}})).apply(this,arguments)}function Gr(b){return wt(b||{fid:yt(),registrationStatus:0})}function qt(b,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(oe.create("app-offline"))};const M={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},F=function(b,I){return ot.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:F}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:Tc(b)}:{installationEntry:I}}function ot(){return(ot=(0,k.Z)(function*(b,I){try{return dt(b,yield Oe(b,I))}catch(M){throw Ce(M)&&409===M.customData.serverCode?yield _i(b):yield dt(b,{fid:I.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Tc(b){return As.apply(this,arguments)}function As(){return(As=(0,k.Z)(function*(b){let I=yield Ht(b);for(;1===I.registrationStatus;)yield Et(100),I=yield Ht(b);if(0===I.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield Mt(b);return F||M}return I})).apply(this,arguments)}function Ht(b){return at(b,I=>{if(!I)throw oe.create("installation-not-found");return wt(I)})}function wt(b){return function(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Ac(b,I){return Z.apply(this,arguments)}function Z(){return(Z=(0,k.Z)(function*({appConfig:b,platformLoggerProvider:I},M){const F=L(b,M),G=ut(b,M),H=I.getImmediate({optional:!0});H&&G.append("x-firebase-client",H.getPlatformInfoString());const Ke={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:Q}})},je=yield X(()=>fetch(F,Ke));if(je.ok)return qe(yield je.json());throw yield Se("Generate Auth Token",je)})).apply(this,arguments)}function L(b,{fid:I}){return`${ge(b)}/${I}/authTokens:generate`}function $(b){return ye.apply(this,arguments)}function ye(){return(ye=(0,k.Z)(function*(b,I=!1){let M;const F=yield at(b.appConfig,H=>{if(!bn(H))throw oe.create("not-registered");const Ie=H.authToken;if(!I&&zr(Ie))return H;if(1===Ie.requestStatus)return M=ee(b,I),H;{if(!navigator.onLine)throw oe.create("app-offline");const Ke=rr(H);return M=Gt(b,Ke),Ke}});return M?yield M:F.authToken})).apply(this,arguments)}function ee(b,I){return We.apply(this,arguments)}function We(){return(We=(0,k.Z)(function*(b,I){let M=yield ct(b.appConfig);for(;1===M.authToken.requestStatus;)yield Et(100),M=yield ct(b.appConfig);const F=M.authToken;return 0===F.requestStatus?$(b,I):F})).apply(this,arguments)}function ct(b){return at(b,I=>{if(!bn(I))throw oe.create("not-registered");return function(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function Gt(b,I){return nr.apply(this,arguments)}function nr(){return(nr=(0,k.Z)(function*(b,I){try{const M=yield Ac(b,I),F=Object.assign(Object.assign({},I),{authToken:M});return yield dt(b.appConfig,F),M}catch(M){if(!Ce(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield dt(b.appConfig,F)}else yield _i(b.appConfig);throw M}})).apply(this,arguments)}function bn(b){return void 0!==b&&2===b.registrationStatus}function zr(b){return 2===b.requestStatus&&!function(b){const I=Date.now();return I<b.creationTime||b.creationTime+b.expiresIn<I+36e5}(b)}function rr(b){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:I})}function ia(){return(ia=(0,k.Z)(function*(b){const I=b,{installationEntry:M,registrationPromise:F}=yield Mt(I.appConfig);return F?F.catch(console.error):$(I).catch(console.error),M.fid})).apply(this,arguments)}function Js(){return(Js=(0,k.Z)(function*(b,I=!1){const M=b;return yield Sc(M.appConfig),(yield $(M,I)).token})).apply(this,arguments)}function Sc(b){return sn.apply(this,arguments)}function sn(){return(sn=(0,k.Z)(function*(b){const{registrationPromise:I}=yield Mt(b);I&&(yield I)})).apply(this,arguments)}function vi(b){return oe.create("missing-app-config-values",{valueName:b})}const Nn="installations";(0,ae._registerComponent)(new fe.wA(Nn,b=>{const I=b.getProvider("app").getImmediate(),M=function(b){if(!b||!b.options)throw vi("App Configuration");if(!b.name)throw vi("App Name");const I=["projectId","apiKey","appId"];for(const M of I)if(!b.options[M])throw vi(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(I);return{app:I,appConfig:M,platformLoggerProvider:(0,ae._getProvider)(I,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ae._registerComponent)(new fe.wA("installations-internal",b=>{const I=b.getProvider("app").getImmediate(),M=(0,ae._getProvider)(I,Nn).getImmediate();return{getId:()=>function(b){return ia.apply(this,arguments)}(M),getToken:G=>function(b){return Js.apply(this,arguments)}(M,G)}},"PRIVATE")),(0,ae.registerVersion)(ue,B),(0,ae.registerVersion)(ue,B,"esm2017");const gt="@firebase/remote-config",Yt=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ef{constructor(I,M,F,G){this.client=I,this.storage=M,this.storageCache=F,this.logger=G}isCachedDataFresh(I,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,G=F<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${G}.`),G}fetch(I){var M=this;return(0,k.Z)(function*(){const[F,G]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(G&&M.isCachedDataFresh(I.cacheMaxAgeMillis,F))return G;I.eTag=G&&G.eTag;const H=yield M.client.fetch(I),Ie=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===H.status&&Ie.push(M.storage.setLastSuccessfulFetchResponse(H)),yield Promise.all(Ie),H})()}}function Ag(b=navigator){return b.languages&&b.languages[0]||b.language}class Ci{constructor(I,M,F,G,H,Ie){this.firebaseInstallations=I,this.sdkVersion=M,this.namespace=F,this.projectId=G,this.apiKey=H,this.appId=Ie}fetch(I){var M=this;return(0,k.Z)(function*(){const[F,G]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ie=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},je={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:G,app_id:M.appId,language_code:Ag()},Pt={method:"POST",headers:Ke,body:JSON.stringify(je)},Kt=fetch(Ie,Pt),Rr=new Promise((Hi,fs)=>{I.signal.addEventListener(()=>{const _o=new Error("The operation was aborted.");_o.name="AbortError",fs(_o)})});let Or;try{yield Promise.race([Kt,Rr]),Or=yield Kt}catch(Hi){let fs="fetch-client-network";throw"AbortError"===Hi.name&&(fs="fetch-timeout"),Yt.create(fs,{originalErrorMessage:Hi.message})}let _n=Or.status;const cr=Or.headers.get("ETag")||void 0;let mo,Jr;if(200===Or.status){let Hi;try{Hi=yield Or.json()}catch(fs){throw Yt.create("fetch-client-parse",{originalErrorMessage:fs.message})}mo=Hi.entries,Jr=Hi.state}if("INSTANCE_STATE_UNSPECIFIED"===Jr?_n=500:"NO_CHANGE"===Jr?_n=304:("NO_TEMPLATE"===Jr||"EMPTY_CONFIG"===Jr)&&(mo={}),304!==_n&&200!==_n)throw Yt.create("fetch-status",{httpStatus:_n});return{status:_n,eTag:cr,config:mo}})()}}class Bl{constructor(I,M){this.client=I,this.storage=M}fetch(I){var M=this;return(0,k.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(I,F)})()}attemptFetch(I,{throttleEndTimeMillis:M,backoffCount:F}){var G=this;return(0,k.Z)(function*(){yield function(b,I){return new Promise((M,F)=>{const G=Math.max(I-Date.now(),0),H=setTimeout(M,G);b.addEventListener(()=>{clearTimeout(H),F(Yt.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,M);try{const H=yield G.client.fetch(I);return yield G.storage.deleteThrottleMetadata(),H}catch(H){if(!function(b){if(!(b instanceof te.ZR&&b.customData))return!1;const I=Number(b.customData.httpStatus);return 429===I||500===I||503===I||504===I}(H))throw H;const Ie={throttleEndTimeMillis:Date.now()+(0,te.$s)(F),backoffCount:F+1};return yield G.storage.setThrottleMetadata(Ie),G.attemptFetch(I,Ie)}})()}}class Sg{constructor(I,M,F,G,H){this.app=I,this._client=M,this._storageCache=F,this._storage=G,this._logger=H,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ua(b,I){const M=b.target.error||void 0;return Yt.create(I,{originalErrorMessage:M&&M.message})}const eo="app_namespace_store";class xg{constructor(I,M,F,G=function(){return new Promise((b,I)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{I(ua(F,"storage-open"))},M.onsuccess=F=>{b(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(eo,{keyPath:"compositeKey"})}}catch(M){I(Yt.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=I,this.appName=M,this.namespace=F,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var M=this;return(0,k.Z)(function*(){const F=yield M.openDbPromise;return new Promise((G,H)=>{const Ke=F.transaction([eo],"readonly").objectStore(eo),je=M.createCompositeKey(I);try{const Pt=Ke.get(je);Pt.onerror=Kt=>{H(ua(Kt,"storage-get"))},Pt.onsuccess=Kt=>{const Rr=Kt.target.result;G(Rr?Rr.value:void 0)}}catch(Pt){H(Yt.create("storage-get",{originalErrorMessage:Pt&&Pt.message}))}})})()}set(I,M){var F=this;return(0,k.Z)(function*(){const G=yield F.openDbPromise;return new Promise((H,Ie)=>{const je=G.transaction([eo],"readwrite").objectStore(eo),Pt=F.createCompositeKey(I);try{const Kt=je.put({compositeKey:Pt,value:M});Kt.onerror=Rr=>{Ie(ua(Rr,"storage-set"))},Kt.onsuccess=()=>{H()}}catch(Kt){Ie(Yt.create("storage-set",{originalErrorMessage:Kt&&Kt.message}))}})})()}delete(I){var M=this;return(0,k.Z)(function*(){const F=yield M.openDbPromise;return new Promise((G,H)=>{const Ke=F.transaction([eo],"readwrite").objectStore(eo),je=M.createCompositeKey(I);try{const Pt=Ke.delete(je);Pt.onerror=Kt=>{H(ua(Kt,"storage-delete"))},Pt.onsuccess=()=>{G()}}catch(Pt){H(Yt.create("storage-delete",{originalErrorMessage:Pt&&Pt.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class ql{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,k.Z)(function*(){const M=I.storage.getLastFetchStatus(),F=I.storage.getLastSuccessfulFetchTimestampMillis(),G=I.storage.getActiveConfig(),H=yield M;H&&(I.lastFetchStatus=H);const Ie=yield F;Ie&&(I.lastSuccessfulFetchTimestampMillis=Ie);const Ke=yield G;Ke&&(I.activeConfig=Ke)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function ca(){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,k.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(b){return!1}})).apply(this,arguments)}(0,ae._registerComponent)(new fe.wA("remote-config",function(I,{instanceIdentifier:M}){const F=I.getProvider("app").getImmediate(),G=I.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Yt.create("registration-window");if(!(0,te.hl)())throw Yt.create("indexed-db-unavailable");const{projectId:H,apiKey:Ie,appId:Ke}=F.options;if(!H)throw Yt.create("registration-project-id");if(!Ie)throw Yt.create("registration-api-key");if(!Ke)throw Yt.create("registration-app-id");const je=new xg(Ke,F.name,M=M||"firebase"),Pt=new ql(je),Kt=new re.Yd(gt);Kt.logLevel=re.in.ERROR;const Rr=new Ci(G,ae.SDK_VERSION,M,H,Ie,Ke),Or=new Bl(Rr,je),_n=new ef(Or,je,Pt,Kt),cr=new Sg(F,_n,Pt,je,Kt);return function(b){const I=(0,te.m9)(b);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(cr),cr},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(gt,"0.3.3"),(0,ae.registerVersion)(gt,"0.3.3","esm2017");const $l="/firebase-messaging-sw.js",Rg="/firebase-cloud-messaging-push-scope",Li="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Rs="google.c.a.c_id",Oo="google.c.a.c_l",Os="google.c.a.ts",Pc="google.c.a.e";var or=(()=>{return(b=or||(or={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",or;var b})();function os(b){const I=new Uint8Array(b);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function la(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),G=new Uint8Array(F.length);for(let H=0;H<F.length;++H)G[H]=F.charCodeAt(H);return G}const Gl="fcm_token_details_db",zl="fcm_token_object_Store";function kc(b){return wu.apply(this,arguments)}function wu(){return wu=(0,k.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(H=>H.name).includes(Gl))return null;let I=null;return(yield(0,ne.openDb)(Gl,5,function(){var F=(0,k.Z)(function*(G){var H;if(G.oldVersion<2||!G.objectStoreNames.contains(zl))return;const Ie=G.transaction.objectStore(zl),Ke=yield Ie.index("fcmSenderId").get(b);if(yield Ie.clear(),Ke)if(2===G.oldVersion){const je=Ke;if(!je.auth||!je.p256dh||!je.endpoint)return;I={token:je.fcmToken,createTime:null!==(H=je.createTime)&&void 0!==H?H:Date.now(),subscriptionOptions:{auth:je.auth,p256dh:je.p256dh,endpoint:je.endpoint,swScope:je.swScope,vapidKey:"string"==typeof je.vapidKey?je.vapidKey:os(je.vapidKey)}}}else if(3===G.oldVersion){const je=Ke;I={token:je.fcmToken,createTime:je.createTime,subscriptionOptions:{auth:os(je.auth),p256dh:os(je.p256dh),endpoint:je.endpoint,swScope:je.swScope,vapidKey:os(je.vapidKey)}}}else if(4===G.oldVersion){const je=Ke;I={token:je.fcmToken,createTime:je.createTime,subscriptionOptions:{auth:os(je.auth),p256dh:os(je.p256dh),endpoint:je.endpoint,swScope:je.swScope,vapidKey:os(je.vapidKey)}}}});return function(G){return F.apply(this,arguments)}}())).close(),yield(0,ne.deleteDb)(Gl),yield(0,ne.deleteDb)("fcm_vapid_details_db"),yield(0,ne.deleteDb)("undefined"),sf(I)?I:null}),wu.apply(this,arguments)}function sf(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:I}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}const Jt="firebase-messaging-store";let Nc=null;function no(){return Nc||(Nc=(0,ne.openDb)("firebase-messaging-database",1,b=>{0===b.oldVersion&&b.createObjectStore(Jt)})),Nc}function Mn(b){return ro.apply(this,arguments)}function ro(){return(ro=(0,k.Z)(function*(b){const I=io(b),F=yield(yield no()).transaction(Jt).objectStore(Jt).get(I);if(F)return F;{const G=yield kc(b.appConfig.senderId);if(G)return yield Ar(b,G),G}})).apply(this,arguments)}function Ar(b,I){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,k.Z)(function*(b,I){const M=io(b),G=(yield no()).transaction(Jt,"readwrite");return yield G.objectStore(Jt).put(I,M),yield G.complete,I})).apply(this,arguments)}function Rn(b){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,k.Z)(function*(b){const I=io(b),F=(yield no()).transaction(Jt,"readwrite");yield F.objectStore(Jt).delete(I),yield F.complete})).apply(this,arguments)}function io({appConfig:b}){return b.appId}const zt=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function as(b,I){return ha.apply(this,arguments)}function ha(){return(ha=(0,k.Z)(function*(b,I){const M=yield Eu(b),F=Po(I),G={method:"POST",headers:M,body:JSON.stringify(F)};let H;try{H=yield(yield fetch(Qe(b.appConfig),G)).json()}catch(Ie){throw zt.create("token-subscribe-failed",{errorInfo:Ie})}if(H.error)throw zt.create("token-subscribe-failed",{errorInfo:H.error.message});if(!H.token)throw zt.create("token-subscribe-no-token");return H.token})).apply(this,arguments)}function oo(b,I){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,k.Z)(function*(b,I){const M=yield Eu(b),F=Po(I.subscriptionOptions),G={method:"PATCH",headers:M,body:JSON.stringify(F)};let H;try{H=yield(yield fetch(`${Qe(b.appConfig)}/${I.token}`,G)).json()}catch(Ie){throw zt.create("token-update-failed",{errorInfo:Ie})}if(H.error)throw zt.create("token-update-failed",{errorInfo:H.error.message});if(!H.token)throw zt.create("token-update-no-token");return H.token})).apply(this,arguments)}function fa(b,I){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,k.Z)(function*(b,I){const F={method:"DELETE",headers:yield Eu(b)};try{const H=yield(yield fetch(`${Qe(b.appConfig)}/${I}`,F)).json();if(H.error)throw zt.create("token-unsubscribe-failed",{errorInfo:H.error.message})}catch(G){throw zt.create("token-unsubscribe-failed",{errorInfo:G})}})).apply(this,arguments)}function Qe({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Eu(b){return pa.apply(this,arguments)}function pa(){return(pa=(0,k.Z)(function*({appConfig:b,installations:I}){const M=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Po({p256dh:b,auth:I,endpoint:M,vapidKey:F}){const G={web:{endpoint:M,auth:I,p256dh:b}};return F!==Li&&(G.web.applicationPubKey=F),G}const ga=6048e5;function bu(b){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,k.Z)(function*(b){const I=yield ks(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:I.endpoint,auth:os(I.getKey("auth")),p256dh:os(I.getKey("p256dh"))},F=yield Mn(b.firebaseDependencies);if(F){if(Du(F.subscriptionOptions,M))return Date.now()>=F.createTime+ga?Ot(b,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield fa(b.firebaseDependencies,F.token)}catch(G){console.warn(G)}return pn(b.firebaseDependencies,M)}return pn(b.firebaseDependencies,M)})).apply(this,arguments)}function Wl(b){return be.apply(this,arguments)}function be(){return(be=(0,k.Z)(function*(b){const I=yield Mn(b.firebaseDependencies);I&&(yield fa(b.firebaseDependencies,I.token),yield Rn(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Ot(b,I){return us.apply(this,arguments)}function us(){return(us=(0,k.Z)(function*(b,I){try{const M=yield oo(b.firebaseDependencies,I),F=Object.assign(Object.assign({},I),{token:M,createTime:Date.now()});return yield Ar(b.firebaseDependencies,F),M}catch(M){throw yield Wl(b),M}})).apply(this,arguments)}function pn(b,I){return ma.apply(this,arguments)}function ma(){return(ma=(0,k.Z)(function*(b,I){const F={token:yield as(b,I),createTime:Date.now(),subscriptionOptions:I};return yield Ar(b,F),F.token})).apply(this,arguments)}function ks(b,I){return ar.apply(this,arguments)}function ar(){return(ar=(0,k.Z)(function*(b,I){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:la(I)})})).apply(this,arguments)}function Du(b,I){return I.vapidKey===b.vapidKey&&I.endpoint===b.endpoint&&I.auth===b.auth&&I.p256dh===b.p256dh}function ao(b){const I={from:b.from,collapseKey:b.collapse_key,messageId:b.fcm_message_id};return function(b,I){if(!I.notification)return;b.notification={};const M=I.notification.title;M&&(b.notification.title=M);const F=I.notification.body;F&&(b.notification.body=F);const G=I.notification.image;G&&(b.notification.image=G)}(I,b),function(b,I){!I.data||(b.data=I.data)}(I,b),function(b,I){if(!I.fcmOptions)return;b.fcmOptions={};const M=I.fcmOptions.link;M&&(b.fcmOptions.link=M);const F=I.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(I,b),I}function uo(b){return"object"==typeof b&&!!b&&Rs in b}function Wn(b,I){const M=[];for(let F=0;F<b.length;F++)M.push(b.charAt(F)),F<I.length&&M.push(I.charAt(F));return M.join("")}function ya(b){return zt.create("missing-app-config-values",{valueName:b})}Wn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Wn("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ns{constructor(I,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function(b){if(!b||!b.options)throw ya("App Configuration Object");if(!b.name)throw ya("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const F of I)if(!M[F])throw ya(F);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:G,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Ui(b){return va.apply(this,arguments)}function va(){return(va=(0,k.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register($l,{scope:Rg}),b.swRegistration.update().catch(()=>{})}catch(I){throw zt.create("failed-service-worker-registration",{browserErrorMessage:I.message})}})).apply(this,arguments)}function wa(b,I){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,k.Z)(function*(b,I){if(!I&&!b.swRegistration&&(yield Ui(b)),I||!b.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw zt.create("invalid-sw-registration");b.swRegistration=I}})).apply(this,arguments)}function Tu(b,I){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,k.Z)(function*(b,I){I?b.vapidKey=I:b.vapidKey||(b.vapidKey=Li)})).apply(this,arguments)}function Au(){return(Au=(0,k.Z)(function*(b,I){if(!navigator)throw zt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zt.create("permission-blocked");return yield Tu(b,null==I?void 0:I.vapidKey),yield wa(b,null==I?void 0:I.serviceWorkerRegistration),bu(b)})).apply(this,arguments)}function ba(b,I,M){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,k.Z)(function*(b,I,M){const F=Su(I);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Rs],message_name:M[Oo],message_time:M[Os],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Su(b){switch(b){case or.NOTIFICATION_CLICKED:return"notification_open";case or.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ia(){return(Ia=(0,k.Z)(function*(b,I){const M=I.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===or.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(ao(M)):b.onMessageHandler.next(ao(M)));const F=M.data;uo(F)&&"1"===F[Pc]&&(yield ba(b,M.messageType,F))})).apply(this,arguments)}const Uc="@firebase/messaging";function Vc(){return on.apply(this,arguments)}function on(){return(on=(0,k.Z)(function*(){return"undefined"!=typeof window&&(0,te.hl)()&&(yield(0,te.eu)())&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ae._registerComponent)(new fe.wA("messaging",b=>{const I=new Ns(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(b,I){return Ia.apply(this,arguments)}(I,M)),I},"PUBLIC")),(0,ae._registerComponent)(new fe.wA("messaging-internal",b=>{const I=b.getProvider("messaging").getImmediate();return{getToken:F=>function(b,I){return Au.apply(this,arguments)}(I,F)}},"PRIVATE")),(0,ae.registerVersion)(Uc,"0.9.4"),(0,ae.registerVersion)(Uc,"0.9.4","esm2017");const Ls="analytics",Mu="firebase_id",Bc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xl="https://www.googletagmanager.com/gtag/js",dn=new re.Yd("@firebase/analytics");function xa(b){return Promise.all(b.map(I=>I.catch(M=>M)))}function kg(b,I){const M=document.createElement("script");M.src=`${Xl}?l=${b}&id=${I}`,M.async=!0,document.head.appendChild(M)}function No(b,I,M,F,G,H){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,k.Z)(function*(b,I,M,F,G,H){const Ie=F[G];try{if(Ie)yield I[Ie];else{const je=(yield xa(M)).find(Pt=>Pt.measurementId===G);je&&(yield I[je.appId])}}catch(Ke){dn.error(Ke)}b("config",G,H)})).apply(this,arguments)}function Ma(b,I,M,F,G){return jc.apply(this,arguments)}function jc(){return(jc=(0,k.Z)(function*(b,I,M,F,G){try{let H=[];if(G&&G.send_to){let Ie=G.send_to;Array.isArray(Ie)||(Ie=[Ie]);const Ke=yield xa(M);for(const je of Ie){const Pt=Ke.find(Rr=>Rr.measurementId===je),Kt=Pt&&I[Pt.appId];if(!Kt){H=[];break}H.push(Kt)}}0===H.length&&(H=Object.values(I)),yield Promise.all(H),b("event",F,G||{})}catch(H){dn.error(H)}})).apply(this,arguments)}function Wt(){const b=window.document.getElementsByTagName("script");for(const I of Object.values(b))if(I.src&&I.src.includes(Xl))return I;return null}const Je=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Fo=new class{constructor(I={},M=1e3){this.throttleMetadata=I,this.intervalMillis=M}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,M){this.throttleMetadata[I]=M}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function Fg(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Ra(b){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,k.Z)(function*(b){var I;const{appId:M,apiKey:F}=b,G={method:"GET",headers:Fg(F)},H=Bc.replace("{app-id}",M),Ie=yield fetch(H,G);if(200!==Ie.status&&304!==Ie.status){let Ke="";try{const je=yield Ie.json();(null===(I=je.error)||void 0===I?void 0:I.message)&&(Ke=je.error.message)}catch(je){}throw Je.create("config-fetch-failed",{httpStatus:Ie.status,responseMessage:Ke})}return Ie.json()})).apply(this,arguments)}function lo(b){return Us.apply(this,arguments)}function Us(){return(Us=(0,k.Z)(function*(b,I=Fo,M){const{appId:F,apiKey:G,measurementId:H}=b.options;if(!F)throw Je.create("no-app-id");if(!G){if(H)return{measurementId:H,appId:F};throw Je.create("no-api-key")}const Ie=I.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new Lo;return setTimeout((0,k.Z)(function*(){Ke.abort()}),void 0!==M?M:6e4),cs({appId:F,apiKey:G,measurementId:H},Ie,Ke,I)})).apply(this,arguments)}function cs(b,I,M){return it.apply(this,arguments)}function it(){return(it=(0,k.Z)(function*(b,{throttleEndTimeMillis:I,backoffCount:M},F,G=Fo){const{appId:H,measurementId:Ie}=b;try{yield df(F,I)}catch(Ke){if(Ie)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ie} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:H,measurementId:Ie};throw Ke}try{const Ke=yield Ra(b);return G.deleteThrottleMetadata(H),Ke}catch(Ke){if(!hf(Ke)){if(G.deleteThrottleMetadata(H),Ie)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ie} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:H,measurementId:Ie};throw Ke}const je=503===Number(Ke.customData.httpStatus)?(0,te.$s)(M,G.intervalMillis,30):(0,te.$s)(M,G.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+je,backoffCount:M+1};return G.setThrottleMetadata(H,Pt),dn.debug(`Calling attemptFetch again in ${je} millis`),cs(b,Pt,F,G)}})).apply(this,arguments)}function df(b,I){return new Promise((M,F)=>{const G=Math.max(I-Date.now(),0),H=setTimeout(M,G);b.addEventListener(()=>{clearTimeout(H),F(Je.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}function hf(b){if(!(b instanceof te.ZR&&b.customData))return!1;const I=Number(b.customData.httpStatus);return 429===I||500===I||503===I||504===I}class Lo{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}function Uo(){return xn.apply(this,arguments)}function xn(){return(xn=(0,k.Z)(function*(){if(!(0,te.hl)())return dn.warn(Je.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(b){return dn.warn(Je.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function ls(){return(ls=(0,k.Z)(function*(b,I,M,F,G,H,Ie){var Ke;const je=lo(b);je.then(_n=>{M[_n.measurementId]=_n.appId,b.options.measurementId&&_n.measurementId!==b.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${_n.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_n=>dn.error(_n)),I.push(je);const Pt=Uo().then(_n=>{if(_n)return F.getId()}),[Kt,Rr]=yield Promise.all([je,Pt]);Wt()||kg(H,Kt.measurementId),G("js",new Date);const Or=null!==(Ke=null==Ie?void 0:Ie.config)&&void 0!==Ke?Ke:{};return Or.origin="firebase",Or.update=!0,null!=Rr&&(Or[Mu]=Rr),G("config",Kt.measurementId,Or),Kt.measurementId})).apply(this,arguments)}class ed{constructor(I){this.app=I}_delete(){return delete Ii[this.app.options.appId],Promise.resolve()}}let Ii={},Zc=[];const Vo={};let qc,Zn,ho="dataLayer",Vs=!1;function vr(b,I,M){!function(){const b=[];if((0,te.ru)()&&b.push("This is a browser extension environment."),(0,te.zI)()||b.push("Cookies are not available."),b.length>0){const I=b.map((F,G)=>`(${G+1}) ${F}`).join(" "),M=Je.create("invalid-analytics-context",{errorInfo:I});dn.warn(M.message)}}();const F=b.options.appId;if(!F)throw Je.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Je.create("no-api-key");dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ii[F])throw Je.create("already-exists",{id:F});if(!Vs){!function(b){let I=[];Array.isArray(window[b])?I=window[b]:window[b]=I}(ho);const{wrappedGtag:H,gtagCore:Ie}=function(b,I,M,F,G){let H=function(...Ie){window[F].push(arguments)};return window[G]&&"function"==typeof window[G]&&(H=window[G]),window[G]=function(b,I,M,F){function H(){return(H=(0,k.Z)(function*(Ie,Ke,je){try{"event"===Ie?yield Ma(b,I,M,Ke,je):"config"===Ie?yield No(b,I,M,F,Ke,je):b("set",Ke)}catch(Pt){dn.error(Pt)}})).apply(this,arguments)}return function(Ie,Ke,je){return H.apply(this,arguments)}}(H,b,I,M),{gtagCore:H,wrappedGtag:window[G]}}(Ii,Zc,Vo,ho,"gtag");Zn=H,qc=Ie,Vs=!0}return Ii[F]=function(b,I,M,F,G,H,Ie){return ls.apply(this,arguments)}(b,Zc,Vo,I,qc,ho,M),new ed(b)}function ku(){return(ku=(0,k.Z)(function*(b,I,M,F,G){if(G&&G.global)b("event",M,F);else{const H=yield I;b("event",M,Object.assign(Object.assign({},F),{send_to:H}))}})).apply(this,arguments)}function tn(){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,k.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(b){return!1}})).apply(this,arguments)}const td="@firebase/analytics";(0,ae._registerComponent)(new fe.wA(Ls,(I,{options:M})=>vr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new fe.wA("analytics-internal",function(I){try{const M=I.getProvider(Ls).getImmediate();return{logEvent:(F,G,H)=>function(b,I,M,F){b=(0,te.m9)(b),function(b,I,M,F,G){return ku.apply(this,arguments)}(Zn,Ii[b.app.options.appId],I,M,F).catch(G=>dn.error(G))}(M,F,G,H)}}catch(M){throw Je.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(td,"0.7.4"),(0,ae.registerVersion)(td,"0.7.4","esm2017");var In=P(2869),Na=P(8843);const _f=new class extends Na.v{}(class extends In.o{constructor(I,M){super(I,M),this.scheduler=I,this.work=M}schedule(I,M=0){return M>0?super.schedule(I,M):(this.delay=M,this.state=I,this.scheduler.flush(this),this)}execute(I,M){return M>0||this.closed?super.execute(I,M):this._execute(I,M)}requestAsyncId(I,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(I,M,F):I.flush(this)}});var Zi=P(2210),$c=P(7384),go=P(4763),Bo=P(5222);const rd=new u.GfV("7.2.0"),Hc="__angularfire_symbol__analyticsIsSupported",Gc="__angularfire_symbol__remoteConfigIsSupported",wr="__angularfire_symbol__messagingIsSupported";function id(b,I,M){if(I){if(1===I.length)return I[0];const H=I.filter(Ie=>Ie.app===M);if(1===H.length)return H[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[Hc]||(globalThis[Hc]=tn().then(b=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=b)),globalThis[wr]||(globalThis[wr]=Vc().then(b=>globalThis.__angularfire_symbol__messagingIsSupportedValue=b)),globalThis[Gc]||(globalThis[Gc]=ca().then(b=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=b));const Cf=(b,I)=>{const M=I?[I]:(0,Y.C6)(),F=[];return M.forEach(G=>{G.container.getProvider(b).instances.forEach(Ie=>{F.includes(Ie)||F.push(Ie)})}),F};function Cr(){}class zc{constructor(I,M=_f){this.zone=I,this.delegate=M}now(){return this.delegate.now()}schedule(I,M,F){const G=this.zone;return this.delegate.schedule(function(Ie){G.runGuarded(()=>{I.apply(this,[Ie])})},M,F)}}class Fu{constructor(I){this.zone=I,this.task=null}call(I,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cr,{},Cr,Cr)),M.pipe((0,$c.b)({next:F,complete:F,error:F})).subscribe(I).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wc=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new zc(Zone.current)),this.insideAngular=M.run(()=>new zc(Zone.current,Zi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(u.LFG(u.R0b))},b.\u0275prov=u.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function $i(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function La(b){return b.pipe((0,go.Q)($i().outsideAngular))}function hs(b){return $i(),function(b){return function(M){return(M=M.lift(new Fu(b.ngZone))).pipe((0,Bo.R)(b.outsideAngular),(0,go.Q)(b.insideAngular))}}($i())(b)}},4213:(ze,me,P)=>{"use strict";P.d(me,{BH:()=>Le,LL:()=>de,ZR:()=>Oe,zI:()=>ce,US:()=>fe,tV:()=>ue,$s:()=>Ht,r3:()=>rn,Sg:()=>Ee,ne:()=>Gn,vZ:()=>Ut,ZB:()=>V,pd:()=>ki,m9:()=>Ac,z$:()=>Ue,jU:()=>W,ru:()=>oe,d:()=>ge,xb:()=>An,w1:()=>qe,hl:()=>ut,uI:()=>Fe,UG:()=>se,b$:()=>Ce,G6:()=>He,Mn:()=>Se,xO:()=>Mo,zd:()=>mi,eu:()=>X});const ae=function(Z){const L=[];let $=0;for(let ye=0;ye<Z.length;ye++){let ee=Z.charCodeAt(ye);ee<128?L[$++]=ee:ee<2048?(L[$++]=ee>>6|192,L[$++]=63&ee|128):55296==(64512&ee)&&ye+1<Z.length&&56320==(64512&Z.charCodeAt(ye+1))?(ee=65536+((1023&ee)<<10)+(1023&Z.charCodeAt(++ye)),L[$++]=ee>>18|240,L[$++]=ee>>12&63|128,L[$++]=ee>>6&63|128,L[$++]=63&ee|128):(L[$++]=ee>>12|224,L[$++]=ee>>6&63|128,L[$++]=63&ee|128)}return L},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,L){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let ee=0;ee<Z.length;ee+=3){const We=Z[ee],ct=ee+1<Z.length,Gt=ct?Z[ee+1]:0,nr=ee+2<Z.length,bn=nr?Z[ee+2]:0;let rr=(15&Gt)<<2|bn>>6,Qs=63&bn;nr||(Qs=64,ct||(rr=64)),ye.push($[We>>2],$[(3&We)<<4|Gt>>4],$[rr],$[Qs])}return ye.join("")},encodeString(Z,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(Z):this.encodeByteArray(ae(Z),L)},decodeString(Z,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(Z):function(Z){const L=[];let $=0,ye=0;for(;$<Z.length;){const ee=Z[$++];if(ee<128)L[ye++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const We=Z[$++];L[ye++]=String.fromCharCode((31&ee)<<6|63&We)}else if(ee>239&&ee<365){const nr=((7&ee)<<18|(63&Z[$++])<<12|(63&Z[$++])<<6|63&Z[$++])-65536;L[ye++]=String.fromCharCode(55296+(nr>>10)),L[ye++]=String.fromCharCode(56320+(1023&nr))}else{const We=Z[$++],ct=Z[$++];L[ye++]=String.fromCharCode((15&ee)<<12|(63&We)<<6|63&ct)}}return L.join("")}(this.decodeStringToByteArray(Z,L))},decodeStringToByteArray(Z,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let ee=0;ee<Z.length;){const We=$[Z.charAt(ee++)],Gt=ee<Z.length?$[Z.charAt(ee)]:0;++ee;const bn=ee<Z.length?$[Z.charAt(ee)]:64;++ee;const kt=ee<Z.length?$[Z.charAt(ee)]:64;if(++ee,null==We||null==Gt||null==bn||null==kt)throw Error();ye.push(We<<2|Gt>>4),64!==bn&&(ye.push(Gt<<4&240|bn>>2),64!==kt&&ye.push(bn<<6&192|kt))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}},ne=function(Z){return function(Z){const L=ae(Z);return fe.encodeByteArray(L,!0)}(Z).replace(/\./g,"")},ue=function(Z){try{return fe.decodeString(Z,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function V(Z,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!Q($)||(Z[$]=V(Z[$],L[$]));return Z}function Q(Z){return"__proto__"!==Z}class Le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,ye)=>{$?this.reject($):this.resolve(ye),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,ye))}}}function Ee(Z,L){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=L||"demo-project",ee=Z.iat||0,We=Z.sub||Z.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ct=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:ee,exp:ee+3600,auth_time:ee,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[ne(JSON.stringify({alg:"none",type:"JWT"})),ne(JSON.stringify(ct)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function se(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Z){return!1}}function W(){return"object"==typeof self&&self.self===self}function oe(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function Ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ge(){return Ue().indexOf("Electron/")>=0}function qe(){const Z=Ue();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function Se(){return Ue().indexOf("MSAppHost/")>=0}function He(){return!se()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ut(){return"object"==typeof indexedDB}function X(){return new Promise((Z,L)=>{try{let $=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(ye);ee.onsuccess=()=>{ee.result.close(),$||self.indexedDB.deleteDatabase(ye),Z(!0)},ee.onupgradeneeded=()=>{$=!1},ee.onerror=()=>{var We;L((null===(We=ee.error)||void 0===We?void 0:We.message)||"")}}catch($){L($)}})}function ce(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Oe extends Error{constructor(L,$,ye){super($),this.code=L,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,de.prototype.create)}}class de{constructor(L,$,ye){this.service=L,this.serviceName=$,this.errors=ye}create(L,...$){const ye=$[0]||{},ee=`${this.service}/${L}`,We=this.errors[L],ct=We?function(Z,L){return Z.replace(Zt,($,ye)=>{const ee=L[ye];return null!=ee?String(ee):`<${ye}?>`})}(We,ye):"Error";return new Oe(ee,`${this.serviceName}: ${ct} (${ee}).`,ye)}}const Zt=/\{\$([^}]+)}/g;function rn(Z,L){return Object.prototype.hasOwnProperty.call(Z,L)}function An(Z){for(const L in Z)if(Object.prototype.hasOwnProperty.call(Z,L))return!1;return!0}function Ut(Z,L){if(Z===L)return!0;const $=Object.keys(Z),ye=Object.keys(L);for(const ee of $){if(!ye.includes(ee))return!1;const We=Z[ee],ct=L[ee];if(En(We)&&En(ct)){if(!Ut(We,ct))return!1}else if(We!==ct)return!1}for(const ee of ye)if(!$.includes(ee))return!1;return!0}function En(Z){return null!==Z&&"object"==typeof Z}function Mo(Z){const L=[];for(const[$,ye]of Object.entries(Z))Array.isArray(ye)?ye.forEach(ee=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(ee))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(ye));return L.length?"&"+L.join("&"):""}function mi(Z){const L={};return Z.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[ee,We]=ye.split("=");L[decodeURIComponent(ee)]=decodeURIComponent(We)}}),L}function ki(Z){const L=Z.indexOf("?");if(!L)return"";const $=Z.indexOf("#",L);return Z.substring(L,$>0?$:void 0)}function Gn(Z,L){const $=new kn(Z,L);return $.subscribe.bind($)}class kn{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(ye=>{this.error(ye)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,ye){let ee;if(void 0===L&&void 0===$&&void 0===ye)throw new Error("Missing Observer.");ee=function(Z,L){if("object"!=typeof Z||null===Z)return!1;for(const $ of["next","error","complete"])if($ in Z&&"function"==typeof Z[$])return!0;return!1}(L)?L:{next:L,error:$,complete:ye},void 0===ee.next&&(ee.next=_i),void 0===ee.error&&(ee.error=_i),void 0===ee.complete&&(ee.complete=_i);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch(ct){}}),this.observers.push(ee),We}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(ye){"undefined"!=typeof console&&console.error&&console.error(ye)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _i(){}function Ht(Z,L=1e3,$=2){const ye=L*Math.pow($,Z),ee=Math.round(.5*ye*(Math.random()-.5)*2);return Math.min(144e5,ye+ee)}function Ac(Z){return Z&&Z._delegate?Z._delegate:Z}},7713:(ze,me,P)=>{"use strict";P.d(me,{Mq:()=>u.getApp,C6:()=>u.getApps});var u=P(1572);(0,u.registerVersion)("firebase","9.6.1","app")},7892:(ze,me,P)=>{"use strict";P.d(me,{Z:()=>u.Z});var u=P(6293);u.Z.registerVersion("firebase","9.6.1","app-compat")},9766:(ze,me,P)=>{"use strict";P.r(me);var u=P(8239),Y=P(6293),k=P(4213),ae=P(1572);function ne(m,h){var p={};for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&h.indexOf(v)<0&&(p[v]=m[v]);if(null!=m&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(v=Object.getOwnPropertySymbols(m);D<v.length;D++)h.indexOf(v[D])<0&&Object.prototype.propertyIsEnumerable.call(m,v[D])&&(p[v[D]]=m[v[D]])}return p}var Oe=P(3855),de=P(1177);const Ir=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},$r=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},rn=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),An=new Oe.Yd("@firebase/auth");function gi(m,...h){An.logLevel<=Oe.in.ERROR&&An.error(`Auth (${ae.SDK_VERSION}): ${m}`,...h)}function Ut(m,...h){throw ki(m,...h)}function En(m,...h){return ki(m,...h)}function Mo(m,h,p){const v=Object.assign(Object.assign({},$r()),{[h]:p});return new k.LL("auth","Firebase",v).create(h,{appName:m.name})}function mi(m,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ut(m,"argument-error"),Mo(m,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ki(m,...h){if("string"!=typeof m){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=m.name),m._errorFactory.create(p,...v)}return rn.create(m,...h)}function Te(m,h,...p){if(!m)throw ki(h,...p)}function Gn(m){const h="INTERNAL ASSERTION FAILED: "+m;throw gi(h),new Error(h)}function kn(m,h){m||Gn(h)}const dt=new Map;function Bt(m){kn(m instanceof Function,"Expected a class definition");let h=dt.get(m);return h?(kn(h instanceof m,"Instance stored in cache mismatched with class"),h):(h=new m,dt.set(m,h),h)}function at(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function ht(){return"http:"===Mt()||"https:"===Mt()}function Mt(){var m;return"undefined"!=typeof self&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class qt{constructor(h,p){this.shortDelay=h,this.longDelay=p,kn(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ht()||(0,k.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ge(m,h){kn(m.emulator,"Emulator should always be set here");const{url:p}=m.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class ot{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Gn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Gn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Gn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tc={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},As=new qt(3e4,6e4);function Ht(m,h){return m.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:m.tenantId}):h}function wt(m,h,p,v){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,u.Z)(function*(m,h,p,v,D={}){return Ac(m,D,(0,u.Z)(function*(){let S={},U={};v&&("GET"===h?U=v:S={body:JSON.stringify(v)});const J=(0,k.xO)(Object.assign({key:m.config.apiKey},U)).slice(1),Re=yield m._getAdditionalHeaders();return Re["Content-Type"]="application/json",m.languageCode&&(Re["X-Firebase-Locale"]=m.languageCode),ot.fetch()(ye(m,m.config.apiHost,p,J),Object.assign({method:h,headers:Re,referrerPolicy:"no-referrer"},S))}))})).apply(this,arguments)}function Ac(m,h,p){return Z.apply(this,arguments)}function Z(){return(Z=(0,u.Z)(function*(m,h,p){m._canInitEmulator=!1;const v=Object.assign(Object.assign({},Tc),h);try{const D=new ee(m),S=yield Promise.race([p(),D.promise]);D.clearNetworkTimeout();const U=yield S.json();if("needConfirmation"in U)throw We(m,"account-exists-with-different-credential",U);if(S.ok&&!("errorMessage"in U))return U;{const J=S.ok?U.errorMessage:U.error.message,[Re,xe]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Re)throw We(m,"credential-already-in-use",U);if("EMAIL_EXISTS"===Re)throw We(m,"email-already-in-use",U);const Xe=v[Re]||Re.toLowerCase().replace(/[_\s]+/g,"-");if(xe)throw Mo(m,Xe,xe);Ut(m,Xe)}}catch(D){if(D instanceof k.ZR)throw D;Ut(m,"network-request-failed")}})).apply(this,arguments)}function L(m,h,p,v){return $.apply(this,arguments)}function $(){return($=(0,u.Z)(function*(m,h,p,v,D={}){const S=yield wt(m,h,p,v,D);return"mfaPendingCredential"in S&&Ut(m,"multi-factor-auth-required",{_serverResponse:S}),S})).apply(this,arguments)}function ye(m,h,p,v){const D=`${h}${p}?${v}`;return m.config.emulator?Ge(m.config,D):`${m.config.apiScheme}://${D}`}class ee{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(En(this.auth,"timeout")),As.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function We(m,h,p){const v={appName:m.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const D=En(m,h,v);return D.customData._tokenResponse=p,D}function Gt(){return(Gt=(0,u.Z)(function*(m,h){return wt(m,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function nr(m,h){return bn.apply(this,arguments)}function bn(){return(bn=(0,u.Z)(function*(m,h){return wt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function zr(m,h){return kt.apply(this,arguments)}function kt(){return(kt=(0,u.Z)(function*(m,h){return wt(m,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function rr(m){if(m)try{const h=new Date(Number(m));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function ia(){return(ia=(0,u.Z)(function*(m,h=!1){const p=(0,k.m9)(m),v=yield p.getIdToken(h),D=Js(v);Te(D&&D.exp&&D.auth_time&&D.iat,p.auth,"internal-error");const S="object"==typeof D.firebase?D.firebase:void 0,U=null==S?void 0:S.sign_in_provider;return{claims:D,token:v,authTime:rr(gu(D.auth_time)),issuedAtTime:rr(gu(D.iat)),expirationTime:rr(gu(D.exp)),signInProvider:U||null,signInSecondFactor:(null==S?void 0:S.sign_in_second_factor)||null}})).apply(this,arguments)}function gu(m){return 1e3*Number(m)}function Js(m){const[h,p,v]=m.split(".");if(void 0===h||void 0===p||void 0===v)return gi("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,k.tV)(p);return D?JSON.parse(D):(gi("Failed to decode base64 JWT payload"),null)}catch(D){return gi("Caught error parsing JWT payload as JSON",D),null}}function sn(m,h){return yi.apply(this,arguments)}function yi(){return(yi=(0,u.Z)(function*(m,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof k.ZR&&ni(v)&&m.auth.currentUser===m&&(yield m.auth.signOut()),v}})).apply(this,arguments)}function ni({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}class ir{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const D=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,u.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,u.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class ri{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=rr(this.lastLoginAt),this.creationTime=rr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ve(m){return It.apply(this,arguments)}function It(){return(It=(0,u.Z)(function*(m){var h;const p=m.auth,v=yield m.getIdToken(),D=yield sn(m,zr(p,{idToken:v}));Te(null==D?void 0:D.users.length,p,"internal-error");const S=D.users[0];m._notifyReloadListener(S);const U=(null===(h=S.providerUserInfo)||void 0===h?void 0:h.length)?Nn(S.providerUserInfo):[],J=vi(m.providerData,U),Xe=!!m.isAnonymous&&!(m.email&&S.passwordHash||(null==J?void 0:J.length)),et={uid:S.localId,displayName:S.displayName||null,photoURL:S.photoUrl||null,email:S.email||null,emailVerified:S.emailVerified||!1,phoneNumber:S.phoneNumber||null,tenantId:S.tenantId||null,providerData:J,metadata:new ri(S.createdAt,S.lastLoginAt),isAnonymous:Xe};Object.assign(m,et)})).apply(this,arguments)}function _r(){return(_r=(0,u.Z)(function*(m){const h=(0,k.m9)(m);yield Ve(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function vi(m,h){return[...m.filter(v=>!h.some(D=>D.providerId===v.providerId)),...h]}function Nn(m){return m.map(h=>{var{providerId:p}=h,v=ne(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function vn(){return(vn=(0,u.Z)(function*(m,h){const p=yield Ac(m,{},(0,u.Z)(function*(){const v=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:D,apiKey:S}=m.config,U=ye(m,D,"/v1/token",`key=${S}`),J=yield m._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",ot.fetch()(U,{method:"POST",headers:J,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class wi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Te(h.idToken,"internal-error"),Te(void 0!==h.idToken,"internal-error"),Te(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function(m){const h=Js(m);return Te(h,"internal-error"),Te(void 0!==h.exp,"internal-error"),Te(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,u.Z)(function*(){return Te(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,u.Z)(function*(){const{accessToken:D,refreshToken:S,expiresIn:U}=yield function(m,h){return vn.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(D,S,Number(U))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:D,expirationTime:S}=p,U=new wi;return v&&(Te("string"==typeof v,"internal-error",{appName:h}),U.refreshToken=v),D&&(Te("string"==typeof D,"internal-error",{appName:h}),U.accessToken=D),S&&(Te("number"==typeof S,"internal-error",{appName:h}),U.expirationTime=S),U}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new wi,this.toJSON())}_performRefresh(){return Gn("not implemented")}}function Wr(m,h){Te("string"==typeof m||void 0===m,"internal-error",{appName:h})}class gt{constructor(h){var{uid:p,auth:v,stsTokenManager:D}=h,S=ne(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ir(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=S.displayName||null,this.email=S.email||null,this.emailVerified=S.emailVerified||!1,this.phoneNumber=S.phoneNumber||null,this.photoURL=S.photoURL||null,this.isAnonymous=S.isAnonymous||!1,this.tenantId=S.tenantId||null,this.metadata=new ri(S.createdAt||void 0,S.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,u.Z)(function*(){const v=yield sn(p,p.stsTokenManager.getToken(p.auth,h));return Te(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function(m){return ia.apply(this,arguments)}(this,h)}reload(){return function(m){return _r.apply(this,arguments)}(this)}_assign(h){this!==h&&(Te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new gt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,u.Z)(function*(){let D=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),D=!0),p&&(yield Ve(v)),yield v.auth._persistUserIfCurrent(v),D&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,u.Z)(function*(){const p=yield h.getIdToken();return yield sn(h,function(m,h){return Gt.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,D,S,U,J,Re,xe,Xe;const et=null!==(v=p.displayName)&&void 0!==v?v:void 0,Vt=null!==(D=p.email)&&void 0!==D?D:void 0,wn=null!==(S=p.phoneNumber)&&void 0!==S?S:void 0,$s=null!==(U=p.photoURL)&&void 0!==U?U:void 0,Hs=null!==(J=p.tenantId)&&void 0!==J?J:void 0,Dd=null!==(Re=p._redirectEventId)&&void 0!==Re?Re:void 0,Td=null!==(xe=p.createdAt)&&void 0!==xe?xe:void 0,em=null!==(Xe=p.lastLoginAt)&&void 0!==Xe?Xe:void 0,{uid:zu,emailVerified:tm,isAnonymous:Ad,providerData:Sd,stsTokenManager:Gf}=p;Te(zu&&Gf,h,"internal-error");const zf=wi.fromJSON(this.name,Gf);Te("string"==typeof zu,h,"internal-error"),Wr(et,h.name),Wr(Vt,h.name),Te("boolean"==typeof tm,h,"internal-error"),Te("boolean"==typeof Ad,h,"internal-error"),Wr(wn,h.name),Wr($s,h.name),Wr(Hs,h.name),Wr(Dd,h.name),Wr(Td,h.name),Wr(em,h.name);const Wu=new gt({uid:zu,auth:h,email:Vt,emailVerified:tm,displayName:et,isAnonymous:Ad,photoURL:$s,phoneNumber:wn,tenantId:Hs,stsTokenManager:zf,createdAt:Td,lastLoginAt:em});return Sd&&Array.isArray(Sd)&&(Wu.providerData=Sd.map(xd=>Object.assign({},xd))),Dd&&(Wu._redirectEventId=Dd),Wu}static _fromIdTokenResponse(h,p,v=!1){return(0,u.Z)(function*(){const D=new wi;D.updateFromServerResponse(p);const S=new gt({uid:p.localId,auth:h,stsTokenManager:D,isAnonymous:v});return yield Ve(S),S})()}}const ii=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(p,v){var D=this;return(0,u.Z)(function*(){D.storage[p]=v})()}_get(p){var v=this;return(0,u.Z)(function*(){const D=v.storage[p];return void 0===D?null:D})()}_remove(p){var v=this;return(0,u.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return m.type="NONE",m})();function Kr(m,h,p){return`firebase:${m}:${h}:${p}`}class si{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:D,name:S}=this.auth;this.fullUserKey=Kr(this.userKey,D.apiKey,S),this.fullPersistenceKey=Kr("persistence",D.apiKey,S),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,u.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?gt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,u.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,u.Z)(function*(){if(!p.length)return new si(Bt(ii),h,v);const D=(yield Promise.all(p.map(function(){var xe=(0,u.Z)(function*(Xe){if(yield Xe._isAvailable())return Xe});return function(Xe){return xe.apply(this,arguments)}}()))).filter(xe=>xe);let S=D[0]||Bt(ii);const U=Kr(v,h.config.apiKey,h.name);let J=null;for(const xe of p)try{const Xe=yield xe._get(U);if(Xe){const et=gt._fromJSON(h,Xe);xe!==S&&(J=et),S=xe;break}}catch(Xe){}const Re=D.filter(xe=>xe._shouldAllowMigration);return S._shouldAllowMigration&&Re.length?(S=Re[0],J&&(yield S._set(U,J.toJSON())),yield Promise.all(p.map(function(){var xe=(0,u.Z)(function*(Xe){if(Xe!==S)try{yield Xe._remove(U)}catch(et){}});return function(Xe){return xe.apply(this,arguments)}}())),new si(S,h,v)):new si(S,h,v)})()}}function Yt(m){const h=m.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Qt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(sa(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Tr(h))return"Blackberry";if(aa(h))return"Webos";if(Ss(h))return"Safari";if((h.includes("chrome/")||zn(h))&&!h.includes("edge/"))return"Chrome";if(oa(h))return"Android";{const v=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function sa(m=(0,k.z$)()){return/firefox\//i.test(m)}function Ss(m=(0,k.z$)()){const h=m.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function zn(m=(0,k.z$)()){return/crios\//i.test(m)}function Qt(m=(0,k.z$)()){return/iemobile/i.test(m)}function oa(m=(0,k.z$)()){return/android/i.test(m)}function Tr(m=(0,k.z$)()){return/blackberry/i.test(m)}function aa(m=(0,k.z$)()){return/webos/i.test(m)}function xs(m=(0,k.z$)()){return/iphone|ipad|ipod/i.test(m)}function Sn(m=(0,k.z$)()){return xs(m)||oa(m)||aa(m)||Tr(m)||/windows phone/i.test(m)||Qt(m)}function Ni(m,h=[]){let p;switch(m){case"Browser":p=Yt((0,k.z$)());break;case"Worker":p=`${Yt((0,k.z$)())}-${m}`;break;default:p=m}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ae.SDK_VERSION}/${v}`}class Fi{constructor(h,p){this.app=h,this.config=p,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ss(this),this.idTokenSubscription=new ss(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=p.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=Bt(p)),this._initializationPromise=this.queue((0,u.Z)(function*(){var D,S;if(!v._deleted&&(v.persistenceManager=yield si.create(v,h),!v._deleted)){if(null===(D=v._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(U){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(S=v.currentUser)||void 0===S?void 0:S.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,u.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,u.Z)(function*(){var v;let D=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const S=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,U=null==D?void 0:D._redirectEventId,J=yield p.tryRedirectSignIn(h);(!S||S===U)&&(null==J?void 0:J.user)&&(D=J.user)}return D?D._redirectEventId?(Te(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===D._redirectEventId?p.directlySetCurrentUser(D):p.reloadAndSetCurrentUserOrClear(D)):p.reloadAndSetCurrentUserOrClear(D):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,u.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(D){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,u.Z)(function*(){try{yield Ve(h)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var h=this;return(0,u.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,u.Z)(function*(){const v=h?(0,k.m9)(h):null;return v&&Te(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,u.Z)(function*(){if(!p._deleted)return h&&Te(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,u.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,u.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,u.Z)(function*(){yield p.assertedPersistence.setPersistence(Bt(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,u.Z)(function*(){const D=yield v.getOrInitRedirectPersistenceManager(p);return null===h?D.removeCurrentUser():D.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,u.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&Bt(h)||p._popupRedirectResolver;Te(v,p,"argument-error"),p.redirectPersistenceManager=yield si.create(p,[Bt(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,u.Z)(function*(){var v,D;return p._isInitialized&&(yield p.queue((0,u.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(D=p.redirectUser)||void 0===D?void 0:D._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,u.Z)(function*(){if(h===p.currentUser)return p.queue((0,u.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,D){if(this._deleted)return()=>{};const S="function"==typeof p?p:p.next.bind(p),U=this._isInitialized?Promise.resolve():this._initializationPromise;return Te(U,this,"internal-error"),U.then(()=>S(this.currentUser)),"function"==typeof p?h.addObserver(p,v,D):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,u.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ni(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,u.Z)(function*(){const p={"X-Client-Version":h.clientVersion};return h.app.options.appId&&(p["X-Firebase-gmpid"]=h.app.options.appId),p})()}}function Bn(m){return(0,k.m9)(m)}class ss{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(p=>this.observer=p)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function oi(m){const h=m.indexOf(":");return h<0?"":m.substr(0,h+1)}function Ag(m){if(!m)return null;const h=Number(m);return isNaN(h)?null:h}class Ro{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return Gn("not implemented")}_getIdTokenResponse(h){return Gn("not implemented")}_linkToIdToken(h,p){return Gn("not implemented")}_getReauthenticationResolver(h){return Gn("not implemented")}}function tf(m,h){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,u.Z)(function*(m,h){return wt(m,"POST","/v1/accounts:resetPassword",Ht(m,h))})).apply(this,arguments)}function nf(m,h){return jl.apply(this,arguments)}function jl(){return(jl=(0,u.Z)(function*(m,h){return wt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Sg(m,h){return ua.apply(this,arguments)}function ua(){return(ua=(0,u.Z)(function*(m,h){return wt(m,"POST","/v1/accounts:update",Ht(m,h))})).apply(this,arguments)}function yu(){return(yu=(0,u.Z)(function*(m,h){return L(m,"POST","/v1/accounts:signInWithPassword",Ht(m,h))})).apply(this,arguments)}function Mc(m,h){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,u.Z)(function*(m,h){return wt(m,"POST","/v1/accounts:sendOobCode",Ht(m,h))})).apply(this,arguments)}function xg(m,h){return ql.apply(this,arguments)}function ql(){return(ql=(0,u.Z)(function*(m,h){return Mc(m,h)})).apply(this,arguments)}function Mg(m,h){return rf.apply(this,arguments)}function rf(){return(rf=(0,u.Z)(function*(m,h){return Mc(m,h)})).apply(this,arguments)}function vu(m,h){return ca.apply(this,arguments)}function ca(){return(ca=(0,u.Z)(function*(m,h){return Mc(m,h)})).apply(this,arguments)}function Rc(m,h){return $l.apply(this,arguments)}function $l(){return($l=(0,u.Z)(function*(m,h){return Mc(m,h)})).apply(this,arguments)}function Li(){return(Li=(0,u.Z)(function*(m,h){return L(m,"POST","/v1/accounts:signInWithEmailLink",Ht(m,h))})).apply(this,arguments)}function Rs(){return(Rs=(0,u.Z)(function*(m,h){return L(m,"POST","/v1/accounts:signInWithEmailLink",Ht(m,h))})).apply(this,arguments)}class Oo extends Ro{constructor(h,p,v,D=null){super("password",v),this._email=h,this._password=p,this._tenantId=D}static _fromEmailAndPassword(h,p){return new Oo(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new Oo(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,u.Z)(function*(){switch(p.signInMethod){case"password":return function(m,h){return yu.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function(m,h){return Li.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ut(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,u.Z)(function*(){switch(v.signInMethod){case"password":return nf(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function(m,h){return Rs.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:Ut(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Os(m,h){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,u.Z)(function*(m,h){return L(m,"POST","/v1/accounts:signInWithIdp",Ht(m,h))})).apply(this,arguments)}class or extends Ro{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new or(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ut("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:D}=p,S=ne(p,["providerId","signInMethod"]);if(!v||!D)return null;const U=new or(v,D);return U.idToken=S.idToken||void 0,U.accessToken=S.accessToken||void 0,U.secret=S.secret,U.nonce=S.nonce,U.pendingToken=S.pendingToken||null,U}_getIdTokenResponse(h){return Os(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Os(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Os(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,k.xO)(p)}return h}}function os(m,h){return la.apply(this,arguments)}function la(){return(la=(0,u.Z)(function*(m,h){return wt(m,"POST","/v1/accounts:sendVerificationCode",Ht(m,h))})).apply(this,arguments)}function yr(){return(yr=(0,u.Z)(function*(m,h){return L(m,"POST","/v1/accounts:signInWithPhoneNumber",Ht(m,h))})).apply(this,arguments)}function kc(){return(kc=(0,u.Z)(function*(m,h){const p=yield L(m,"POST","/v1/accounts:signInWithPhoneNumber",Ht(m,h));if(p.temporaryProof)throw We(m,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const wu={USER_NOT_FOUND:"user-not-found"};function da(){return(da=(0,u.Z)(function*(m,h){return L(m,"POST","/v1/accounts:signInWithPhoneNumber",Ht(m,Object.assign(Object.assign({},h),{operation:"REAUTH"})),wu)})).apply(this,arguments)}class to extends Ro{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new to({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new to({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function(m,h){return yr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function(m,h){return kc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function(m,h){return da.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:D}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:D}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:D,temporaryProof:S}=h;return v||p||D||S?new to({verificationId:p,verificationCode:v,phoneNumber:D,temporaryProof:S}):null}}class no{constructor(h){var p,v,D,S,U,J;const Re=(0,k.zd)((0,k.pd)(h)),xe=null!==(p=Re.apiKey)&&void 0!==p?p:null,Xe=null!==(v=Re.oobCode)&&void 0!==v?v:null,et=function(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Re.mode)&&void 0!==D?D:null);Te(xe&&Xe&&et,"argument-error"),this.apiKey=xe,this.operation=et,this.code=Xe,this.continueUrl=null!==(S=Re.continueUrl)&&void 0!==S?S:null,this.languageCode=null!==(U=Re.languageCode)&&void 0!==U?U:null,this.tenantId=null!==(J=Re.tenantId)&&void 0!==J?J:null}static parseLink(h){const p=function(m){const h=(0,k.zd)((0,k.pd)(m)).link,p=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,v=(0,k.zd)((0,k.pd)(m)).deep_link_id;return(v?(0,k.zd)((0,k.pd)(v)).link:null)||v||p||h||m}(h);try{return new no(p)}catch(v){return null}}}let ro=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(p,v){return Oo._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const D=no.parseLink(v);return Te(D,"argument-error"),Oo._fromEmailAndCode(p,D.code,D.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class Ar{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ei extends Ar{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Rn extends Ei{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return Te("providerId"in p&&"signInMethod"in p,"argument-error"),or._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Te(h.idToken||h.accessToken,"argument-error"),or._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Rn.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Rn.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:D,pendingToken:S,nonce:U,providerId:J}=h;if(!v&&!D&&!p&&!S||!J)return null;try{return new Rn(J)._credential({idToken:p,accessToken:v,nonce:U,pendingToken:S})}catch(Re){return null}}}let Cu=(()=>{class m extends Ei{constructor(){super("facebook.com")}static credential(p){return or._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch(v){return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),io=(()=>{class m extends Ei{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return or._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:D}=p;if(!v&&!D)return null;try{return m.credential(v,D)}catch(S){return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),so=(()=>{class m extends Ei{constructor(){super("github.com")}static credential(p){return or._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return m.credential(p.oauthAccessToken)}catch(v){return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class as extends Ro{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Os(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Os(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Os(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:D,pendingToken:S}=p;return v&&D&&S&&v===D?new as(v,S):null}static _create(h,p){return new as(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class oo extends Ar{constructor(h){Te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return oo.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return oo.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=as.fromJSON(h);return Te(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return as._create(v,p)}catch(D){return null}}}let Sr=(()=>{class m extends Ei{constructor(){super("twitter.com")}static credential(p,v){return or._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:D}=p;if(!v||!D)return null;try{return m.credential(v,D)}catch(S){return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function fa(m,h){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,u.Z)(function*(m,h){return L(m,"POST","/v1/accounts:signUp",Ht(m,h))})).apply(this,arguments)}class Qe{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,D=!1){return(0,u.Z)(function*(){const S=yield gt._fromIdTokenResponse(h,v,D),U=Eu(v);return new Qe({user:S,providerId:U,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,u.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const D=Eu(v);return new Qe({user:h,providerId:D,_tokenResponse:v,operationType:p})})()}}function Eu(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function Po(){return(Po=(0,u.Z)(function*(m){var h;const p=Bn(m);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new Qe({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield fa(p,{returnSecureToken:!0}),D=yield Qe._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(D.user),D})).apply(this,arguments)}class ga extends k.ZR{constructor(h,p,v,D){var S;super(p.code,p.message),this.operationType=v,this.user=D,Object.setPrototypeOf(this,ga.prototype),this.customData={appName:h.name,tenantId:null!==(S=h.tenantId)&&void 0!==S?S:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,D){return new ga(h,p,v,D)}}function bu(m,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(m):p._getIdTokenResponse(m)).catch(S=>{throw"auth/multi-factor-auth-required"===S.code?ga._fromErrorAndOperation(m,S,h,v):S})}function Iu(m){return new Set(m.map(({providerId:h})=>h).filter(h=>!!h))}function be(){return(be=(0,u.Z)(function*(m,h){const p=(0,k.m9)(m);yield pn(!0,p,h);const{providerUserInfo:v}=yield nr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),D=Iu(v||[]);return p.providerData=p.providerData.filter(S=>D.has(S.providerId)),D.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Ot(m,h){return us.apply(this,arguments)}function us(){return(us=(0,u.Z)(function*(m,h,p=!1){const v=yield sn(m,h._linkToIdToken(m.auth,yield m.getIdToken()),p);return Qe._forOperation(m,"link",v)})).apply(this,arguments)}function pn(m,h,p){return ma.apply(this,arguments)}function ma(){return(ma=(0,u.Z)(function*(m,h,p){yield Ve(h);const D=!1===m?"provider-already-linked":"no-such-provider";Te(Iu(h.providerData).has(p)===m,h.auth,D)})).apply(this,arguments)}function ks(m,h){return ar.apply(this,arguments)}function ar(){return(ar=(0,u.Z)(function*(m,h,p=!1){const{auth:v}=m,D="reauthenticate";try{const S=yield sn(m,bu(v,D,h,m),p);Te(S.idToken,v,"internal-error");const U=Js(S.idToken);Te(U,v,"internal-error");const{sub:J}=U;return Te(m.uid===J,v,"user-mismatch"),Qe._forOperation(m,D,S)}catch(S){throw"auth/user-not-found"===(null==S?void 0:S.code)&&Ut(v,"user-mismatch"),S}})).apply(this,arguments)}function Du(m,h){return ao.apply(this,arguments)}function ao(){return(ao=(0,u.Z)(function*(m,h,p=!1){const v="signIn",D=yield bu(m,v,h),S=yield Qe._fromIdTokenResponse(m,v,D);return p||(yield m._updateCurrentUser(S.user)),S})).apply(this,arguments)}function Fc(m,h){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,u.Z)(function*(m,h){return Du(Bn(m),h)})).apply(this,arguments)}function _a(m,h){return uo.apply(this,arguments)}function uo(){return(uo=(0,u.Z)(function*(m,h){const p=(0,k.m9)(m);return yield pn(!1,p,h.providerId),Ot(p,h)})).apply(this,arguments)}function Wn(m,h){return bi.apply(this,arguments)}function bi(){return(bi=(0,u.Z)(function*(m,h){return ks((0,k.m9)(m),h)})).apply(this,arguments)}function ya(m,h){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,u.Z)(function*(m,h){return L(m,"POST","/v1/accounts:signInWithCustomToken",Ht(m,h))})).apply(this,arguments)}function va(){return(va=(0,u.Z)(function*(m,h){const p=Bn(m),v=yield ya(p,{token:h,returnSecureToken:!0}),D=yield Qe._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(D.user),D})).apply(this,arguments)}class wa{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Ca._fromServerResponse(h,p):Ut(h,"internal-error")}}class Ca extends wa{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Ca(p)}}function Tu(m,h,p){var v;Te((null===(v=p.url)||void 0===v?void 0:v.length)>0,m,"invalid-continue-uri"),Te(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(Te(p.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(Te(p.android.packageName.length>0,m,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function ko(){return(ko=(0,u.Z)(function*(m,h,p){const v=(0,k.m9)(m),D={requestType:"PASSWORD_RESET",email:h};p&&Tu(v,D,p),yield Mg(v,D)})).apply(this,arguments)}function ba(){return(ba=(0,u.Z)(function*(m,h,p){yield tf((0,k.m9)(m),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Su(){return(Su=(0,u.Z)(function*(m,h){yield Sg((0,k.m9)(m),{oobCode:h})})).apply(this,arguments)}function xu(m,h){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,u.Z)(function*(m,h){const p=(0,k.m9)(m),v=yield tf(p,{oobCode:h}),D=v.requestType;switch(Te(D,p,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(v.mfaInfo,p,"internal-error");default:Te(v.email,p,"internal-error")}let S=null;return v.mfaInfo&&(S=wa._fromServerResponse(Bn(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:S},operation:D}})).apply(this,arguments)}function Da(){return(Da=(0,u.Z)(function*(m,h){const{data:p}=yield xu((0,k.m9)(m),h);return p.email})).apply(this,arguments)}function Ta(){return(Ta=(0,u.Z)(function*(m,h,p){const v=Bn(m),D=yield fa(v,{returnSecureToken:!0,email:h,password:p}),S=yield Qe._fromIdTokenResponse(v,"signIn",D);return yield v._updateCurrentUser(S.user),S})).apply(this,arguments)}function on(){return(on=(0,u.Z)(function*(m,h,p){const v=(0,k.m9)(m),D={requestType:"EMAIL_SIGNIN",email:h};Te(p.handleCodeInApp,v,"argument-error"),p&&Tu(v,D,p),yield vu(v,D)})).apply(this,arguments)}function Aa(){return(Aa=(0,u.Z)(function*(m,h,p){const v=(0,k.m9)(m),D=ro.credentialWithLink(h,p||at());return Te(D._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Fc(v,D)})).apply(this,arguments)}function af(m,h){return uf.apply(this,arguments)}function uf(){return(uf=(0,u.Z)(function*(m,h){return wt(m,"POST","/v1/accounts:createAuthUri",Ht(m,h))})).apply(this,arguments)}function cf(){return(cf=(0,u.Z)(function*(m,h){const v={identifier:h,continueUri:ht()?at():"http://localhost"},{signinMethods:D}=yield af((0,k.m9)(m),v);return D||[]})).apply(this,arguments)}function Ls(){return(Ls=(0,u.Z)(function*(m,h){const p=(0,k.m9)(m),D={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};h&&Tu(p.auth,D,h);const{email:S}=yield xg(p.auth,D);S!==m.email&&(yield m.reload())})).apply(this,arguments)}function Sa(){return(Sa=(0,u.Z)(function*(m,h,p){const v=(0,k.m9)(m),S={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:h};p&&Tu(v.auth,S,p);const{email:U}=yield Rc(v.auth,S);U!==m.email&&(yield m.reload())})).apply(this,arguments)}function Jl(m,h){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,u.Z)(function*(m,h){return wt(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function dn(){return(dn=(0,u.Z)(function*(m,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,k.m9)(m),S={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},U=yield sn(v,Jl(v.auth,S));v.displayName=U.displayName||null,v.photoURL=U.photoUrl||null;const J=v.providerData.find(({providerId:Re})=>"password"===Re);J&&(J.displayName=v.displayName,J.photoURL=v.photoURL),yield v._updateTokensIfNecessary(U)})).apply(this,arguments)}function lf(m,h,p){return No.apply(this,arguments)}function No(){return(No=(0,u.Z)(function*(m,h,p){const{auth:v}=m,S={idToken:yield m.getIdToken(),returnSecureToken:!0};h&&(S.email=h),p&&(S.password=p);const U=yield sn(m,nf(v,S));yield m._updateTokensIfNecessary(U,!0)})).apply(this,arguments)}class Ma{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class jc extends Ma{constructor(h,p,v,D){super(h,p,v),this.username=D}}class Ng extends Ma{constructor(h,p){super(h,"facebook.com",p)}}class K_ extends jc{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Wt extends Ma{constructor(h,p){super(h,"google.com",p)}}class co extends jc{constructor(h,p,v){super(h,"twitter.com",p,v)}}function Je(m){const{user:h,_tokenResponse:p}=m;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function(m){var h,p;if(!m)return null;const{providerId:v}=m,D=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},S=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!v&&(null==m?void 0:m.idToken)){const U=null===(p=null===(h=Js(m.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(U)return new Ma(S,"anonymous"!==U&&"custom"!==U?U:null)}if(!v)return null;switch(v){case"facebook.com":return new Ng(S,D);case"github.com":return new K_(S,D);case"google.com":return new Wt(S,D);case"twitter.com":return new co(S,D,m.screenName||null);case"custom":case"anonymous":return new Ma(S,null);default:return new Ma(S,v,D)}}(p)}class Us{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new Us("enroll",h)}static _fromMfaPendingCredential(h){return new Us("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return Us._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return Us._fromIdtoken(h.multiFactorSession.idToken)}return null}}class cs{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=Bn(h),D=p.customData._serverResponse,S=(D.mfaInfo||[]).map(J=>wa._fromServerResponse(v,J));Te(D.mfaPendingCredential,v,"internal-error");const U=Us._fromMfaPendingCredential(D.mfaPendingCredential);return new cs(U,S,function(){var J=(0,u.Z)(function*(Re){const xe=yield Re._process(v,U);delete D.mfaInfo,delete D.mfaPendingCredential;const Xe=Object.assign(Object.assign({},D),{idToken:xe.idToken,refreshToken:xe.refreshToken});switch(p.operationType){case"signIn":const et=yield Qe._fromIdTokenResponse(v,p.operationType,Xe);return yield v._updateCurrentUser(et.user),et;case"reauthenticate":return Te(p.user,v,"internal-error"),Qe._forOperation(p.user,p.operationType,Xe);default:Ut(v,"internal-error")}});return function(Re){return J.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,u.Z)(function*(){return p.signInResolver(h)})()}}function df(m,h){return wt(m,"POST","/v2/accounts/mfaEnrollment:start",Ht(m,h))}class Uo{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>wa._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Uo(h)}getSession(){var h=this;return(0,u.Z)(function*(){return Us._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,u.Z)(function*(){const D=h,S=yield v.getSession(),U=yield sn(v.user,D._process(v.user.auth,S,p));return yield v.user._updateTokensIfNecessary(U),v.user.reload()})()}unenroll(h){var p=this;return(0,u.Z)(function*(){const v="string"==typeof h?h:h.uid,D=yield p.user.getIdToken(),S=yield sn(p.user,function(m,h){return wt(m,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(m,h))}(p.user.auth,{idToken:D,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:U})=>U!==v),yield p.user._updateTokensIfNecessary(S);try{yield p.user.reload()}catch(U){if("auth/user-token-expired"!==U.code)throw U}})()}}const xn=new WeakMap,ls="__sak";class ed{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(ls,"1"),this.storage.removeItem(ls),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Oa=(()=>{class m extends ed{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const m=(0,k.z$)();return Ss(m)||xs(m)}()&&function(){try{return!(!window||window===window.top)}catch(m){return!1}}(),this.fallbackToPolling=Sn(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const D=this.storage.getItem(v),S=this.localCache[v];D!==S&&p(v,S,D)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((J,Re,xe)=>{this.notifyListeners(J,xe)});const D=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(D);if(p.newValue!==J)null!==p.newValue?this.storage.setItem(D,p.newValue):this.storage.removeItem(D);else if(this.localCache[D]===p.newValue&&!v)return}const S=()=>{const J=this.storage.getItem(D);!v&&this.localCache[D]===J||this.notifyListeners(D,J)},U=this.storage.getItem(D);(0,k.w1)()&&10===document.documentMode&&U!==p.newValue&&p.newValue!==p.oldValue?setTimeout(S,10):S()}notifyListeners(p,v){this.localCache[p]=v;const D=this.listeners[p];if(D)for(const S of Array.from(D))S(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var D=()=>super._set,S=this;return(0,u.Z)(function*(){yield D().call(S,p,v),S.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,D=this;return(0,u.Z)(function*(){const S=yield v().call(D,p);return D.localCache[p]=JSON.stringify(S),S})()}_remove(p){var v=()=>super._remove,D=this;return(0,u.Z)(function*(){yield v().call(D,p),delete D.localCache[p]})()}}return m.type="LOCAL",m})(),Zn=(()=>{class m extends ed{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return m.type="SESSION",m})();let Pa=(()=>{class m{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(S=>S.isListeningto(p));if(v)return v;const D=new m(p);return this.receivers.push(D),D}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,u.Z)(function*(){const D=p,{eventId:S,eventType:U,data:J}=D.data,Re=v.handlersMap[U];if(!(null==Re?void 0:Re.size))return;D.ports[0].postMessage({status:"ack",eventId:S,eventType:U});const xe=Array.from(Re).map(function(){var et=(0,u.Z)(function*(Vt){return Vt(D.origin,J)});return function(Vt){return et.apply(this,arguments)}}()),Xe=yield function(m){return Promise.all(m.map(function(){var h=(0,u.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(xe);D.ports[0].postMessage({status:"done",eventId:S,eventType:U,response:Xe})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function fo(m="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return m+p}class vr{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var D=this;return(0,u.Z)(function*(){const S="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!S)throw new Error("connection_unavailable");let U,J;return new Promise((Re,xe)=>{const Xe=fo("",20);S.port1.start();const et=setTimeout(()=>{xe(new Error("unsupported_event"))},v);J={messageChannel:S,onMessage(Vt){const wn=Vt;if(wn.data.eventId===Xe)switch(wn.data.status){case"ack":clearTimeout(et),U=setTimeout(()=>{xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(U),Re(wn.data.response);break;default:clearTimeout(et),clearTimeout(U),xe(new Error("invalid_response"))}}},D.handlers.add(J),S.port1.addEventListener("message",J.onMessage),D.target.postMessage({eventType:h,eventId:Xe,data:p},[S.port2])}).finally(()=>{J&&D.removeMessageHandler(J)})})()}}function hn(){return window}function mn(){return void 0!==hn().WorkerGlobalScope&&"function"==typeof hn().importScripts}function Di(){return(Di=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(m){return null}})).apply(this,arguments)}const ur="firebaseLocalStorageDb",an="firebaseLocalStorage",ff="fbase_key";class ds{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function tn(m,h){return m.transaction([an],h?"readwrite":"readonly").objectStore(an)}function pf(){const m=indexedDB.open(ur,1);return new Promise((h,p)=>{m.addEventListener("error",()=>{p(m.error)}),m.addEventListener("upgradeneeded",()=>{const v=m.result;try{v.createObjectStore(an,{keyPath:ff})}catch(D){p(D)}}),m.addEventListener("success",(0,u.Z)(function*(){const v=m.result;v.objectStoreNames.contains(an)?h(v):(v.close(),yield function(){const m=indexedDB.deleteDatabase(ur);return new ds(m).toPromise()}(),h(yield pf()))}))})}function gf(m,h,p){return mf.apply(this,arguments)}function mf(){return(mf=(0,u.Z)(function*(m,h,p){const v=tn(m,!0).put({[ff]:h,value:p});return new ds(v).toPromise()})).apply(this,arguments)}function xr(){return(xr=(0,u.Z)(function*(m,h){const p=tn(m,!1).get(h),v=yield new ds(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function td(m,h){const p=tn(m,!0).delete(h);return new ds(p).toPromise()}const js=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,u.Z)(function*(){return p.db||(p.db=yield pf()),p.db})()}_withRetries(p){var v=this;return(0,u.Z)(function*(){let D=0;for(;;)try{const S=yield v._openDb();return yield p(S)}catch(S){if(D++>3)throw S;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,u.Z)(function*(){return mn()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,u.Z)(function*(){p.receiver=Pa._getInstance(mn()?self:null),p.receiver._subscribe("keyChanged",function(){var v=(0,u.Z)(function*(D,S){return{keyProcessed:(yield p._poll()).includes(S.key)}});return function(D,S){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,u.Z)(function*(D,S){return["keyChanged"]});return function(D,S){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,u.Z)(function*(){var v,D;if(p.activeServiceWorker=yield function(){return Di.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new vr(p.activeServiceWorker);const S=yield p.sender._send("ping",{},800);!S||(null===(v=S[0])||void 0===v?void 0:v.fulfilled)&&(null===(D=S[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,u.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function(){var m;return(null===(m=null==navigator?void 0:navigator.serviceWorker)||void 0===m?void 0:m.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const p=yield pf();return yield gf(p,ls,"1"),yield td(p,ls),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,u.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var D=this;return(0,u.Z)(function*(){return D._withPendingWrite((0,u.Z)(function*(){return yield D._withRetries(S=>gf(S,p,v)),D.localCache[p]=v,D.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,u.Z)(function*(){const D=yield v._withRetries(S=>function(m,h){return xr.apply(this,arguments)}(S,p));return v.localCache[p]=D,D})()}_remove(p){var v=this;return(0,u.Z)(function*(){return v._withPendingWrite((0,u.Z)(function*(){return yield v._withRetries(D=>td(D,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,u.Z)(function*(){const v=yield p._withRetries(U=>{const J=tn(U,!1).getAll();return new ds(J).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const D=[],S=new Set;for(const{fbase_key:U,value:J}of v)S.add(U),JSON.stringify(p.localCache[U])!==JSON.stringify(J)&&(p.notifyListeners(U,J),D.push(U));for(const U of Object.keys(p.localCache))p.localCache[U]&&!S.has(U)&&(p.notifyListeners(U,null),D.push(U));return D})()}notifyListeners(p,v){this.localCache[p]=v;const D=this.listeners[p];if(D)for(const S of Array.from(D))S(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})();function Na(m,h){return wt(m,"POST","/v2/accounts/mfaSignIn:start",Ht(m,h))}function Qr(){return(Qr=(0,u.Z)(function*(m){return(yield wt(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $c(m){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",m),v.onload=h,v.onerror=D=>{const S=En("internal-error");S.customData=D,p(S)},v.type="text/javascript",v.charset="UTF-8",function(){var m,h;return null!==(h=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==h?h:document}().appendChild(v)})}function go(m){return`__${m}${Math.floor(1e6*Math.random())}`}const Fa=1e12;class Hc{constructor(h){this.auth=h,this.counter=Fa,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new yf(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||Fa;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Fa))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,u.Z)(function*(){var v;return null===(v=p._widgets.get(h||Fa))||void 0===v||v.execute(),""})()}}class yf{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof h?document.getElementById(h):h;Te(D,"argument-error",{appName:p}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(m){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<50;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}();const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ct=go("rcb"),wr=new qt(3e4,6e4);class jo{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!hn().grecaptcha}load(h,p=""){return Te((m=p).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(hn().grecaptcha):new Promise((v,D)=>{const S=hn().setTimeout(()=>{D(En(h,"network-request-failed"))},wr.get());hn()[Ct]=()=>{hn().clearTimeout(S),delete hn()[Ct];const J=hn().grecaptcha;if(!J)return void D(En(h,"internal-error"));const Re=J.render;J.render=(xe,Xe)=>{const et=Re(xe,Xe);return this.counter++,et},this.hostLanguage=p,v(J)},$c(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:Ct,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(S),D(En(h,"internal-error"))})});var m}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!hn().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wf{load(h){return(0,u.Z)(function*(){return new Hc(h)})()}clearedOneInstance(){}}const id="recaptcha",Cf={theme:"light",type:"image"};class Cr{constructor(h,p=Object.assign({},Cf),v){this.parameters=p,this.type=id,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bn(v),this.isInvisible="invisible"===this.parameters.size,Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof h?document.getElementById(h):h;Te(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wf:new jo,this.validateStartingState()}verify(){var h=this;return(0,u.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(S=>{const U=J=>{!J||(h.tokenChangeListeners.delete(U),S(J))};h.tokenChangeListeners.add(U),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=hn()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,u.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,u.Z)(function*(){Te(ht()&&!mn(),h.auth,"internal-error"),yield function(){let m=null;return new Promise(h=>{"complete"!==document.readyState?(m=()=>h(),window.addEventListener("load",m)):h()}).catch(h=>{throw m&&window.removeEventListener("load",m),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function(m){return Qr.apply(this,arguments)}(h.auth);Te(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Fu{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=to._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function $i(){return($i=(0,u.Z)(function*(m,h,p){const v=Bn(m),D=yield hs(v,h,(0,k.m9)(p));return new Fu(D,S=>Fc(v,S))})).apply(this,arguments)}function Kn(){return(Kn=(0,u.Z)(function*(m,h,p){const v=(0,k.m9)(m);yield pn(!1,v,"phone");const D=yield hs(v.auth,h,(0,k.m9)(p));return new Fu(D,S=>_a(v,S))})).apply(this,arguments)}function Lu(){return(Lu=(0,u.Z)(function*(m,h,p){const v=(0,k.m9)(m),D=yield hs(v.auth,h,(0,k.m9)(p));return new Fu(D,S=>Wn(v,S))})).apply(this,arguments)}function hs(m,h,p){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,u.Z)(function*(m,h,p){var v;const D=yield p.verify();try{let S;if(Te("string"==typeof D,m,"argument-error"),Te(p.type===id,m,"argument-error"),S="string"==typeof h?{phoneNumber:h}:h,"session"in S){const U=S.session;if("phoneNumber"in S)return Te("enroll"===U.type,m,"internal-error"),(yield df(m,{idToken:U.credential,phoneEnrollmentInfo:{phoneNumber:S.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{Te("signin"===U.type,m,"internal-error");const J=(null===(v=S.multiFactorHint)||void 0===v?void 0:v.uid)||S.multiFactorUid;return Te(J,m,"missing-multi-factor-info"),(yield Na(m,{mfaPendingCredential:U.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:U}=yield os(m,{phoneNumber:S.phoneNumber,recaptchaToken:D});return U}}finally{p._reset()}})).apply(this,arguments)}function Kc(){return(Kc=(0,u.Z)(function*(m,h){yield Ot((0,k.m9)(m),h)})).apply(this,arguments)}let b=(()=>{class m{constructor(p){this.providerId=m.PROVIDER_ID,this.auth=Bn(p)}verifyPhoneNumber(p,v){return hs(this.auth,p,(0,k.m9)(v))}static credential(p,v){return to._fromVerification(p,v)}static credentialFromResult(p){return m.credentialFromTaggedObject(p)}static credentialFromError(p){return m.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:D}=p;return v&&D?to._fromTokenResponse(v,D):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function I(m,h){return h?Bt(h):(Te(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class M extends Ro{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Os(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Os(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Os(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function F(m){return Du(m.auth,new M(m),m.bypassAuthState)}function G(m){const{auth:h,user:p}=m;return Te(p,h,"internal-error"),ks(p,new M(m),m.bypassAuthState)}function H(m){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,u.Z)(function*(m){const{auth:h,user:p}=m;return Te(p,h,"internal-error"),Ot(p,new M(m),m.bypassAuthState)})).apply(this,arguments)}class Ke{constructor(h,p,v,D,S=!1){this.auth=h,this.resolver=v,this.user=D,this.bypassAuthState=S,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,u.Z)(function*(v,D){h.pendingPromise={resolve:v,reject:D};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(S){h.reject(S)}});return function(v,D){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,u.Z)(function*(){const{urlResponse:v,sessionId:D,postBody:S,tenantId:U,error:J,type:Re}=h;if(J)return void p.reject(J);const xe={auth:p.auth,requestUri:v,sessionId:D,tenantId:U||void 0,postBody:S||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Re)(xe))}catch(Xe){p.reject(Xe)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return F;case"linkViaPopup":case"linkViaRedirect":return H;case"reauthViaPopup":case"reauthViaRedirect":return G;default:Ut(this.auth,"internal-error")}}resolve(h){kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const je=new qt(2e3,1e4);function Kt(){return(Kt=(0,u.Z)(function*(m,h,p){const v=Bn(m);mi(m,h,Ar);const D=I(v,p);return new mo(v,"signInViaPopup",h,D).executeNotNull()})).apply(this,arguments)}function Or(){return(Or=(0,u.Z)(function*(m,h,p){const v=(0,k.m9)(m);mi(v.auth,h,Ar);const D=I(v.auth,p);return new mo(v.auth,"reauthViaPopup",h,D,v).executeNotNull()})).apply(this,arguments)}function cr(){return(cr=(0,u.Z)(function*(m,h,p){const v=(0,k.m9)(m);mi(v.auth,h,Ar);const D=I(v.auth,p);return new mo(v.auth,"linkViaPopup",h,D,v).executeNotNull()})).apply(this,arguments)}let mo=(()=>{class m extends Ke{constructor(p,v,D,S,U){super(p,v,S,U),this.provider=D,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var p=this;return(0,u.Z)(function*(){const v=yield p.execute();return Te(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,u.Z)(function*(){kn(1===p.filter.length,"Popup operations only handle one event");const v=fo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(D=>{p.reject(D)}),p.resolver._isIframeWebStorageSupported(p.auth,D=>{D||p.reject(En(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,D;this.pollId=(null===(D=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,je.get())};p()}}return m.currentPopupAction=null,m})();const Hi=new Map;class fs extends Ke{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,u.Z)(function*(){let v=Hi.get(p.auth._key());if(!v){try{const S=(yield function(m,h){return Ua.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(S)}catch(D){v=()=>Promise.reject(D)}Hi.set(p.auth._key(),v)}return p.bypassAuthState||Hi.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,u.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const D=yield v.auth._redirectUserForId(h.eventId);if(D)return v.user=D,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Ua(){return(Ua=(0,u.Z)(function*(m,h){const p=yo(h),v=Va(m);if(!(yield v._isAvailable()))return!1;const D="true"===(yield v._get(p));return yield v._remove(p),D})).apply(this,arguments)}function Yc(m,h){return bf.apply(this,arguments)}function bf(){return(bf=(0,u.Z)(function*(m,h){return Va(m)._set(yo(h),"true")})).apply(this,arguments)}function Va(m){return Bt(m._redirectPersistence)}function yo(m){return Kr("pendingRedirect",m.config.apiKey,m.name)}function sd(){return(sd=(0,u.Z)(function*(m,h,p){const v=Bn(m);mi(m,h,Ar);const D=I(v,p);return yield Yc(D,v),D._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function od(){return(od=(0,u.Z)(function*(m,h,p){const v=(0,k.m9)(m);mi(v.auth,h,Ar);const D=I(v.auth,p);yield Yc(D,v.auth);const S=yield Ba(v);return D._openRedirect(v.auth,h,"reauthViaRedirect",S)})).apply(this,arguments)}function ai(){return(ai=(0,u.Z)(function*(m,h,p){const v=(0,k.m9)(m);mi(v.auth,h,Ar);const D=I(v.auth,p);yield pn(!1,v,h.providerId),yield Yc(D,v.auth);const S=yield Ba(v);return D._openRedirect(v.auth,h,"linkViaRedirect",S)})).apply(this,arguments)}function vo(){return(vo=(0,u.Z)(function*(m,h){return yield Bn(m)._initializationPromise,Qc(m,h,!1)})).apply(this,arguments)}function Qc(m,h){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,u.Z)(function*(m,h,p=!1){const v=Bn(m),D=I(v,h),U=yield new fs(v,D,p).execute();return U&&!p&&(delete U.user._redirectEventId,yield v._persistUserIfCurrent(U.user),yield v._setRedirectUser(null,h)),U})).apply(this,arguments)}function Ba(m){return ja.apply(this,arguments)}function ja(){return(ja=(0,u.Z)(function*(m){const h=fo(`${m.uid}:::`);return m._redirectEventId=h,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),h})).apply(this,arguments)}class Vu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jc(m);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!Jc(h)){const D=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(En(this.auth,D))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ad(h))}saveEventToCache(h){this.cachedEventUids.add(ad(h)),this.lastProcessedEventTime=Date.now()}}function ad(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(h=>h).join("-")}function Jc({type:m,error:h}){return"unknown"===m&&"auth/no-auth-event"===(null==h?void 0:h.code)}function ud(m){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,u.Z)(function*(m,h={}){return wt(m,"GET","/v1/projects",h)})).apply(this,arguments)}const X_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,el=/^https?/;function Zs(){return(Zs=(0,u.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:h}=yield ud(m);for(const p of h)try{if(tl(p))return}catch(v){}Ut(m,"unauthorized-domain")})).apply(this,arguments)}function tl(m){const h=at(),{protocol:p,hostname:v}=new URL(h);if(m.startsWith("chrome-extension://")){const U=new URL(m);return""===U.hostname&&""===v?"chrome-extension:"===p&&m.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&U.hostname===v}if(!el.test(p))return!1;if(X_.test(m))return v===m;const D=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(v)}const cd=new qt(3e4,6e4);function nl(){const m=hn().___jsl;if(null==m?void 0:m.H)for(const h of Object.keys(m.H))if(m.H[h].r=m.H[h].r||[],m.H[h].L=m.H[h].L||[],m.H[h].r=[...m.H[h].L],m.CP)for(let p=0;p<m.CP.length;p++)m.CP[p]=null}let ld=null;function ty(m){return ld=ld||function(m){return new Promise((h,p)=>{var v,D,S;function U(){nl(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{nl(),p(En(m,"network-request-failed"))},timeout:cd.get()})}if(null===(D=null===(v=hn().gapi)||void 0===v?void 0:v.iframes)||void 0===D?void 0:D.Iframe)h(gapi.iframes.getContext());else{if(!(null===(S=hn().gapi)||void 0===S?void 0:S.load)){const J=go("iframefcb");return hn()[J]=()=>{gapi.load?U():p(En(m,"network-request-failed"))},$c(`https://apis.google.com/js/api.js?onload=${J}`).catch(Re=>p(Re))}U()}}).catch(h=>{throw ld=null,h})}(m),ld}const gw=new qt(5e3,15e3),ry={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vg(m){const h=m.config;Te(h.authDomain,m,"auth-domain-config-required");const p=h.emulator?Ge(h,"emulator/auth/iframe"):`https://${m.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:m.name,v:ae.SDK_VERSION},D=iy.get(m.config.apiHost);D&&(v.eid=D);const S=m._getFrameworks();return S.length&&(v.fw=S.join(",")),`${p}?${(0,k.xO)(v).slice(1)}`}function Mf(){return Mf=(0,u.Z)(function*(m){const h=yield ty(m),p=hn().gapi;return Te(p,m,"internal-error"),h.open({where:document.body,url:Vg(m),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ry,dontclear:!0},v=>new Promise(function(){var D=(0,u.Z)(function*(S,U){yield v.restyle({setHideOnLeave:!1});const J=En(m,"network-request-failed"),Re=hn().setTimeout(()=>{U(J)},gw.get());function xe(){hn().clearTimeout(Re),S(v)}v.ping(xe).then(xe,()=>{U(J)})});return function(S,U){return D.apply(this,arguments)}}()))}),Mf.apply(this,arguments)}const Bu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rf{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function gs(m,h,p,v,D,S){Te(m.config.authDomain,m,"auth-domain-config-required"),Te(m.config.apiKey,m,"invalid-api-key");const U={apiKey:m.config.apiKey,appName:m.name,authType:p,redirectUrl:v,v:ae.SDK_VERSION,eventId:D};if(h instanceof Ar){h.setDefaultLanguage(m.languageCode),U.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(U.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Re,xe]of Object.entries(S||{}))U[Re]=xe}if(h instanceof Ei){const Re=h.getScopes().filter(xe=>""!==xe);Re.length>0&&(U.scopes=Re.join(","))}m.tenantId&&(U.tid=m.tenantId);const J=U;for(const Re of Object.keys(J))void 0===J[Re]&&delete J[Re];return`${function({config:m}){return m.emulator?Ge(m,"emulator/auth/handler"):`https://${m.authDomain}/__/auth/handler`}(m)}?${(0,k.xO)(J).slice(1)}`}const rl="webStorageSupport";class qa extends class{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return Gn("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new qa(h)}_finalizeEnroll(h,p,v){return function(m,h){return wt(m,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(m,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function(m,h){return wt(m,"POST","/v2/accounts/mfaSignIn:finalize",Ht(m,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let oy=(()=>{class m{constructor(){}static assertion(p){return qa._fromCredential(p)}}return m.FACTOR_ID="phone",m})();var m,qu="@firebase/auth";class $g{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,u.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var D;h((null===(D=v)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $a(){return window}function fd(){return fd=(0,u.Z)(function*(m,h,p){var v;const{BuildInfo:D}=$a();kn(h.sessionId,"AuthEvent did not contain a session ID");const S=yield cy(h.sessionId),U={};return xs()?U.ibi=D.packageName:oa()?U.apn=D.packageName:Ut(m,"operation-not-supported-in-this-environment"),D.displayName&&(U.appDisplayName=D.displayName),U.sessionId=S,gs(m,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,U)}),fd.apply(this,arguments)}function Ha(){return Ha=(0,u.Z)(function*(m){const{BuildInfo:h}=$a(),p={};xs()?p.iosBundleId=h.packageName:oa()?p.androidPackageName=h.packageName:Ut(m,"operation-not-supported-in-this-environment"),yield ud(m,p)}),Ha.apply(this,arguments)}function Pf(){return Pf=(0,u.Z)(function*(m,h,p){const{cordova:v}=$a();let D=()=>{};try{yield new Promise((S,U)=>{let J=null;function Re(){var et;S();const Vt=null===(et=v.plugins.browsertab)||void 0===et?void 0:et.close;"function"==typeof Vt&&Vt(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function xe(){J||(J=window.setTimeout(()=>{U(En(m,"redirect-cancelled-by-user"))},2e3))}function Xe(){"visible"===(null==document?void 0:document.visibilityState)&&xe()}h.addPassiveListener(Re),document.addEventListener("resume",xe,!1),oa()&&document.addEventListener("visibilitychange",Xe,!1),D=()=>{h.removePassiveListener(Re),document.removeEventListener("resume",xe,!1),document.removeEventListener("visibilitychange",Xe,!1),J&&window.clearTimeout(J)}})}finally{D()}}),Pf.apply(this,arguments)}function cy(m){return sl.apply(this,arguments)}function sl(){return sl=(0,u.Z)(function*(m){const h=ly(m),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(D=>D.toString(16).padStart(2,"0")).join("")}),sl.apply(this,arguments)}function ly(m){if(kn(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(m);const h=new ArrayBuffer(m.length),p=new Uint8Array(h);for(let v=0;v<m.length;v++)p[v]=m.charCodeAt(v);return p}m="Browser",(0,ae._registerComponent)(new de.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),{apiKey:D,authDomain:S}=v.options;return(U=>{Te(D&&!D.includes(":"),"invalid-api-key",{appName:U.name}),Te(!(null==S?void 0:S.includes(":")),"argument-error",{appName:U.name});const J={apiKey:D,authDomain:S,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ni(m)},Re=new Fi(U,J);return function(m,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(Bt);(null==h?void 0:h.errorMap)&&m._updateErrorMap(h.errorMap),m._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(Re,p),Re})(v)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new de.wA("auth-internal",h=>{const p=Bn(h.getProvider("auth").getImmediate());return new $g(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(qu,"0.19.4",void 0),(0,ae.registerVersion)(qu,"0.19.4","esm2017");class Yn extends Vu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,u.Z)(function*(){yield h.initPromise})()}}function _d(m){return lr.apply(this,arguments)}function lr(){return lr=(0,u.Z)(function*(m){const h=yield Nf()._get(Ff(m));return h&&(yield Nf()._remove(Ff(m))),h}),lr.apply(this,arguments)}function kf(){const m=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);m.push(h.charAt(v))}return m.join("")}function Nf(){return Bt(Oa)}function Ff(m){return Kr("authEvent",m.config.apiKey,m.name)}function Hu(m){if(!(null==m?void 0:m.includes("?")))return{};const[h,...p]=m.split("?");return(0,k.zd)(p.join("?"))}function ul(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:En("no-auth-event")}}function za(){var m;return(null===(m=null==self?void 0:self.location)||void 0===m?void 0:m.protocol)||null}function Wg(m=(0,k.z$)()){return!("file:"!==za()&&"ionic:"!==za()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kg(){try{const m=self.localStorage,h=fo();if(m)return m.setItem(h,"1"),m.removeItem(h),!function(m=(0,k.z$)()){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)||function(m=(0,k.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,k.hl)()}catch(m){return Uf()&&(0,k.hl)()}return!1}function Uf(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vf(){return("http:"===za()||"https:"===za()||(0,k.ru)()||Wg())&&!((0,k.b$)()||(0,k.UG)())&&Kg()&&!Uf()}function wd(){return Wg()&&"undefined"!=typeof document}function Bf(){return Bf=(0,u.Z)(function*(){return!!wd()&&new Promise(m=>{const h=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),m(!0)})})}),Bf.apply(this,arguments)}const Ti={LOCAL:"local",NONE:"none",SESSION:"session"},ll=Te,jf="persistence";function Qg(m){return Cd.apply(this,arguments)}function Cd(){return Cd=(0,u.Z)(function*(m){yield m._initializationPromise;const h=zi(),p=Kr(jf,m.config.apiKey,m.name);(null==h?void 0:h.sessionStorage)&&h.sessionStorage.setItem(p,m._getPersistence())}),Cd.apply(this,arguments)}function zi(){return"undefined"!=typeof window?window:null}const wy=Te;class Ka{constructor(){this.browserResolver=Bt(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zn,this._completeRedirectFn=Qc}_openPopup(h,p,v,D){var S=this;return(0,u.Z)(function*(){var U;kn(null===(U=S.eventManagers[h._key()])||void 0===U?void 0:U.manager,"_initialize() not called before _openPopup()");const J=gs(h,p,v,at(),D);return function(m,h,p,v=500,D=600){const S=Math.max((window.screen.availHeight-D)/2,0).toString(),U=Math.max((window.screen.availWidth-v)/2,0).toString();let J="";const Re=Object.assign(Object.assign({},Bu),{width:v.toString(),height:D.toString(),top:S,left:U}),xe=(0,k.z$)().toLowerCase();p&&(J=zn(xe)?"_blank":p),sa(xe)&&(h=h||"http://localhost",Re.scrollbars="yes");const Xe=Object.entries(Re).reduce((Vt,[wn,$s])=>`${Vt}${wn}=${$s},`,"");if(function(m=(0,k.z$)()){var h;return xs(m)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(xe)&&"_self"!==J)return function(m,h){const p=document.createElement("a");p.href=m,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",J),new Rf(null);const et=window.open(h||"",J,Xe);Te(et,m,"popup-blocked");try{et.focus()}catch(Vt){}return new Rf(et)}(h,J,fo())})()}_openRedirect(h,p,v,D){var S=this;return(0,u.Z)(function*(){return yield S._originValidation(h),m=gs(h,p,v,at(),D),hn().location.href=m,new Promise(()=>{});var m})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:D,promise:S}=this.eventManagers[p];return D?Promise.resolve(D):(kn(S,"If manager is not set, promise should be"),S)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,u.Z)(function*(){const v=yield function(m){return Mf.apply(this,arguments)}(h),D=new Vu(h);return v.register("authEvent",S=>(Te(null==S?void 0:S.authEvent,h,"invalid-auth-event"),{status:D.onEvent(S.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:D},p.iframes[h._key()]=v,D})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(rl,{type:rl},D=>{var S;const U=null===(S=null==D?void 0:D[0])||void 0===S?void 0:S[rl];void 0!==U&&p(!!U),Ut(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(m){return Zs.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Sn()||Ss()||xs()}}),this.cordovaResolver=Bt(class{constructor(){this._redirectPersistence=Zn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qc}_initialize(h){var p=this;return(0,u.Z)(function*(){const v=h._key();let D=p.eventManagers.get(v);return D||(D=new Yn(h),p.eventManagers.set(v,D),p.attachCallbackListeners(h,D)),D})()}_openPopup(h){Ut(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,D){var S=this;return(0,u.Z)(function*(){!function(m){var h,p,v,D,S,U,J,Re,xe,Xe;const et=$a();Te("function"==typeof(null===(h=null==et?void 0:et.universalLinks)||void 0===h?void 0:h.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(void 0!==(null===(p=null==et?void 0:et.BuildInfo)||void 0===p?void 0:p.packageName),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(S=null===(D=null===(v=null==et?void 0:et.cordova)||void 0===v?void 0:v.plugins)||void 0===D?void 0:D.browsertab)||void 0===S?void 0:S.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Re=null===(J=null===(U=null==et?void 0:et.cordova)||void 0===U?void 0:U.plugins)||void 0===J?void 0:J.browsertab)||void 0===Re?void 0:Re.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Xe=null===(xe=null==et?void 0:et.cordova)||void 0===xe?void 0:xe.InAppBrowser)||void 0===Xe?void 0:Xe.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const U=yield S._initialize(h);yield U.initialized(),U.resetRedirect(),Hi.clear(),yield S._originValidation(h);const J=function(m,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:kf(),postBody:null,tenantId:m.tenantId,error:En(m,"no-auth-event")}}(h,v,D);yield function(m,h){return Nf()._set(Ff(m),h)}(h,J);const Re=yield function(m,h,p){return fd.apply(this,arguments)}(h,J,p),xe=yield function(m){const{cordova:h}=$a();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let D=null;v?h.plugins.browsertab.openUrl(m):D=h.InAppBrowser.open(m,function(m=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),p(D)})})}(Re);return function(m,h,p){return Pf.apply(this,arguments)}(h,U,xe)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(m){return Ha.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:D,BuildInfo:S}=$a(),U=setTimeout((0,u.Z)(function*(){yield _d(h),p.onEvent(ul())}),500),J=function(){var Xe=(0,u.Z)(function*(et){clearTimeout(U);const Vt=yield _d(h);let wn=null;Vt&&(null==et?void 0:et.url)&&(wn=function(m,h){var p,v;const D=function(m){const h=Hu(m),p=h.link?decodeURIComponent(h.link):void 0,v=Hu(p).link,D=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Hu(D).link||D||v||p||m}(h);if(D.includes("/__/auth/callback")){const S=Hu(D),U=S.firebaseError?function(m){try{return JSON.parse(m)}catch(h){return null}}(decodeURIComponent(S.firebaseError)):null,J=null===(v=null===(p=null==U?void 0:U.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Re=J?En(J):null;return Re?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Re,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:D,postBody:null}}return null}(Vt,et.url)),p.onEvent(wn||ul())});return function(Vt){return Xe.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,J);const Re=D,xe=`${S.packageName.toLowerCase()}://`;$a().handleOpenURL=function(){var Xe=(0,u.Z)(function*(et){if(et.toLowerCase().startsWith(xe)&&J({url:et}),"function"==typeof Re)try{Re(et)}catch(Vt){console.error(Vt)}});return function(et){return Xe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Zn,this._completeRedirectFn=Qc}_initialize(h){var p=this;return(0,u.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,D){var S=this;return(0,u.Z)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._openPopup(h,p,v,D)})()}_openRedirect(h,p,v,D){var S=this;return(0,u.Z)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._openRedirect(h,p,v,D)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return wd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,u.Z)(function*(){if(h.underlyingResolver)return;const p=yield function(){return Bf.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Zf(m){return m.unwrap()}function qs(m){return Gu(m)}function Gu(m){const{_tokenResponse:h}=m instanceof k.ZR?m.customData:m;if(!h)return null;if(!(m instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return b.credentialFromResult(m);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=io;break;case"facebook.com":v=Cu;break;case"github.com":v=so;break;case"twitter.com":v=Sr;break;default:const{oauthIdToken:D,oauthAccessToken:S,oauthTokenSecret:U,pendingToken:J,nonce:Re}=h;return S||U||D||J?J?p.startsWith("saml.")?as._create(p,J):or._fromParams({providerId:p,signInMethod:p,pendingToken:J,idToken:D,accessToken:S}):new Rn(p).credential({idToken:D,accessToken:S,rawNonce:Re}):null}return m instanceof k.ZR?v.credentialFromError(m):v.credentialFromResult(m)}function ui(m,h){return h.catch(p=>{throw p instanceof k.ZR&&function(m,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new bd(m,function(m,h){var p;const v=(0,k.m9)(m),D=h;return Te(h.customData.operationType,v,"argument-error"),Te(null===(p=D.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),cs._fromError(v,D)}(m,h));else if(v){const D=Gu(h),S=h;D&&(S.credential=D,S.tenantId=v.tenantId||void 0,S.email=v.email||void 0,S.phoneNumber=v.phoneNumber||void 0)}}(m,p),p}).then(p=>{const D=p.user;return{operationType:p.operationType,credential:qs(p),additionalUserInfo:Je(p),user:ms.getOrCreate(D)}})}function Ed(m,h){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,u.Z)(function*(m,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>ui(m,p.confirm(v))}}),Ya.apply(this,arguments)}class bd{constructor(h,p){this.resolver=p,this.auth=function(m){return m.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ui(Zf(this.auth),this.resolver.resolveSignIn(h))}}class ms{constructor(h){this._delegate=h,this.multiFactor=function(m){const h=(0,k.m9)(m);return xn.has(h)||xn.set(h,Uo._fromUser(h)),xn.get(h)}(h)}static getOrCreate(h){return ms.USER_MAP.has(h)||ms.USER_MAP.set(h,new ms(h)),ms.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,u.Z)(function*(){return ui(p.auth,_a(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,u.Z)(function*(){return Ed(v.auth,function(m,h,p){return Kn.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,u.Z)(function*(){return ui(p.auth,function(m,h,p){return cr.apply(this,arguments)}(p._delegate,h,Ka))})()}linkWithRedirect(h){var p=this;return(0,u.Z)(function*(){return yield Qg(Bn(p.auth)),function(m,h,p){return function(m,h,p){return ai.apply(this,arguments)}(m,h,p)}(p._delegate,h,Ka)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,u.Z)(function*(){return ui(p.auth,Wn(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Ed(this.auth,function(m,h,p){return Lu.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return ui(this.auth,function(m,h,p){return Or.apply(this,arguments)}(this._delegate,h,Ka))}reauthenticateWithRedirect(h){var p=this;return(0,u.Z)(function*(){return yield Qg(Bn(p.auth)),function(m,h,p){return function(m,h,p){return od.apply(this,arguments)}(m,h,p)}(p._delegate,h,Ka)})()}sendEmailVerification(h){return function(m,h){return Ls.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,u.Z)(function*(){return yield function(m,h){return be.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function(m,h){return lf((0,k.m9)(m),h,null)}(this._delegate,h)}updatePassword(h){return function(m,h){return lf((0,k.m9)(m),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function(m,h){return Kc.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function(m,h){return dn.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function(m,h,p){return Sa.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ms.USER_MAP=new WeakMap;const Qa=Te;let Id=(()=>{class m{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=p.options;Qa(D,"invalid-api-key",{appName:p.name});let S=[ii];if("undefined"!=typeof window){S=function(m,h){const p=zi();if(!(null==p?void 0:p.sessionStorage))return[];const v=Kr(jf,m,h);switch(p.sessionStorage.getItem(v)){case Ti.NONE:return[ii];case Ti.LOCAL:return[js,Zn];case Ti.SESSION:return[Zn];default:return[]}}(D,p.name);for(const J of[js,Oa,Zn])S.includes(J)||S.push(J)}Qa(D,"invalid-api-key",{appName:p.name});const U="undefined"!=typeof window?Ka:void 0;this._delegate=v.initialize({options:{persistence:S,popupRedirectResolver:U}}),this._delegate._updateErrorMap(Ir),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ms.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function(m,h,p){const v=Bn(m);Te(v._canInitEmulator,v,"emulator-config-failed"),Te(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const D=!!(null==p?void 0:p.disableWarnings),S=oi(h),{host:U,port:J}=function(m){const h=oi(m),p=/(\/\/)?([^?#/]+)/.exec(m.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(v);if(D){const S=D[1];return{host:S,port:Ag(v.substr(S.length+1))}}{const[S,U]=v.split(":");return{host:S,port:Ag(U)}}}(h);v.config.emulator={url:`${S}//${U}${null===J?"":`:${J}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:U,port:J,protocol:S.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function(){function m(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,p,v)}applyActionCode(p){return function(m,h){return Su.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return xu(this._delegate,p)}confirmPasswordReset(p,v){return function(m,h,p){return ba.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var D=this;return(0,u.Z)(function*(){return ui(D._delegate,function(m,h,p){return Ta.apply(this,arguments)}(D._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function(m,h){return cf.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function(m,h){const p=no.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,u.Z)(function*(){Qa(Vf(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function(m,h){return vo.apply(this,arguments)}(p._delegate,Ka);return v?ui(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function(m,h){Bn(m)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,D){const{next:S,error:U,complete:J}=$f(p,v,D);return this._delegate.onAuthStateChanged(S,U,J)}onIdTokenChanged(p,v,D){const{next:S,error:U,complete:J}=$f(p,v,D);return this._delegate.onIdTokenChanged(S,U,J)}sendSignInLinkToEmail(p,v){return function(m,h,p){return on.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function(m,h,p){return ko.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,u.Z)(function*(){let D;switch(function(m,h){ll(Object.values(Ti).includes(h),m,"invalid-persistence-type"),(0,k.b$)()?ll(h!==Ti.SESSION,m,"unsupported-persistence-type"):(0,k.UG)()?ll(h===Ti.NONE,m,"unsupported-persistence-type"):Uf()?ll(h===Ti.NONE||h===Ti.LOCAL&&(0,k.hl)(),m,"unsupported-persistence-type"):ll(h===Ti.NONE||Kg(),m,"unsupported-persistence-type")}(v._delegate,p),p){case Ti.SESSION:D=Zn;break;case Ti.LOCAL:D=(yield Bt(js)._isAvailable())?js:Oa;break;case Ti.NONE:D=ii;break;default:return Ut("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ui(this._delegate,function(m){return Po.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ui(this._delegate,Fc(this._delegate,p))}signInWithCustomToken(p){return ui(this._delegate,function(m,h){return va.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return ui(this._delegate,function(m,h,p){return Fc((0,k.m9)(m),ro.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return ui(this._delegate,function(m,h,p){return Aa.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return Ed(this._delegate,function(m,h,p){return $i.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,u.Z)(function*(){return Qa(Vf(),v._delegate,"operation-not-supported-in-this-environment"),ui(v._delegate,function(m,h,p){return Kt.apply(this,arguments)}(v._delegate,p,Ka))})()}signInWithRedirect(p){var v=this;return(0,u.Z)(function*(){return Qa(Vf(),v._delegate,"operation-not-supported-in-this-environment"),yield Qg(v._delegate),function(m,h,p){return function(m,h,p){return sd.apply(this,arguments)}(m,h,p)}(v._delegate,p,Ka)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function(m,h){return Da.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Ti,m})();function $f(m,h,p){let v=m;"function"!=typeof m&&({next:v,error:h,complete:p}=m);const D=v;return{next:U=>D(U&&ms.getOrCreate(U)),error:h,complete:p}}class Jg{constructor(){this.providerId="phone",this._delegate=new b(Zf(Y.Z.auth()))}static credential(h,p){return b.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Jg.PHONE_SIGN_IN_METHOD=b.PHONE_SIGN_IN_METHOD,Jg.PROVIDER_ID=b.PROVIDER_ID;const Ja=Te;class Hf{constructor(h,p,v=Y.Z.app()){var D;Ja(null===(D=v.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Cr(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(m){m.INTERNAL.registerComponent(new de.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Id(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ro,FacebookAuthProvider:Cu,GithubAuthProvider:so,GoogleAuthProvider:io,OAuthProvider:Rn,SAMLAuthProvider:oo,PhoneAuthProvider:Jg,PhoneMultiFactorGenerator:oy,RecaptchaVerifier:Hf,TwitterAuthProvider:Sr,Auth:Id,AuthCredential:Ro,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.2.4")}(Y.Z)},4995:function(ze,me){!function(P){"use strict";function u(se){return Array.prototype.slice.call(se)}function Y(se){return new Promise(function(W,oe){se.onsuccess=function(){W(se.result)},se.onerror=function(){oe(se.error)}})}function k(se,W,oe){var Ce,ge=new Promise(function(qe,Se){Y(Ce=se[W].apply(se,oe)).then(qe,Se)});return ge.request=Ce,ge}function ae(se,W,oe){var Ce=k(se,W,oe);return Ce.then(function(ge){if(ge)return new B(ge,Ce.request)})}function te(se,W,oe){oe.forEach(function(Ce){Object.defineProperty(se.prototype,Ce,{get:function(){return this[W][Ce]},set:function(ge){this[W][Ce]=ge}})})}function fe(se,W,oe,Ce){Ce.forEach(function(ge){ge in oe.prototype&&(se.prototype[ge]=function(){return k(this[W],ge,arguments)})})}function re(se,W,oe,Ce){Ce.forEach(function(ge){ge in oe.prototype&&(se.prototype[ge]=function(){return this[W][ge].apply(this[W],arguments)})})}function ne(se,W,oe,Ce){Ce.forEach(function(ge){ge in oe.prototype&&(se.prototype[ge]=function(){return ae(this[W],ge,arguments)})})}function ue(se){this._index=se}function B(se,W){this._cursor=se,this._request=W}function V(se){this._store=se}function Q(se){this._tx=se,this.complete=new Promise(function(W,oe){se.oncomplete=function(){W()},se.onerror=function(){oe(se.error)},se.onabort=function(){oe(se.error)}})}function Le(se,W,oe){this._db=se,this.oldVersion=W,this.transaction=new Q(oe)}function Ee(se){this._db=se}te(ue,"_index",["name","keyPath","multiEntry","unique"]),fe(ue,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ne(ue,"_index",IDBIndex,["openCursor","openKeyCursor"]),te(B,"_cursor",["direction","key","primaryKey","value"]),fe(B,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(se){se in IDBCursor.prototype&&(B.prototype[se]=function(){var W=this,oe=arguments;return Promise.resolve().then(function(){return W._cursor[se].apply(W._cursor,oe),Y(W._request).then(function(Ce){if(Ce)return new B(Ce,W._request)})})})}),V.prototype.createIndex=function(){return new ue(this._store.createIndex.apply(this._store,arguments))},V.prototype.index=function(){return new ue(this._store.index.apply(this._store,arguments))},te(V,"_store",["name","keyPath","indexNames","autoIncrement"]),fe(V,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ne(V,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),re(V,"_store",IDBObjectStore,["deleteIndex"]),Q.prototype.objectStore=function(){return new V(this._tx.objectStore.apply(this._tx,arguments))},te(Q,"_tx",["objectStoreNames","mode"]),re(Q,"_tx",IDBTransaction,["abort"]),Le.prototype.createObjectStore=function(){return new V(this._db.createObjectStore.apply(this._db,arguments))},te(Le,"_db",["name","version","objectStoreNames"]),re(Le,"_db",IDBDatabase,["deleteObjectStore","close"]),Ee.prototype.transaction=function(){return new Q(this._db.transaction.apply(this._db,arguments))},te(Ee,"_db",["name","version","objectStoreNames"]),re(Ee,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(se){[V,ue].forEach(function(W){se in W.prototype&&(W.prototype[se.replace("open","iterate")]=function(){var oe=u(arguments),Ce=oe[oe.length-1],ge=this._store||this._index,qe=ge[se].apply(ge,oe.slice(0,-1));qe.onsuccess=function(){Ce(qe.result)}})})}),[ue,V].forEach(function(se){se.prototype.getAll||(se.prototype.getAll=function(W,oe){var Ce=this,ge=[];return new Promise(function(qe){Ce.iterateCursor(W,function(Se){Se?(ge.push(Se.value),void 0===oe||ge.length!=oe?Se.continue():qe(ge)):qe(ge)})})})}),P.openDb=function(se,W,oe){var Ce=k(indexedDB,"open",[se,W]),ge=Ce.request;return ge&&(ge.onupgradeneeded=function(qe){oe&&oe(new Le(ge.result,qe.oldVersion,ge.transaction))}),Ce.then(function(qe){return new Ee(qe)})},P.deleteDb=function(se){return k(indexedDB,"deleteDatabase",[se])},Object.defineProperty(P,"__esModule",{value:!0})}(me)},8305:(ze,me,P)=>{"use strict";P.d(me,{y:()=>B});var u=P(3113),Y=P(7908),k=P(4816),ae=P(4623);var re=P(5367),ne=P(5044),ue=P(8706);let B=(()=>{class Ee{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const se=new Ee;return se.source=this,se.operator=Fe,se}subscribe(Fe,se,W){const oe=function(Ee){return Ee&&Ee instanceof u.Lv||function(Ee){return Ee&&(0,ne.m)(Ee.next)&&(0,ne.m)(Ee.error)&&(0,ne.m)(Ee.complete)}(Ee)&&(0,Y.Nn)(Ee)}(Fe)?Fe:new u.Hp(Fe,se,W);return(0,ue.x)(()=>{const{operator:Ce,source:ge}=this;oe.add(Ce?Ce.call(oe,ge):ge?this._subscribe(oe):this._trySubscribe(oe))}),oe}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(se){Fe.error(se)}}forEach(Fe,se){return new(se=V(se))((W,oe)=>{let Ce;Ce=this.subscribe(ge=>{try{Fe(ge)}catch(qe){oe(qe),null==Ce||Ce.unsubscribe()}},oe,W)})}_subscribe(Fe){var se;return null===(se=this.source)||void 0===se?void 0:se.subscribe(Fe)}[k.L](){return this}pipe(...Fe){return function(Ee){return 0===Ee.length?ae.y:1===Ee.length?Ee[0]:function(Fe){return Ee.reduce((se,W)=>W(se),Fe)}}(Fe)(this)}toPromise(Fe){return new(Fe=V(Fe))((se,W)=>{let oe;this.subscribe(Ce=>oe=Ce,Ce=>W(Ce),()=>se(oe))})}}return Ee.create=Ue=>new Ee(Ue),Ee})();function V(Ee){var Ue;return null!==(Ue=null!=Ee?Ee:re.v.Promise)&&void 0!==Ue?Ue:Promise}},273:(ze,me,P)=>{"use strict";P.d(me,{x:()=>re});var u=P(8305),Y=P(7908);const ae=(0,P(4893).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=P(3980),fe=P(8706);let re=(()=>{class ue extends u.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(V){const Q=new ne(this,this);return Q.operator=V,Q}_throwIfClosed(){if(this.closed)throw new ae}next(V){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const Q=this.observers.slice();for(const Le of Q)Le.next(V)}})}error(V){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=V;const{observers:Q}=this;for(;Q.length;)Q.shift().error(V)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:V}=this;for(;V.length;)V.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var V;return(null===(V=this.observers)||void 0===V?void 0:V.length)>0}_trySubscribe(V){return this._throwIfClosed(),super._trySubscribe(V)}_subscribe(V){return this._throwIfClosed(),this._checkFinalizedStatuses(V),this._innerSubscribe(V)}_innerSubscribe(V){const{hasError:Q,isStopped:Le,observers:Ee}=this;return Q||Le?Y.Lc:(Ee.push(V),new Y.w0(()=>(0,te.P)(Ee,V)))}_checkFinalizedStatuses(V){const{hasError:Q,thrownError:Le,isStopped:Ee}=this;Q?V.error(Le):Ee&&V.complete()}asObservable(){const V=new u.y;return V.source=this,V}}return ue.create=(B,V)=>new ne(B,V),ue})();class ne extends re{constructor(B,V){super(),this.destination=B,this.source=V}next(B){var V,Q;null===(Q=null===(V=this.destination)||void 0===V?void 0:V.next)||void 0===Q||Q.call(V,B)}error(B){var V,Q;null===(Q=null===(V=this.destination)||void 0===V?void 0:V.error)||void 0===Q||Q.call(V,B)}complete(){var B,V;null===(V=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===V||V.call(B)}_subscribe(B){var V,Q;return null!==(Q=null===(V=this.source)||void 0===V?void 0:V.subscribe(B))&&void 0!==Q?Q:Y.Lc}}},3113:(ze,me,P)=>{"use strict";P.d(me,{Hp:()=>Le,Lv:()=>Q});var u=P(5044),Y=P(7908),k=P(5367),ae=P(5160);function te(){}const fe=ue("C",void 0,void 0);function ue(W,oe,Ce){return{kind:W,value:oe,error:Ce}}var B=P(2496),V=P(8706);class Q extends Y.w0{constructor(oe){super(),this.isStopped=!1,oe?(this.destination=oe,(0,Y.Nn)(oe)&&oe.add(this)):this.destination=se}static create(oe,Ce,ge){return new Le(oe,Ce,ge)}next(oe){this.isStopped?Fe(ue("N",oe,void 0),this):this._next(oe)}error(oe){this.isStopped?Fe(ue("E",void 0,oe),this):(this.isStopped=!0,this._error(oe))}complete(){this.isStopped?Fe(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(oe){this.destination.next(oe)}_error(oe){try{this.destination.error(oe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Le extends Q{constructor(oe,Ce,ge){let qe;if(super(),(0,u.m)(oe))qe=oe;else if(oe){let Se;({next:qe,error:Ce,complete:ge}=oe),this&&k.v.useDeprecatedNextContext?(Se=Object.create(oe),Se.unsubscribe=()=>this.unsubscribe()):Se=oe,qe=null==qe?void 0:qe.bind(Se),Ce=null==Ce?void 0:Ce.bind(Se),ge=null==ge?void 0:ge.bind(Se)}this.destination={next:qe?Ee(qe):te,error:Ee(null!=Ce?Ce:Ue),complete:ge?Ee(ge):te}}}function Ee(W,oe){return(...Ce)=>{try{W(...Ce)}catch(ge){k.v.useDeprecatedSynchronousErrorHandling?(0,V.O)(ge):(0,ae.h)(ge)}}}function Ue(W){throw W}function Fe(W,oe){const{onStoppedNotification:Ce}=k.v;Ce&&B.z.setTimeout(()=>Ce(W,oe))}const se={closed:!0,next:te,error:Ue,complete:te}},7908:(ze,me,P)=>{"use strict";P.d(me,{Lc:()=>fe,w0:()=>te,Nn:()=>re});var u=P(5044);const k=(0,P(4893).d)(ue=>function(V){ue(this),this.message=V?`${V.length} errors occurred during unsubscription:\n${V.map((Q,Le)=>`${Le+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=V});var ae=P(3980);class te{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:V}=this;if(V)if(this._parentage=null,Array.isArray(V))for(const Ee of V)Ee.remove(this);else V.remove(this);const{initialTeardown:Q}=this;if((0,u.m)(Q))try{Q()}catch(Ee){B=Ee instanceof k?Ee.errors:[Ee]}const{_teardowns:Le}=this;if(Le){this._teardowns=null;for(const Ee of Le)try{ne(Ee)}catch(Ue){B=null!=B?B:[],Ue instanceof k?B=[...B,...Ue.errors]:B.push(Ue)}}if(B)throw new k(B)}}add(B){var V;if(B&&B!==this)if(this.closed)ne(B);else{if(B instanceof te){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._teardowns=null!==(V=this._teardowns)&&void 0!==V?V:[]).push(B)}}_hasParent(B){const{_parentage:V}=this;return V===B||Array.isArray(V)&&V.includes(B)}_addParent(B){const{_parentage:V}=this;this._parentage=Array.isArray(V)?(V.push(B),V):V?[V,B]:B}_removeParent(B){const{_parentage:V}=this;V===B?this._parentage=null:Array.isArray(V)&&(0,ae.P)(V,B)}remove(B){const{_teardowns:V}=this;V&&(0,ae.P)(V,B),B instanceof te&&B._removeParent(this)}}te.EMPTY=(()=>{const ue=new te;return ue.closed=!0,ue})();const fe=te.EMPTY;function re(ue){return ue instanceof te||ue&&"closed"in ue&&(0,u.m)(ue.remove)&&(0,u.m)(ue.add)&&(0,u.m)(ue.unsubscribe)}function ne(ue){(0,u.m)(ue)?ue():ue.unsubscribe()}},5367:(ze,me,P)=>{"use strict";P.d(me,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(ze,me,P)=>{"use strict";P.d(me,{E:()=>Y});const Y=new(P(8305).y)(te=>te.complete())},5947:(ze,me,P)=>{"use strict";P.d(me,{D:()=>qe});var u=P(9985),Y=P(4763),k=P(5222),fe=P(8305),ne=P(5497),ue=P(5044),B=P(8395);function Q(Se,$e){if(!Se)throw new Error("Iterable cannot be null");return new fe.y(He=>{(0,B.f)(He,$e,()=>{const ut=Se[Symbol.asyncIterator]();(0,B.f)(He,$e,()=>{ut.next().then(X=>{X.done?He.complete():He.next(X.value)})},0,!0)})})}var Le=P(1073),Ee=P(2442),Ue=P(1537),Fe=P(2317),se=P(9908),W=P(3754),oe=P(7751);function qe(Se,$e){return $e?function(Se,$e){if(null!=Se){if((0,Le.c)(Se))return function(Se,$e){return(0,u.Xf)(Se).pipe((0,k.R)($e),(0,Y.Q)($e))}(Se,$e);if((0,Ue.z)(Se))return function(Se,$e){return new fe.y(He=>{let ut=0;return $e.schedule(function(){ut===Se.length?He.complete():(He.next(Se[ut++]),He.closed||this.schedule())})})}(Se,$e);if((0,Ee.t)(Se))return function(Se,$e){return(0,u.Xf)(Se).pipe((0,k.R)($e),(0,Y.Q)($e))}(Se,$e);if((0,se.D)(Se))return Q(Se,$e);if((0,Fe.T)(Se))return function(Se,$e){return new fe.y(He=>{let ut;return(0,B.f)(He,$e,()=>{ut=Se[ne.h](),(0,B.f)(He,$e,()=>{let X,ce;try{({value:X,done:ce}=ut.next())}catch(_e){return void He.error(_e)}ce?He.complete():He.next(X)},0,!0)}),()=>(0,ue.m)(null==ut?void 0:ut.return)&&ut.return()})}(Se,$e);if((0,oe.L)(Se))return function(Se,$e){return Q((0,oe.Q)(Se),$e)}(Se,$e)}throw(0,W.z)(Se)}(Se,$e):(0,u.Xf)(Se)}},9985:(ze,me,P)=>{"use strict";P.d(me,{Xf:()=>Le});var u=P(9162),Y=P(1537),k=P(2442),ae=P(8305),te=P(1073),fe=P(9908),re=P(3754),ne=P(2317),ue=P(7751),B=P(5044),V=P(5160),Q=P(4816);function Le(ge){if(ge instanceof ae.y)return ge;if(null!=ge){if((0,te.c)(ge))return function(ge){return new ae.y(qe=>{const Se=ge[Q.L]();if((0,B.m)(Se.subscribe))return Se.subscribe(qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ge);if((0,Y.z)(ge))return function(ge){return new ae.y(qe=>{for(let Se=0;Se<ge.length&&!qe.closed;Se++)qe.next(ge[Se]);qe.complete()})}(ge);if((0,k.t)(ge))return function(ge){return new ae.y(qe=>{ge.then(Se=>{qe.closed||(qe.next(Se),qe.complete())},Se=>qe.error(Se)).then(null,V.h)})}(ge);if((0,fe.D)(ge))return W(ge);if((0,ne.T)(ge))return function(ge){return new ae.y(qe=>{for(const Se of ge)if(qe.next(Se),qe.closed)return;qe.complete()})}(ge);if((0,ue.L)(ge))return function(ge){return W((0,ue.Q)(ge))}(ge)}throw(0,re.z)(ge)}function W(ge){return new ae.y(qe=>{(function(ge,qe){var Se,$e,He,ut;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Se=(0,u.KL)(ge);!($e=yield Se.next()).done;)if(qe.next($e.value),qe.closed)return}catch(X){He={error:X}}finally{try{$e&&!$e.done&&(ut=Se.return)&&(yield ut.call(Se))}finally{if(He)throw He.error}}qe.complete()})})(ge,qe).catch(Se=>qe.error(Se))})}},3719:(ze,me,P)=>{"use strict";P.d(me,{T:()=>fe});var u=P(5373),Y=P(9985),k=P(5583),ae=P(8830),te=P(5947);function fe(...re){const ne=(0,ae.yG)(re),ue=(0,ae._6)(re,1/0),B=re;return B.length?1===B.length?(0,Y.Xf)(B[0]):(0,u.J)(ue)((0,te.D)(B,ne)):k.E}},8889:(ze,me,P)=>{"use strict";P.d(me,{Q:()=>Y});var u=P(3113);class Y extends u.Lv{constructor(ae,te,fe,re,ne){super(ae),this.onFinalize=ne,this._next=te?function(ue){try{te(ue)}catch(B){ae.error(B)}}:super._next,this._error=re?function(ue){try{re(ue)}catch(B){ae.error(B)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(ue){ae.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;const{closed:te}=this;super.unsubscribe(),!te&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}},4753:(ze,me,P)=>{"use strict";P.d(me,{U:()=>k});var u=P(9947),Y=P(8889);function k(ae,te){return(0,u.e)((fe,re)=>{let ne=0;fe.subscribe(new Y.Q(re,ue=>{re.next(ae.call(te,ue,ne++))}))})}},5373:(ze,me,P)=>{"use strict";P.d(me,{J:()=>k});var u=P(5724),Y=P(4623);function k(ae=1/0){return(0,u.z)(Y.y,ae)}},5724:(ze,me,P)=>{"use strict";P.d(me,{z:()=>ne});var u=P(4753),Y=P(9985),k=P(9947),te=(P(8395),P(8889)),re=P(5044);function ne(ue,B,V=1/0){return(0,re.m)(B)?ne((Q,Le)=>(0,u.U)((Ee,Ue)=>B(Q,Ee,Le,Ue))((0,Y.Xf)(ue(Q,Le))),V):("number"==typeof B&&(V=B),(0,k.e)((Q,Le)=>function(ue,B,V,Q,Le,Ee,Ue,Fe){const se=[];let W=0,oe=0,Ce=!1;const ge=()=>{Ce&&!se.length&&!W&&B.complete()},qe=$e=>W<Q?Se($e):se.push($e),Se=$e=>{W++;let He=!1;(0,Y.Xf)(V($e,oe++)).subscribe(new te.Q(B,ut=>{B.next(ut)},()=>{He=!0},void 0,()=>{if(He)try{for(W--;se.length&&W<Q;){const ut=se.shift();Se(ut)}ge()}catch(ut){B.error(ut)}}))};return ue.subscribe(new te.Q(B,qe,()=>{Ce=!0,ge()})),()=>{}}(Q,Le,ue,V)))}},4763:(ze,me,P)=>{"use strict";P.d(me,{Q:()=>ae});var u=P(8395),Y=P(9947),k=P(8889);function ae(te,fe=0){return(0,Y.e)((re,ne)=>{re.subscribe(new k.Q(ne,ue=>(0,u.f)(ne,te,()=>ne.next(ue),fe),()=>(0,u.f)(ne,te,()=>ne.complete(),fe),ue=>(0,u.f)(ne,te,()=>ne.error(ue),fe)))})}},3174:(ze,me,P)=>{"use strict";P.d(me,{B:()=>fe});var u=P(5947),Y=P(9468),k=P(273),ae=P(3113),te=P(9947);function fe(ne={}){const{connector:ue=(()=>new k.x),resetOnError:B=!0,resetOnComplete:V=!0,resetOnRefCountZero:Q=!0}=ne;return Le=>{let Ee=null,Ue=null,Fe=null,se=0,W=!1,oe=!1;const Ce=()=>{null==Ue||Ue.unsubscribe(),Ue=null},ge=()=>{Ce(),Ee=Fe=null,W=oe=!1},qe=()=>{const Se=Ee;ge(),null==Se||Se.unsubscribe()};return(0,te.e)((Se,$e)=>{se++,!oe&&!W&&Ce();const He=Fe=null!=Fe?Fe:ue();$e.add(()=>{se--,0===se&&!oe&&!W&&(Ue=re(qe,Q))}),He.subscribe($e),Ee||(Ee=new ae.Hp({next:ut=>He.next(ut),error:ut=>{oe=!0,Ce(),Ue=re(ge,B,ut),He.error(ut)},complete:()=>{W=!0,Ce(),Ue=re(ge,V),He.complete()}}),(0,u.D)(Se).subscribe(Ee))})(Le)}}function re(ne,ue,...B){return!0===ue?(ne(),null):!1===ue?null:ue(...B).pipe((0,Y.q)(1)).subscribe(()=>ne())}},5222:(ze,me,P)=>{"use strict";P.d(me,{R:()=>Y});var u=P(9947);function Y(k,ae=0){return(0,u.e)((te,fe)=>{fe.add(k.schedule(()=>te.subscribe(fe),ae))})}},9468:(ze,me,P)=>{"use strict";P.d(me,{q:()=>ae});var u=P(5583),Y=P(9947),k=P(8889);function ae(te){return te<=0?()=>u.E:(0,Y.e)((fe,re)=>{let ne=0;fe.subscribe(new k.Q(re,ue=>{++ne<=te&&(re.next(ue),te<=ne&&re.complete())}))})}},7384:(ze,me,P)=>{"use strict";P.d(me,{b:()=>te});var u=P(5044),Y=P(9947),k=P(8889),ae=P(4623);function te(fe,re,ne){const ue=(0,u.m)(fe)||re||ne?{next:fe,error:re,complete:ne}:fe;return ue?(0,Y.e)((B,V)=>{var Q;null===(Q=ue.subscribe)||void 0===Q||Q.call(ue);let Le=!0;B.subscribe(new k.Q(V,Ee=>{var Ue;null===(Ue=ue.next)||void 0===Ue||Ue.call(ue,Ee),V.next(Ee)},()=>{var Ee;Le=!1,null===(Ee=ue.complete)||void 0===Ee||Ee.call(ue),V.complete()},Ee=>{var Ue;Le=!1,null===(Ue=ue.error)||void 0===Ue||Ue.call(ue,Ee),V.error(Ee)},()=>{var Ee,Ue;Le&&(null===(Ee=ue.unsubscribe)||void 0===Ee||Ee.call(ue)),null===(Ue=ue.finalize)||void 0===Ue||Ue.call(ue)}))}):ae.y}},2869:(ze,me,P)=>{"use strict";P.d(me,{o:()=>te});var u=P(7908);class Y extends u.w0{constructor(re,ne){super()}schedule(re,ne=0){return this}}const k={setInterval(...fe){const{delegate:re}=k;return((null==re?void 0:re.setInterval)||setInterval)(...fe)},clearInterval(fe){const{delegate:re}=k;return((null==re?void 0:re.clearInterval)||clearInterval)(fe)},delegate:void 0};var ae=P(3980);class te extends Y{constructor(re,ne){super(re,ne),this.scheduler=re,this.work=ne,this.pending=!1}schedule(re,ne=0){if(this.closed)return this;this.state=re;const ue=this.id,B=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(B,ue,ne)),this.pending=!0,this.delay=ne,this.id=this.id||this.requestAsyncId(B,this.id,ne),this}requestAsyncId(re,ne,ue=0){return k.setInterval(re.flush.bind(re,this),ue)}recycleAsyncId(re,ne,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return ne;k.clearInterval(ne)}execute(re,ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(re,ne);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,ne){let B,ue=!1;try{this.work(re)}catch(V){ue=!0,B=V||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:re,scheduler:ne}=this,{actions:ue}=ne;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ue,this),null!=re&&(this.id=this.recycleAsyncId(ne,re,null)),this.delay=null,super.unsubscribe()}}}},8843:(ze,me,P)=>{"use strict";P.d(me,{v:()=>k});var u=P(1733);class Y{constructor(te,fe=Y.now){this.schedulerActionCtor=te,this.now=fe}schedule(te,fe=0,re){return new this.schedulerActionCtor(this,te).schedule(re,fe)}}Y.now=u.l.now;class k extends Y{constructor(te,fe=Y.now){super(te,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(te){const{actions:fe}=this;if(this._active)return void fe.push(te);let re;this._active=!0;do{if(re=te.execute(te.state,te.delay))break}while(te=fe.shift());if(this._active=!1,re){for(;te=fe.shift();)te.unsubscribe();throw re}}}},2210:(ze,me,P)=>{"use strict";P.d(me,{z:()=>k});var u=P(2869);const k=new(P(8843).v)(u.o)},1733:(ze,me,P)=>{"use strict";P.d(me,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},2496:(ze,me,P)=>{"use strict";P.d(me,{z:()=>u});const u={setTimeout(...Y){const{delegate:k}=u;return((null==k?void 0:k.setTimeout)||setTimeout)(...Y)},clearTimeout(Y){const{delegate:k}=u;return((null==k?void 0:k.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},5497:(ze,me,P)=>{"use strict";P.d(me,{h:()=>Y});const Y="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(ze,me,P)=>{"use strict";P.d(me,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},8830:(ze,me,P)=>{"use strict";P.d(me,{_6:()=>fe,jO:()=>ae,yG:()=>te});var u=P(5044);function k(re){return re[re.length-1]}function ae(re){return(0,u.m)(k(re))?re.pop():void 0}function te(re){return function(re){return re&&(0,u.m)(re.schedule)}(k(re))?re.pop():void 0}function fe(re,ne){return"number"==typeof k(re)?re.pop():ne}},3980:(ze,me,P)=>{"use strict";function u(Y,k){if(Y){const ae=Y.indexOf(k);0<=ae&&Y.splice(ae,1)}}P.d(me,{P:()=>u})},4893:(ze,me,P)=>{"use strict";function u(Y){const ae=Y(te=>{Error.call(te),te.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}P.d(me,{d:()=>u})},8706:(ze,me,P)=>{"use strict";P.d(me,{x:()=>k,O:()=>ae});var u=P(5367);let Y=null;function k(te){if(u.v.useDeprecatedSynchronousErrorHandling){const fe=!Y;if(fe&&(Y={errorThrown:!1,error:null}),te(),fe){const{errorThrown:re,error:ne}=Y;if(Y=null,re)throw ne}}else te()}function ae(te){u.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=te)}},8395:(ze,me,P)=>{"use strict";function u(Y,k,ae,te=0,fe=!1){const re=k.schedule(function(){ae(),fe?Y.add(this.schedule(null,te)):this.unsubscribe()},te);if(Y.add(re),!fe)return re}P.d(me,{f:()=>u})},4623:(ze,me,P)=>{"use strict";function u(Y){return Y}P.d(me,{y:()=>u})},1537:(ze,me,P)=>{"use strict";P.d(me,{z:()=>u});const u=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},9908:(ze,me,P)=>{"use strict";P.d(me,{D:()=>Y});var u=P(5044);function Y(k){return Symbol.asyncIterator&&(0,u.m)(null==k?void 0:k[Symbol.asyncIterator])}},5044:(ze,me,P)=>{"use strict";function u(Y){return"function"==typeof Y}P.d(me,{m:()=>u})},1073:(ze,me,P)=>{"use strict";P.d(me,{c:()=>k});var u=P(4816),Y=P(5044);function k(ae){return(0,Y.m)(ae[u.L])}},2317:(ze,me,P)=>{"use strict";P.d(me,{T:()=>k});var u=P(5497),Y=P(5044);function k(ae){return(0,Y.m)(null==ae?void 0:ae[u.h])}},2442:(ze,me,P)=>{"use strict";P.d(me,{t:()=>Y});var u=P(5044);function Y(k){return(0,u.m)(null==k?void 0:k.then)}},7751:(ze,me,P)=>{"use strict";P.d(me,{Q:()=>k,L:()=>ae});var u=P(9162),Y=P(5044);function k(te){return(0,u.FC)(this,arguments,function*(){const re=te.getReader();try{for(;;){const{value:ne,done:ue}=yield(0,u.qq)(re.read());if(ue)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(ne)}}finally{re.releaseLock()}})}function ae(te){return(0,Y.m)(null==te?void 0:te.getReader)}},9947:(ze,me,P)=>{"use strict";P.d(me,{A:()=>Y,e:()=>k});var u=P(5044);function Y(ae){return(0,u.m)(null==ae?void 0:ae.lift)}function k(ae){return te=>{if(Y(te))return te.lift(function(fe){try{return ae(fe,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},5160:(ze,me,P)=>{"use strict";P.d(me,{h:()=>k});var u=P(5367),Y=P(2496);function k(ae){Y.z.setTimeout(()=>{const{onUnhandledError:te}=u.v;if(!te)throw ae;te(ae)})}},3754:(ze,me,P)=>{"use strict";function u(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(me,{z:()=>u})},9917:(ze,me,P)=>{"use strict";var u=P(3668);let Y=null;function k(){return Y}const re=new u.OlP("DocumentToken");let ne=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.LFG)(V)},providedIn:"platform"}),n})();const B=new u.OlP("Location Initialized");let V=(()=>{class n extends ne{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Q()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Q()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:function(){return new V((0,u.LFG)(re))},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Ee(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ue(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Fe(n){return n&&"?"!==n[0]?"?"+n:n}let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function(n){const e=(0,u.LFG)(re).location;return new Ce((0,u.LFG)(ne),e&&e.origin||"")}()},providedIn:"root"}),n})();const oe=new u.OlP("appBaseHref");let Ce=(()=>{class n extends se{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ee(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Fe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,c){const f=this.prepareExternalUrl(o+Fe(c));this._platformLocation.pushState(t,r,f)}replaceState(t,r,o,c){const f=this.prepareExternalUrl(o+Fe(c));this._platformLocation.replaceState(t,r,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null==(o=(r=this._platformLocation).historyGo)||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne),u.LFG(oe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ge=(()=>{class n extends se{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ee(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,c){let f=this.prepareExternalUrl(o+Fe(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(t,r,f)}replaceState(t,r,o,c){let f=this.prepareExternalUrl(o+Fe(c));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null==(o=(r=this._platformLocation).historyGo)||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ne),u.LFG(oe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),qe=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ue(He(o)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fe(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,He(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null==(o=(r=this._platformStrategy).historyGo)||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Fe,n.joinWithSlash=Ee,n.stripTrailingSlash=Ue,n.\u0275fac=function(t){return new(t||n)(u.LFG(se),u.LFG(ne))},n.\u0275prov=u.Yz7({token:n,factory:function(){return new qe((0,u.LFG)(se),(0,u.LFG)(ne))},providedIn:"root"}),n})();function He(n){return n.replace(/\/index.html$/,"")}var ce=(()=>((ce=ce||{})[ce.Zero=0]="Zero",ce[ce.One=1]="One",ce[ce.Two=2]="Two",ce[ce.Few=3]="Few",ce[ce.Many=4]="Many",ce[ce.Other=5]="Other",ce))();const ki=u.kL8;class Kr{}let Yt=(()=>{class n extends Kr{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(ki(r||this.locale)(t)){case ce.Zero:return"zero";case ce.One:return"one";case ce.Two:return"two";case ce.Few:return"few";case ce.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.soG))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),zn=(()=>{class n{constructor(t,r,o,c){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class oa{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Tr=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((o,c,f)=>{if(null==o.previousIndex){const _=this._viewContainer.createEmbeddedView(this._template,new oa(null,this._ngForOf,-1,-1),null===f?void 0:f),C=new aa(o,_);r.push(C)}else if(null==f)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const _=this._viewContainer.get(c);this._viewContainer.move(_,f);const C=new aa(o,_);r.push(C)}});for(let o=0;o<r.length;o++)this._perViewChange(r[o].view,r[o].record);for(let o=0,c=this._viewContainer.length;o<c;o++){const f=this._viewContainer.get(o);f.context.index=o,f.context.count=c,f.context.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class aa{constructor(e,t){this.record=e,this.view=t}}let sr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new _u,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ms("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ms("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class _u{constructor(){this.$implicit=null,this.ngIf=null}}function Ms(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}function Ci(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,u.AaK)(n)}'`)}const ua=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let eo=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw Ci(n,t);return t.replace(ua,r=>r[0].toUpperCase()+r.substr(1).toLowerCase())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"titlecase",type:n,pure:!0}),n})(),yu=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw Ci(n,t);return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"uppercase",type:n,pure:!0}),n})(),Pc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[{provide:Kr,useClass:Yt}]}),n})();function yr(n){return"server"===n}let sf=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new da((0,u.LFG)(re),window)}),n})();class da{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const c=o.shadowRoot;if(c){const f=c.getElementById(e)||c.querySelector(`[name="${e}"]`);if(f)return f}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(r-c[0],o-c[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=to(this.window.history)||to(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function to(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ro extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ro,Y||(Y=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Ar=Ar||document.querySelector("base"),Ar?Ar.getAttribute("href"):null);return null==t?null:function(n){Rn=Rn||document.createElement("a"),Rn.setAttribute("href",n);const e=Rn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ar=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,c]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let Rn,Ar=null;const io=new u.OlP("TRANSITION_ID"),zt=[{provide:u.ip1,useFactory:function(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=k(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<o.length;c++)r.remove(o[c])})}},deps:[io,re,u.zs3],multi:!0}];class as{static init(){(0,u.VLi)(new as)}addToWindow(e){u.dqk.getAngularTestability=(r,o=!0)=>{const c=e.findTestabilityInTree(r,o);if(null==c)throw new Error("Could not find testability for element.");return c},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const o=u.dqk.getAllAngularTestabilities();let c=o.length,f=!1;const _=function(C){f=f||C,c--,0==c&&r(f)};o.forEach(function(C){C.whenStable(_)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ha=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const oo=new u.OlP("EventManagerPlugins");let Sr=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let c=0;c<o.length;c++){const f=o[c];if(f.supports(t))return this._eventNameToPlugin.set(t,f),f}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(oo),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class fa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=k().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Ps=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Qe=(()=>{class n extends Ps{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(c=>{const f=this._doc.createElement("style");f.textContent=c,o.push(r.appendChild(f))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Eu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Eu))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Eu(n){k().remove(n)}const pa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Po=/%COMP%/g;function us(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?us(n,o,t):(o=o.replace(Po,n),t.push(o))}return t}function pn(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ks=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new ar(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Fc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case u.ifc.ShadowDom:return new Lc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=us(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Sr),u.LFG(Qe),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class ar{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pa[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const c=pa[o];c?e.setAttributeNS(c,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=pa[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,o&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,pn(r)):this.eventManager.addEventListener(e,t,pn(r))}}class Fc extends ar{constructor(e,t,r,o){super(e),this.component=r;const c=us(o+"-"+r.id,r.styles,[]);t.addStyles(c),this.contentAttr="_ngcontent-%COMP%".replace(Po,o+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Po,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Lc extends ar{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=us(o.id,o.styles,[]);for(let f=0;f<c.length;f++){const _=document.createElement("style");_.textContent=c[f],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let _a=(()=>{class n extends fa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const uo=["alt","control","meta","shift"],bi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ya={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ns={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ui=(()=>{class n extends fa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const c=n.parseEventName(r),f=n.eventCallback(c.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,c.domEventName,f))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const c=n._normalizeKey(r.pop());let f="";if(uo.forEach(C=>{const T=r.indexOf(C);T>-1&&(r.splice(T,1),f+=C+".")}),f+=c,0!=r.length||0===c.length)return null;const _={};return _.domEventName=o,_.fullKey=f,_}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ya.hasOwnProperty(e)&&(e=ya[e]))}return bi[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),uo.forEach(c=>{c!=o&&Ns[c](t)&&(r+=c+".")}),r+=o,r}static eventCallback(t,r,o){return c=>{n.getEventFullKey(c)===t&&o.runGuarded(()=>r(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(re))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ko=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function(){ro.makeCurrent(),as.init()},multi:!0},{provide:re,useFactory:function(){return(0,u.RDi)(document),document},deps:[]}]),Au=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function(){return new u.qLn},deps:[]},{provide:oo,useClass:_a,multi:!0,deps:[re,u.R0b,u.Lbi]},{provide:oo,useClass:Ui,multi:!0,deps:[re]},{provide:ks,useClass:ks,deps:[Sr,Qe,u.AFp]},{provide:u.FYo,useExisting:ks},{provide:Ps,useExisting:Qe},{provide:Qe,useClass:Qe,deps:[re]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:Sr,useClass:Sr,deps:[oo,u.R0b]},{provide:class{},useClass:ha,deps:[]}];let ba=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:io,useExisting:u.AFp},zt]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:Au,imports:[Pc,u.hGG]}),n})();"undefined"!=typeof window&&window;var Wt=P(5947),co=P(8830);function Je(...n){const e=(0,co.yG)(n);return(0,Wt.D)(n,e)}var Vi=P(273);class jn extends Vi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Yr=P(8305);const{isArray:Fo}=Array,{getPrototypeOf:Fg,prototype:Ra,keys:Ou}=Object;function lo(n){if(1===n.length){const e=n[0];if(Fo(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&Fg(n)===Ra}(e)){const t=Ou(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var cs=P(4623),it=P(4753);const{isArray:df}=Array;function Lo(n){return(0,it.U)(e=>function(n,e){return df(e)?n(...e):n(e)}(n,e))}function Uo(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var xn=P(8889),Pu=P(8395);function Ii(n,e,t){n?(0,Pu.f)(t,n,e):e()}const Vo=(0,P(4893).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ho=P(5373);function qc(...n){return(0,ho.J)(1)((0,Wt.D)(n,(0,co.yG)(n)))}var Zn=P(9985);function Vs(n){return new Yr.y(e=>{(0,Zn.Xf)(n()).subscribe(e)})}var Pa=P(5583),fo=P(7908),vr=P(9947);function hn(){return(0,vr.e)((n,e)=>{let t=null;n._refCount++;const r=new xn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,c=t;t=null,o&&(!c||o===c)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ku extends Yr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,vr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fo.w0;const t=this.getSubject();e.add(this.source.subscribe(new xn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fo.w0.EMPTY)}return e}refCount(){return hn()(this)}}function mn(n,e){return(0,vr.e)((t,r)=>{let o=null,c=0,f=!1;const _=()=>f&&!o&&r.complete();t.subscribe(new xn.Q(r,C=>{null==o||o.unsubscribe();let T=0;const R=c++;(0,Zn.Xf)(n(C,R)).subscribe(o=new xn.Q(r,O=>r.next(e?e(C,O,R,T++):O),()=>{o=null,_()}))},()=>{f=!0,_()}))})}var po=P(9468);function Di(...n){const e=(0,co.yG)(n);return(0,vr.e)((t,r)=>{(e?qc(n,t,e):qc(n,t)).subscribe(r)})}function Bs(n,e,t,r,o){return(c,f)=>{let _=t,C=e,T=0;c.subscribe(new xn.Q(f,R=>{const O=T++;C=_?n(C,R,O):(_=!0,R),r&&f.next(C)},o&&(()=>{_&&f.next(C),f.complete()})))}}function Bi(n,e){return(0,vr.e)(Bs(n,e,arguments.length>=2,!0))}function ur(n,e){return(0,vr.e)((t,r)=>{let o=0;t.subscribe(new xn.Q(r,c=>n.call(e,c,o++)&&r.next(c)))})}function ji(n){return(0,vr.e)((e,t)=>{let c,r=null,o=!1;r=e.subscribe(new xn.Q(t,void 0,void 0,f=>{c=(0,Zn.Xf)(n(f,ji(n)(e))),r?(r.unsubscribe(),r=null,c.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,c.subscribe(t))})}var an=P(5724),ff=P(5044);function ds(n,e){return(0,ff.m)(e)?(0,an.z)(n,e,1):(0,an.z)(n,1)}function tn(n){return n<=0?()=>Pa.E:(0,vr.e)((e,t)=>{let r=[];e.subscribe(new xn.Q(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Nu(n=pf){return(0,vr.e)((e,t)=>{let r=!1;e.subscribe(new xn.Q(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function pf(){return new Vo}function gf(n){return(0,vr.e)((e,t)=>{let r=!1;e.subscribe(new xn.Q(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function ka(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ur((o,c)=>n(o,c,r)):cs.y,(0,po.q)(1),t?gf(e):Nu(()=>new Vo))}var xr=P(7384);class Mr{constructor(e,t){this.id=e,this.url=t}}class nd extends Mr{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class In extends Mr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class js extends Mr{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Na extends Mr{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lg extends Mr{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _f extends Mr{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qr extends Mr{constructor(e,t,r,o,c){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Zi extends Mr{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $c extends Mr{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class go{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bo{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rd{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fa{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hc{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yf{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gc{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ct="primary";class wr{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qi(n){return new wr(n)}const jo="ngNavigationCancelingError";function vf(n){const e=Error("NavigationCancelingError: "+n);return e[jo]=!0,e}function id(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let c=0;c<r.length;c++){const f=r[c],_=n[c];if(f.startsWith(":"))o[f.substring(1)]=_;else if(f!==_.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Cr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let c=0;c<t.length;c++)if(o=t[c],!zc(n[o],e[o]))return!1;return!0}function zc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,c)=>r[c]===o)}return n===e}function Fu(n){return Array.prototype.concat.apply([],n)}function Wc(n){return n.length>0?n[n.length-1]:null}function On(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Kn(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,Wt.D)(Promise.resolve(n)):Je(n)}const Lu={exact:function Kc(n,e,t){if(!je(n.segments,e.segments)||!F(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Kc(n.children[r],e.children[r],t))return!1;return!0},subset:I},hs={exact:function(n,e){return Cr(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>zc(n[t],e[t]))},ignored:()=>!0};function Uu(n,e,t){return Lu[t.paths](n.root,e.root,t.matrixParams)&&hs[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function I(n,e,t){return M(n,e,e.segments,t)}function M(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!je(o,t)||e.hasChildren()||!F(o,t,r))}if(n.segments.length===t.length){if(!je(n.segments,t)||!F(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!I(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),c=t.slice(n.segments.length);return!!(je(n.segments,o)&&F(n.segments,o,r)&&n.children[Ct])&&M(n.children[Ct],e,c,r)}}function F(n,e,t){return e.every((r,o)=>hs[t](n[o].parameters,r.parameters))}class G{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qi(this.queryParams)),this._queryParamMap}toString(){return Or.serialize(this)}}class H{constructor(e,t){this.segments=e,this.children=t,this.parent=null,On(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _n(this)}}class Ie{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qi(this.parameters)),this._parameterMap}toString(){return Yc(this)}}function je(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Kt{}class Rr{parse(e){const t=new pw(e);return new G(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${cr(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Jr(t)}=${Jr(o)}`).join("&"):`${Jr(t)}=${Jr(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Or=new Rr;function _n(n){return n.segments.map(e=>Yc(e)).join("/")}function cr(n,e){if(!n.hasChildren())return _n(n);if(e){const t=n.children[Ct]?cr(n.children[Ct],!1):"",r=[];return On(n.children,(o,c)=>{c!==Ct&&r.push(`${c}:${cr(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return On(n.children,(r,o)=>{o===Ct&&(t=t.concat(e(r,o)))}),On(n.children,(r,o)=>{o!==Ct&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ct?[cr(n.children[Ct],!1)]:[`${o}:${cr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ct]?`${_n(n)}/${t[0]}`:`${_n(n)}/(${t.join("//")})`}}function mo(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jr(n){return mo(n).replace(/%3B/gi,";")}function fs(n){return mo(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _o(n){return decodeURIComponent(n)}function Ua(n){return _o(n.replace(/\+/g,"%20"))}function Yc(n){return`${fs(n.path)}${function(n){return Object.keys(n).map(e=>`;${fs(e)}=${fs(n[e])}`).join("")}(n.parameters)}`}const Va=/^[^\/()?;=#]+/;function yo(n){const e=n.match(Va);return e?e[0]:""}const Q_=/^[^=?&#]+/,sd=/^[^&#]+/;class pw{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new H([],{}):new H([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ct]=new H(e,t)),r}parseSegment(){const e=yo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ie(_o(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=yo(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=yo(this.remaining);o&&(r=o,this.capture(r))}e[_o(t)]=_o(r)}parseQueryParam(e){const t=function(n){const e=n.match(Q_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const f=function(n){const e=n.match(sd);return e?e[0]:""}(this.remaining);f&&(r=f,this.capture(r))}const o=Ua(t),c=Ua(r);if(e.hasOwnProperty(o)){let f=e[o];Array.isArray(f)||(f=[f],e[o]=f),f.push(c)}else e[o]=c}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=yo(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let c;r.indexOf(":")>-1?(c=r.substr(0,r.indexOf(":")),this.capture(c),this.capture(":")):e&&(c=Ct);const f=this.parseChildren();t[c]=1===Object.keys(f).length?f[Ct]:new H([],f),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class od{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=If(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=If(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Df(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Df(e,this._root).map(t=>t.value)}}function If(n,e){if(n===e.value)return e;for(const t of e.children){const r=If(n,t);if(r)return r}return null}function Df(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Df(n,t);if(r.length)return r.unshift(e),r}return[]}class ai{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Zo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class vo extends od{constructor(e,t){super(e),this.snapshot=t,Jc(this,e)}toString(){return this.snapshot.toString()}}function Qc(n,e){const t=function(n,e){const f=new Vu([],{},{},"",{},Ct,e,null,n.root,-1,{});return new ad("",new ai(f,[]))}(n,e),r=new jn([new Ie("",{})]),o=new jn({}),c=new jn({}),f=new jn({}),_=new jn(""),C=new Ba(r,o,f,_,c,Ct,e,t.root);return C.snapshot=t.root,new vo(new ai(C,[]),t)}class Ba{constructor(e,t,r,o,c,f,_,C){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=f,this.component=_,this._futureSnapshot=C}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(e=>qi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(e=>qi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ja(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],c=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(c.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:_t(_t({},e.params),t.params),data:_t(_t({},e.data),t.data),resolve:_t(_t({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Vu{constructor(e,t,r,o,c,f,_,C,T,R,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=c,this.outlet=f,this.component=_,this.routeConfig=C,this._urlSegment=T,this._lastPathIndex=R,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ad extends od{constructor(e,t){super(t),this.url=e,Jc(this,t)}toString(){return Sf(this._root)}}function Jc(n,e){e.value._routerState=n,e.children.forEach(t=>Jc(n,t))}function Sf(n){const e=n.children.length>0?` { ${n.children.map(Sf).join(", ")} } `:"";return`${n.value}${e}`}function ud(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Cr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Cr(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Cr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Cr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Xc(n,e){const t=Cr(n.params,e.params)&&function(n,e){return je(n,e)&&n.every((t,r)=>Cr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Xc(n.parent,e.parent))}function el(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return el(n,r,o);return el(n,r)})}(n,e,t);return new ai(r,o)}{if(n.shouldAttach(e.value)){const c=n.retrieve(e.value);if(null!==c){const f=c.route;return f.value._futureSnapshot=e.value,f.children=e.children.map(_=>el(n,_)),f}}const r=function(n){return new Ba(new jn(n.url),new jn(n.params),new jn(n.queryParams),new jn(n.fragment),new jn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(c=>el(n,c));return new ai(r,o)}}function cd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function nl(n){return"object"==typeof n&&null!=n&&n.outlets}function Ug(n,e,t,r,o){let c={};return r&&On(r,(f,_)=>{c[_]=Array.isArray(f)?f.map(C=>`${C}`):`${f}`}),new G(t.root===n?e:ld(t.root,n,e),c,o)}function ld(n,e,t){const r={};return On(n.children,(o,c)=>{r[c]=o===e?t:ld(o,e,t)}),new H(n.segments,r)}class ty{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&cd(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(nl);if(o&&o!==Wc(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class dd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Vg(n,e,t){if(n||(n=new H([],{})),0===n.segments.length&&n.hasChildren())return xf(n,e,t);const r=function(n,e,t){let r=0,o=e;const c={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return c;const f=n.segments[o],_=t[r];if(nl(_))break;const C=`${_}`,T=r<t.length-1?t[r+1]:null;if(o>0&&void 0===C)break;if(C&&T&&"object"==typeof T&&void 0===T.outlets){if(!ju(C,T,f))return c;r+=2}else{if(!ju(C,{},f))return c;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const c=new H(n.segments.slice(0,r.pathIndex),{});return c.children[Ct]=new H(n.segments.slice(r.pathIndex),n.children),xf(c,0,o)}return r.match&&0===o.length?new H(n.segments,{}):r.match&&!n.hasChildren()?Bu(n,e,t):r.match?xf(n,0,o):Bu(n,e,t)}function xf(n,e,t){if(0===t.length)return new H(n.segments,{});{const r=function(n){return nl(n[0])?n[0].outlets:{[Ct]:n}}(t),o={};return On(r,(c,f)=>{"string"==typeof c&&(c=[c]),null!==c&&(o[f]=Vg(n.children[f],e,c))}),On(n.children,(c,f)=>{void 0===r[f]&&(o[f]=c)}),new H(n.segments,o)}}function Bu(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const c=t[o];if(nl(c)){const C=Bg(c.outlets);return new H(r,C)}if(0===o&&cd(t[0])){r.push(new Ie(n.segments[e].path,ps(t[0]))),o++;continue}const f=nl(c)?c.outlets[Ct]:`${c}`,_=o<t.length-1?t[o+1]:null;f&&_&&cd(_)?(r.push(new Ie(f,ps(_))),o+=2):(r.push(new Ie(f,{})),o++)}return new H(r,{})}function Bg(n){const e={};return On(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Bu(new H([],{}),0,t))}),e}function ps(n){const e={};return On(n,(t,r)=>e[r]=`${t}`),e}function ju(n,e,t){return n==t.path&&Cr(e,t.parameters)}class Rf{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ud(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Zo(t);e.children.forEach(c=>{const f=c.value.outlet;this.deactivateRoutes(c,o[f],r),delete o[f]}),On(o,(c,f)=>{this.deactivateRouteAndItsChildren(c,r)})}deactivateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(o===c)if(o.component){const f=r.getContext(o.outlet);f&&this.deactivateChildRoutes(e,t,f.children)}else this.deactivateChildRoutes(e,t,r);else c&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,c=Zo(e);for(const f of Object.keys(c))this.deactivateRouteAndItsChildren(c[f],o);if(r&&r.outlet){const f=r.outlet.detach(),_=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:f,route:e,contexts:_})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,c=Zo(e);for(const f of Object.keys(c))this.deactivateRouteAndItsChildren(c[f],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Zo(t);e.children.forEach(c=>{this.activateRoutes(c,o[c.value.outlet],r),this.forwardEvent(new yf(c.value.snapshot))}),e.children.length&&this.forwardEvent(new Fa(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,c=t?t.value:null;if(ud(o),o===c)if(o.component){const f=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,f.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const f=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const _=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),f.children.onOutletReAttached(_.contexts),f.attachRef=_.componentRef,f.route=_.route.value,f.outlet&&f.outlet.attach(_.componentRef,_.route.value),ud(_.route.value),this.activateChildRoutes(e,null,f.children)}else{const _=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),C=_?_.module.componentFactoryResolver:null;f.attachRef=null,f.route=o,f.resolver=C,f.outlet&&f.outlet.activateWith(o,C),this.activateChildRoutes(e,null,f.children)}}else this.activateChildRoutes(e,null,r)}}class qg{constructor(e,t){this.routes=e,this.module=t}}function Za(n){return"function"==typeof n}function gs(n){return n instanceof G}const Zu=Symbol("INITIAL_VALUE");function qa(){return mn(n=>function(...n){const e=(0,co.yG)(n),t=(0,co.jO)(n),{args:r,keys:o}=lo(n);if(0===r.length)return(0,Wt.D)([],e);const c=new Yr.y(function(n,e,t=cs.y){return r=>{Ii(e,()=>{const{length:o}=n,c=new Array(o);let f=o,_=o;for(let C=0;C<o;C++)Ii(e,()=>{const T=(0,Wt.D)(n[C],e);let R=!1;T.subscribe(new xn.Q(r,O=>{c[C]=O,R||(R=!0,_--),_||r.next(t(c.slice()))},()=>{--f||r.complete()}))},r)},r)}}(r,e,o?f=>Uo(o,f):cs.y));return t?c.pipe(Lo(t)):c}(n.map(e=>e.pipe((0,po.q)(1),Di(Zu)))).pipe(Bi((e,t)=>{let r=!1;return t.reduce((o,c,f)=>o!==Zu?o:(c===Zu&&(r=!0),r||!1!==c&&f!==t.length-1&&!gs(c)?o:c),e)},Zu),ur(e=>e!==Zu),(0,it.U)(e=>gs(e)?e:!0===e),(0,po.q)(1)))}class oy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new qu,this.attachRef=null}}class qu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new oy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let hd=(()=>{class n{constructor(t,r,o,c,f){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=c||Ct,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const f=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,C=new $g(t,_,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,C),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qu),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class $g{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ba?this.route:e===qu?this.childContexts:this.parent.get(e,t)}}let il=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:[hd],encapsulation:2}),n})();function Hg(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Gg(r,$a(e,r))}}function Gg(n,e){n.children&&Hg(n.children,e)}function $a(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Pn(n){const e=n.children&&n.children.map(Pn),t=e?pi(_t({},n),{children:e}):_t({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ct&&(t.component=il),t}function Gi(n){return n.outlet||Ct}function fd(n,e){const t=n.filter(r=>Gi(r)===e);return t.push(...n.filter(r=>Gi(r)!==e)),t}const pd={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ha(n,e,t){var _;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?_t({},pd):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const o=(e.matcher||id)(t,n,e);if(!o)return _t({},pd);const c={};On(o.posParams,(C,T)=>{c[T]=C.path});const f=o.consumed.length>0?_t(_t({},c),o.consumed[o.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:f,positionalParamSegments:null!=(_=o.posParams)?_:{}}}function gd(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>sl(n,e,r)&&Gi(r)!==Ct)}(n,t,r)){const f=new H(e,function(n,e,t,r){const o={};o[Ct]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const c of t)if(""===c.path&&Gi(c)!==Ct){const f=new H([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,o[Gi(c)]=f}return o}(n,e,r,new H(t,n.children)));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>sl(n,e,r))}(n,t,r)){const f=new H(n.segments,function(n,e,t,r,o,c){const f={};for(const _ of r)if(sl(n,t,_)&&!o[Gi(_)]){const C=new H([],{});C._sourceSegment=n,C._segmentIndexShift="legacy"===c?n.segments.length:e.length,f[Gi(_)]=C}return _t(_t({},o),f)}(n,e,t,r,n.children,o));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:t}}const c=new H(n.segments,n.children);return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}function sl(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ly(n,e,t,r){return!!(Gi(n)===r||r!==Ct&&sl(e,t,n))&&("**"===n.path||Ha(e,n,t).matched)}function $u(n,e,t){return 0===e.length&&!n.children[t]}class Yn{constructor(e){this.segmentGroup=e||null}}class md{constructor(e){this.urlTree=e}}function ol(n){return new Yr.y(e=>e.error(new Yn(n)))}function _d(n){return new Yr.y(e=>e.error(new md(n)))}function lr(n){return new Yr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Nf{constructor(e,t,r,o,c){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=c,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=gd(this.urlTree.root,[],[],this.config).segmentGroup,t=new H(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ct).pipe((0,it.U)(c=>this.createUrlTree(yd(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ji(c=>{if(c instanceof md)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof Yn?this.noMatchError(c):c}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ct).pipe((0,it.U)(o=>this.createUrlTree(yd(o),e.queryParams,e.fragment))).pipe(ji(o=>{throw o instanceof Yn?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new H([],{[Ct]:e}):e;return new G(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,it.U)(c=>new H([],c))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const c of Object.keys(r.children))"primary"===c?o.unshift(c):o.push(c);return(0,Wt.D)(o).pipe(ds(c=>{const f=r.children[c],_=fd(t,c);return this.expandSegmentGroup(e,_,f,c).pipe((0,it.U)(C=>({segment:C,outlet:c})))}),Bi((c,f)=>(c[f.outlet]=f.segment,c),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ur((o,c)=>n(o,c,r)):cs.y,tn(1),t?gf(e):Nu(()=>new Vo))}())}expandSegment(e,t,r,o,c,f){return(0,Wt.D)(r).pipe(ds(_=>this.expandSegmentAgainstRoute(e,t,r,_,o,c,f).pipe(ji(T=>{if(T instanceof Yn)return Je(null);throw T}))),ka(_=>!!_),ji((_,C)=>{if(_ instanceof Vo||"EmptyError"===_.name){if($u(t,o,c))return Je(new H([],{}));throw new Yn(t)}throw _}))}expandSegmentAgainstRoute(e,t,r,o,c,f,_){return ly(o,t,c,f)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,c,f):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,f):ol(t):ol(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,c,f){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,f):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const c=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?_d(c):this.lineralizeSegments(r,c).pipe((0,an.z)(f=>{const _=new H(f,{});return this.expandSegment(e,_,t,f,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,c,f){const{matched:_,consumedSegments:C,lastChild:T,positionalParamSegments:R}=Ha(t,o,c);if(!_)return ol(t);const O=this.applyRedirectCommands(C,o.redirectTo,R);return o.redirectTo.startsWith("/")?_d(O):this.lineralizeSegments(o,O).pipe((0,an.z)(q=>this.expandSegment(e,t,r,q.concat(c.slice(T)),f,!1)))}matchSegmentAgainstRoute(e,t,r,o,c){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Je(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,it.U)(q=>(r._loadedConfig=q,new H(o,{})))):Je(new H(o,{}));const{matched:f,consumedSegments:_,lastChild:C}=Ha(t,r,o);if(!f)return ol(t);const T=o.slice(C);return this.getChildConfig(e,r,o).pipe((0,an.z)(O=>{const q=O.module,z=O.routes,{segmentGroup:ie,slicedSegments:Pe}=gd(t,_,T,z),Me=new H(ie.segments,ie.children);if(0===Pe.length&&Me.hasChildren())return this.expandChildren(q,z,Me).pipe((0,it.U)(lt=>new H(_,lt)));if(0===z.length&&0===Pe.length)return Je(new H(_,{}));const Tt=Gi(r)===c;return this.expandSegment(q,Me,z,Pe,Tt?Ct:c,!0).pipe((0,it.U)(Lt=>new H(_.concat(Lt.segments),Lt.children)))}))}getChildConfig(e,t,r){return t.children?Je(new qg(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Je(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,an.z)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,it.U)(c=>(t._loadedConfig=c,c))):(n=t,new Yr.y(e=>e.error(vf(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):Je(new qg([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?Je(o.map(f=>{const _=e.get(f);let C;if((n=_)&&Za(n.canLoad))C=_.canLoad(t,r);else{if(!Za(_))throw new Error("Invalid CanLoad guard");C=_(t,r)}var n;return Kn(C)})).pipe(qa(),(0,xr.b)(f=>{if(!gs(f))return;const _=vf(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw _.url=f,_}),(0,it.U)(f=>!0===f)):Je(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Je(r);if(o.numberOfChildren>1||!o.children[Ct])return lr(e.redirectTo);o=o.children[Ct]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const c=this.createSegmentGroup(e,t.root,r,o);return new G(c,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return On(e,(o,c)=>{if("string"==typeof o&&o.startsWith(":")){const _=o.substring(1);r[c]=t[_]}else r[c]=o}),r}createSegmentGroup(e,t,r,o){const c=this.createSegments(e,t.segments,r,o);let f={};return On(t.children,(_,C)=>{f[C]=this.createSegmentGroup(e,_,r,o)}),new H(c,f)}createSegments(e,t,r,o){return t.map(c=>c.path.startsWith(":")?this.findPosParam(e,c,o):this.findOrReturn(c,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function yd(n){const e={};for(const r of Object.keys(n.children)){const c=yd(n.children[r]);(c.segments.length>0||c.hasChildren())&&(e[r]=c)}return function(n){if(1===n.numberOfChildren&&n.children[Ct]){const e=n.children[Ct];return new H(n.segments.concat(e.segments),e.children)}return n}(new H(n.segments,e))}class Hu{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class vd{constructor(e,t){this.component=e,this.route=t}}function zg(n,e,t){const r=n._root;return Ga(r,e?e._root:null,t,[r.value])}function ul(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Ga(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=Zo(e);return n.children.forEach(f=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const c=n.value,f=e?e.value:null,_=t?t.getContext(n.value.outlet):null;if(f&&c.routeConfig===f.routeConfig){const C=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!je(n.url,e.url);case"pathParamsOrQueryParamsChange":return!je(n.url,e.url)||!Cr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xc(n,e)||!Cr(n.queryParams,e.queryParams);default:return!Xc(n,e)}}(f,c,c.routeConfig.runGuardsAndResolvers);C?o.canActivateChecks.push(new Hu(r)):(c.data=f.data,c._resolvedData=f._resolvedData),Ga(n,e,c.component?_?_.children:null:t,r,o),C&&_&&_.outlet&&_.outlet.isActivated&&o.canDeactivateChecks.push(new vd(_.outlet.component,f))}else f&&za(e,_,o),o.canActivateChecks.push(new Hu(r)),Ga(n,null,c.component?_?_.children:null:t,r,o)})(f,c[f.value.outlet],t,r.concat([f.value]),o),delete c[f.value.outlet]}),On(c,(f,_)=>za(f,t.getContext(_),o)),o}function za(n,e,t){const r=Zo(n),o=n.value;On(r,(c,f)=>{za(c,o.component?e?e.children.getContext(f):null:e,t)}),t.canDeactivateChecks.push(new vd(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Vf{}function wd(n){return new Yr.y(e=>e.error(n))}class Bf{constructor(e,t,r,o,c,f){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f}recognize(){const e=gd(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ct);if(null===t)return null;const r=new Vu([],Object.freeze({}),Object.freeze(_t({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ct,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new ai(r,t),c=new ad(this.url,o);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(e){const t=e.value,r=ja(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const c of Object.keys(t.children)){const f=t.children[c],_=fd(e,c),C=this.processSegmentGroup(_,f,c);if(null===C)return null;r.push(...C)}const o=Yg(r);return o.sort((e,t)=>e.value.outlet===Ct?-1:t.value.outlet===Ct?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const c of e){const f=this.processSegmentAgainstRoute(c,t,r,o);if(null!==f)return f}return $u(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!ly(e,t,r,o))return null;let c,f=[],_=[];if("**"===e.path){const z=r.length>0?Wc(r).parameters:{};c=new Vu(r,z,Object.freeze(_t({},this.urlTree.queryParams)),this.urlTree.fragment,zi(e),Gi(e),e.component,e,Cd(t),Wa(t)+r.length,wy(e))}else{const z=Ha(t,e,r);if(!z.matched)return null;f=z.consumedSegments,_=r.slice(z.lastChild),c=new Vu(f,z.parameters,Object.freeze(_t({},this.urlTree.queryParams)),this.urlTree.fragment,zi(e),Gi(e),e.component,e,Cd(t),Wa(t)+f.length,wy(e))}const C=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:T,slicedSegments:R}=gd(t,f,_,C.filter(z=>void 0===z.redirectTo),this.relativeLinkResolution);var n;if(0===R.length&&T.hasChildren()){const z=this.processChildren(C,T);return null===z?null:[new ai(c,z)]}if(0===C.length&&0===R.length)return[new ai(c,[])];const O=Gi(e)===o,q=this.processSegment(C,T,R,O?Ct:o);return null===q?null:[new ai(c,q)]}}function jf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Yg(n){const e=[],t=new Set;for(const r of n){if(!jf(r)){e.push(r);continue}const o=e.find(c=>r.value.routeConfig===c.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Yg(r.children);e.push(new ai(r.value,o))}return e.filter(r=>!t.has(r))}function Cd(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Wa(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function zi(n){return n.data||{}}function wy(n){return n.resolve||{}}function Gu(n){return mn(e=>{const t=n(e);return t?(0,Wt.D)(t).pipe((0,it.U)(()=>e)):Je(e)})}class Ya extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const bd=new u.OlP("ROUTES");class ms{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,it.U)(c=>{this.onLoadEndListener&&this.onLoadEndListener(t);const f=c.create(e);return new qg(Fu(f.injector.get(bd,void 0,u.XFs.Self|u.XFs.Optional)).map(Pn),f)}),ji(c=>{throw t._loader$=void 0,c}));return t._loader$=new ku(o,()=>new Vi.x).pipe(hn()),t._loader$}loadModuleFactory(e){return Kn(e()).pipe((0,an.z)(t=>t instanceof u.YKP?Je(t):(0,Wt.D)(this.compiler.compileModuleAsync(t))))}}class Id{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function $f(n){throw n}function Jg(n,e,t){return e.parse("/")}function Ja(n,e){return Je(null)}const Hf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xg={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let dr=(()=>{class n{constructor(t,r,o,c,f,_,C){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=c,this.config=C,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Vi.x,this.errorHandler=$f,this.malformedUriErrorHandler=Jg,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ja,afterPreactivation:Ja},this.urlHandlingStrategy=new Id,this.routeReuseStrategy=new Ya,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(u.h0i),this.console=f.get(u.c2e);const O=f.get(u.R0b);this.isNgZoneEnabled=O instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(C),this.currentUrlTree=new G(new H([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ms(f,_,q=>this.triggerEvent(new go(q)),q=>this.triggerEvent(new Bo(q))),this.routerState=Qc(this.currentUrlTree,this.rootComponentType),this.transitions=new jn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ur(o=>0!==o.id),(0,it.U)(o=>pi(_t({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),mn(o=>{let c=!1,f=!1;return Je(o).pipe((0,xr.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?pi(_t({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),mn(_=>{const C=this.browserUrlTree.toString(),T=!this.navigated||_.extractedUrl.toString()!==C||C!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||T)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return h(_.source)&&(this.browserUrlTree=_.extractedUrl),Je(_).pipe(mn(O=>{const q=this.transitions.getValue();return r.next(new nd(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),q!==this.transitions.getValue()?Pa.E:Promise.resolve(O)}),function(n,e,t,r){return mn(o=>function(n,e,t,r,o){return new Nf(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,it.U)(c=>pi(_t({},o),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,xr.b)(O=>{this.currentNavigation=pi(_t({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function(n,e,t,r,o){return(0,an.z)(c=>function(n,e,t,r,o="emptyOnly",c="legacy"){try{const f=new Bf(n,e,t,r,o,c).recognize();return null===f?wd(new Vf):Je(f)}catch(f){return wd(f)}}(n,e,c.urlAfterRedirects,t(c.urlAfterRedirects),r,o).pipe((0,it.U)(f=>pi(_t({},c),{targetSnapshot:f}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,xr.b)(O=>{if("eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const z=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(z,O)}this.browserUrlTree=O.urlAfterRedirects}const q=new Lg(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);r.next(q)}));if(T&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:q,extractedUrl:z,source:ie,restoredState:Pe,extras:Me}=_,Tt=new nd(q,this.serializeUrl(z),ie,Pe);r.next(Tt);const xt=Qc(z,this.rootComponentType).snapshot;return Je(pi(_t({},_),{targetSnapshot:xt,urlAfterRedirects:z,extras:pi(_t({},Me),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,_.resolve(null),Pa.E}),Gu(_=>{const{targetSnapshot:C,id:T,extractedUrl:R,rawUrl:O,extras:{skipLocationChange:q,replaceUrl:z}}=_;return this.hooks.beforePreactivation(C,{navigationId:T,appliedUrlTree:R,rawUrlTree:O,skipLocationChange:!!q,replaceUrl:!!z})}),(0,xr.b)(_=>{const C=new _f(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(C)}),(0,it.U)(_=>pi(_t({},_),{guards:zg(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(n,e){return(0,an.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:c,canDeactivateChecks:f}}=t;return 0===f.length&&0===c.length?Je(pi(_t({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Wt.D)(n).pipe((0,an.z)(o=>function(n,e,t,r,o){const c=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return c&&0!==c.length?Je(c.map(_=>{const C=ul(_,e,o);let T;if(function(n){return n&&Za(n.canDeactivate)}(C))T=Kn(C.canDeactivate(n,e,t,r));else{if(!Za(C))throw new Error("Invalid CanDeactivate guard");T=Kn(C(n,e,t,r))}return T.pipe(ka())})).pipe(qa()):Je(!0)}(o.component,o.route,t,e,r)),ka(o=>!0!==o,!0))}(f,r,o,n).pipe((0,an.z)(_=>_&&function(n){return"boolean"==typeof n}(_)?function(n,e,t,r){return(0,Wt.D)(e).pipe(ds(o=>qc(function(n,e){return null!==n&&e&&e(new rd(n)),Je(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new Hc(n)),Je(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],c=e.slice(0,e.length-1).reverse().map(f=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(f)).filter(f=>null!==f).map(f=>Vs(()=>Je(f.guards.map(C=>{const T=ul(C,f.node,t);let R;if(function(n){return n&&Za(n.canActivateChild)}(T))R=Kn(T.canActivateChild(r,n));else{if(!Za(T))throw new Error("Invalid CanActivateChild guard");R=Kn(T(r,n))}return R.pipe(ka())})).pipe(qa())));return Je(c).pipe(qa())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const o=r.map(c=>Vs(()=>{const f=ul(c,e,t);let _;if(function(n){return n&&Za(n.canActivate)}(f))_=Kn(f.canActivate(e,n));else{if(!Za(f))throw new Error("Invalid CanActivate guard");_=Kn(f(e,n))}return _.pipe(ka())}));return Je(o).pipe(qa())}(n,o.route,t))),ka(o=>!0!==o,!0))}(r,c,n,e):Je(_)),(0,it.U)(_=>pi(_t({},t),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),(0,xr.b)(_=>{if(gs(_.guardsResult)){const T=vf(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw T.url=_.guardsResult,T}const C=new Qr(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(C)}),ur(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),Gu(_=>{if(_.guards.canActivateChecks.length)return Je(_).pipe((0,xr.b)(C=>{const T=new Zi(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(T)}),mn(C=>{let T=!1;return Je(C).pipe(function(n,e){return(0,an.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Je(t);let c=0;return(0,Wt.D)(o).pipe(ds(f=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return Je({});const c={};return(0,Wt.D)(o).pipe((0,an.z)(f=>function(n,e,t,r){const o=ul(n,e,r);return Kn(o.resolve?o.resolve(e,t):o(e,t))}(n[f],e,t,r).pipe((0,xr.b)(_=>{c[f]=_}))),tn(1),(0,an.z)(()=>Object.keys(c).length===o.length?Je(c):Pa.E))}(n._resolve,n,e,r).pipe((0,it.U)(c=>(n._resolvedData=c,n.data=_t(_t({},n.data),ja(n,t).resolve),null)))}(f.route,r,n,e)),(0,xr.b)(()=>c++),tn(1),(0,an.z)(f=>c===o.length?Je(t):Pa.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,xr.b)({next:()=>T=!0,complete:()=>{T||(this.restoreHistory(C),this.cancelNavigationTransition(C,"At least one route resolver didn't emit any value."))}}))}),(0,xr.b)(C=>{const T=new $c(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(T)}))}),Gu(_=>{const{targetSnapshot:C,id:T,extractedUrl:R,rawUrl:O,extras:{skipLocationChange:q,replaceUrl:z}}=_;return this.hooks.afterPreactivation(C,{navigationId:T,appliedUrlTree:R,rawUrlTree:O,skipLocationChange:!!q,replaceUrl:!!z})}),(0,it.U)(_=>{const C=function(n,e,t){const r=el(n,e._root,t?t._root:void 0);return new vo(r,e)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return pi(_t({},_),{targetRouterState:C})}),(0,xr.b)(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((n,e,t)=>(0,it.U)(r=>(new Rf(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),(0,xr.b)({next(){c=!0},complete(){c=!0}}),function(n){return(0,vr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var _;c||f||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null==(_=this.currentNavigation)?void 0:_.id)===o.id&&(this.currentNavigation=null)}),ji(_=>{if(f=!0,function(n){return n&&n[jo]}(_)){const C=gs(_.url);C||(this.navigated=!0,this.restoreHistory(o,!0));const T=new js(o.id,this.serializeUrl(o.extractedUrl),_.message);r.next(T),C?setTimeout(()=>{const R=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),O={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||h(o.source)};this.scheduleNavigation(R,"imperative",null,O,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const C=new Na(o.id,this.serializeUrl(o.extractedUrl),_);r.next(C);try{o.resolve(this.errorHandler(_))}catch(T){o.reject(T)}}return Pa.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(_t(_t({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var _;const o={replaceUrl:!0},c=(null==(_=t.state)?void 0:_.navigationId)?t.state:null;if(c){const C=_t({},c);delete C.navigationId,delete C.\u0275routerPageId,0!==Object.keys(C).length&&(o.state=C)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,c,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Hg(t),this.config=t.map(Pn),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:c,fragment:f,queryParamsHandling:_,preserveFragment:C}=r,T=o||this.routerState.root,R=C?this.currentUrlTree.fragment:f;let O=null;switch(_){case"merge":O=_t(_t({},this.currentUrlTree.queryParams),c);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=c||null}return null!==O&&(O=this.removeEmptyProps(O)),function(n,e,t,r,o){if(0===t.length)return Ug(e.root,e.root,e,r,o);const c=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ty(!0,0,n);let e=0,t=!1;const r=n.reduce((o,c,f)=>{if("object"==typeof c&&null!=c){if(c.outlets){const _={};return On(c.outlets,(C,T)=>{_[T]="string"==typeof C?C.split("/"):C}),[...o,{outlets:_}]}if(c.segmentPath)return[...o,c.segmentPath]}return"string"!=typeof c?[...o,c]:0===f?(c.split("/").forEach((_,C)=>{0==C&&"."===_||(0==C&&""===_?t=!0:".."===_?e++:""!=_&&o.push(_))}),o):[...o,c]},[]);return new ty(t,e,r)}(t);if(c.toRoot())return Ug(e.root,new H([],{}),e,r,o);const f=function(n,e,t){if(n.isAbsolute)return new dd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const c=t.snapshot._urlSegment;return new dd(c,c===e.root,0)}const r=cd(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,c=t;for(;c>o;){if(c-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new dd(r,!1,o-c)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(c,e,n),_=f.processChildren?xf(f.segmentGroup,f.index,c.commands):Vg(f.segmentGroup,f.index,c.commands);return Ug(f.segmentGroup,_,e,r,o)}(T,this.currentUrlTree,t,O,null!=R?R:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=gs(t)?t:this.parseUrl(t),c=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?_t({},Hf):!1===r?_t({},Xg):r,gs(t))return Uu(this.currentUrlTree,t,o);const c=this.parseUrl(t);return Uu(this.currentUrlTree,c,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const c=t[o];return null!=c&&(r[o]=c),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new In(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,c,f){var Tt,xt,Lt;if(this.disposed)return Promise.resolve(!1);const _=this.transitions.value,C=h(r)&&_&&!h(_.source),T=_.rawUrl.toString()===t.toString(),R=_.id===(null==(Tt=this.currentNavigation)?void 0:Tt.id);if(C&&T&&R)return Promise.resolve(!0);let q,z,ie;f?(q=f.resolve,z=f.reject,ie=f.promise):ie=new Promise((lt,ln)=>{q=lt,z=ln});const Pe=++this.navigationId;let Me;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Me=o&&o.\u0275routerPageId?o.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!=(xt=this.browserPageId)?xt:0:(null!=(Lt=this.browserPageId)?Lt:0)+1):Me=0,this.setTransition({id:Pe,targetPageId:Me,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:c,resolve:q,reject:z,promise:ie,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ie.catch(lt=>Promise.reject(lt))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),c=_t(_t({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",c):this.location.go(o,"",c)}restoreHistory(t,r=!1){var o,c;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(o=this.currentNavigation)?void 0:o.finalUrl)||0===f?this.currentUrlTree===(null==(c=this.currentNavigation)?void 0:c.finalUrl)&&0===f&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new js(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function h(n){return"imperative"!==n}let p=(()=>{class n{constructor(t,r,o,c,f){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=c,this.el=f,this.commands=null,this.onChanges=new Vi.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:D(this.skipLocationChange),replaceUrl:D(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:D(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(dr),u.Y36(Ba),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})(),v=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new Vi.x,this.subscription=t.events.subscribe(c=>{c instanceof In&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,c,f){if(0!==t||r||o||c||f||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const _={skipLocationChange:D(this.skipLocationChange),replaceUrl:D(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,_),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:D(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(dr),u.Y36(Ba),u.Y36(se))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(c){return r.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&t&&u.uIk("target",r.target)("href",r.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();function D(n){return""===n||!!n}let S=(()=>{class n{constructor(t,r,o,c,f,_){this.router=t,this.element=r,this.renderer=o,this.cdr=c,this.link=f,this.linkWithHref=_,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=t.events.subscribe(C=>{C instanceof In&&this.update()})}ngAfterContentInit(){Je(this.links.changes,this.linksWithHrefs.changes,Je(null)).pipe((0,ho.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var r;null==(r=this.linkInputChangesSubscription)||r.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,Wt.D)(t).pipe((0,ho.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null==(t=this.linkInputChangesSubscription)||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>!!o.urlTree&&t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(dr),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(p,8),u.Y36(v,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&(u.Suo(o,p,5),u.Suo(o,v,5)),2&t){let c;u.iGM(c=u.CRH())&&(r.links=c),u.iGM(c=u.CRH())&&(r.linksWithHrefs=c)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[u.TTD]}),n})();class J{}class xe{preload(e,t){return Je(null)}}let Xe=(()=>{class n{constructor(t,r,o,c){this.router=t,this.injector=o,this.preloadingStrategy=c,this.loader=new ms(o,r,C=>t.triggerEvent(new go(C)),C=>t.triggerEvent(new Bo(C)))}setUpPreloading(){this.subscription=this.router.events.pipe(ur(t=>t instanceof In),ds(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const c of r)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const f=c._loadedConfig;o.push(this.processRoutes(f.module,f.routes))}else c.loadChildren&&!c.canLoad?o.push(this.preloadConfig(t,c)):c.children&&o.push(this.processRoutes(t,c.children));return(0,Wt.D)(o).pipe((0,ho.J)(),(0,it.U)(c=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Je(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,an.z)(c=>(r._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(dr),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(J))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),et=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof nd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof In&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Gc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const wn=new u.OlP("ROUTER_CONFIGURATION"),$s=new u.OlP("ROUTER_FORROOT_GUARD"),Hs=[qe,{provide:Kt,useClass:Rr},{provide:dr,useFactory:function(n,e,t,r,o,c,f={},_,C){const T=new dr(null,n,e,t,r,o,Fu(c));return _&&(T.urlHandlingStrategy=_),C&&(T.routeReuseStrategy=C),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(f,T),f.enableTracing&&T.events.subscribe(R=>{var O,q;null==(O=console.group)||O.call(console,`Router Event: ${R.constructor.name}`),console.log(R.toString()),console.log(R),null==(q=console.groupEnd)||q.call(console)}),T},deps:[Kt,qu,qe,u.zs3,u.Sil,bd,wn,[class{},new u.FiY],[class{},new u.FiY]]},qu,{provide:Ba,useFactory:function(n){return n.routerState.root},deps:[dr]},Xe,xe,class{preload(e,t){return t().pipe(ji(()=>Je(null)))}},{provide:wn,useValue:{enableTracing:!1}}];function Dd(){return new u.PXZ("Router",dr)}let Td=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Hs,Ad(t),{provide:$s,useFactory:tm,deps:[[dr,new u.FiY,new u.tp0]]},{provide:wn,useValue:r||{}},{provide:se,useFactory:zu,deps:[ne,[new u.tBr(oe),new u.FiY],wn]},{provide:et,useFactory:em,deps:[dr,sf,wn]},{provide:J,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:xe},{provide:u.PXZ,multi:!0,useFactory:Dd},[Wu,{provide:u.ip1,multi:!0,useFactory:xd,deps:[Wu]},{provide:Cy,useFactory:nm,deps:[Wu]},{provide:u.tb,multi:!0,useExisting:Cy}]]}}static forChild(t){return{ngModule:n,providers:[Ad(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG($s,8),u.LFG(dr,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function em(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new et(n,e,t)}function zu(n,e,t={}){return t.useHash?new ge(n,e):new Ce(n,e)}function tm(n){return"guarded"}function Ad(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:bd,multi:!0,useValue:n}]}let Wu=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Vi.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(_=>r=_),c=this.injector.get(dr),f=this.injector.get(wn);return"disabled"===f.initialNavigation?(c.setUpLocationChangeListener(),r(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?Je(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),c.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(wn),o=this.injector.get(Xe),c=this.injector.get(et),f=this.injector.get(dr),_=this.injector.get(u.z2F);t===_.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&f.initialNavigation(),o.setUpPreloading(),c.init(),f.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function xd(n){return n.appInitializer.bind(n)}function nm(n){return n.bootstrapListener.bind(n)}const Cy=new u.OlP("Router Initializer");var he=P(8239);const Md=[{id:1,symbol:"$",converter:1},{id:2,symbol:"\u20ac",converter:.88}];let Wf=(()=>{class n{constructor(){this.currencySource=new jn(Md[0]),this.currentCurrency=this.currencySource.asObservable()}setCurrency(t){this.currencySource.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();var Ku=P(7892),kb=(P(9766),P(3719)),Kf=P(4763),by=P(1733);class vw extends Vi.x{constructor(e=1/0,t=1/0,r=by.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:c,_windowTime:f}=this;t||(r.push(e),!o&&r.push(c.now()+f)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,c=o.slice();for(let f=0;f<c.length&&!e.closed;f+=r?1:2)e.next(c[f]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,c=(o?1:2)*e;if(e<1/0&&c<r.length&&r.splice(0,r.length-c),!o){const f=t.now();let _=0;for(let C=1;C<r.length&&r[C]<=f;C+=2)_=C;_&&r.splice(0,_+1)}}}var EA=P(3174);function Iy(n,e,t){var r,o;let c,f=!1;return n&&"object"==typeof n?(c=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(o=n.windowTime)&&void 0!==o?o:1/0,f=!!n.refCount,t=n.scheduler):c=null!=n?n:1/0,(0,EA.B)({connector:()=>new vw(c,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:f})}function ww(n,e){return(0,ff.m)(e)?mn(()=>n,e):mn(()=>n)}var rm=P(5222),Fn=P(7233),Ai=P(7905);P(7713);var wo=P(1572),Yu=P(1177),ft=P(4213),$o=P(3855);const Ay=new Map,Sy={activated:!1,tokenObservers:[]},TA={initialized:!1,enabled:!1};function Er(n){return Ay.get(n)||Sy}function Ho(n,e){Ay.set(n,e)}function dl(){return TA}class Hb{constructor(e,t,r,o,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=o,o>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,he.Z)(function*(){t.stop();try{t.pending=new ft.BH,yield(n=t.getNextRun(e),new Promise(e=>{setTimeout(e,n)})),t.pending.resolve(),yield t.pending.promise,t.pending=new ft.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}var n})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ci=new ft.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ew(n){if(!Er(n).activated)throw ci.create("use-before-activation",{appName:n.name})}function Py(n,e){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,he.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const c={method:"POST",body:JSON.stringify(e),headers:r};let f,_;try{f=yield fetch(n,c)}catch(O){throw ci.create("fetch-network-error",{originalErrorMessage:O.message})}if(200!==f.status)throw ci.create("fetch-status-error",{httpStatus:f.status});try{_=yield f.json()}catch(O){throw ci.create("fetch-parse-error",{originalErrorMessage:O.message})}const C=_.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw ci.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const T=1e3*Number(C[1]),R=Date.now();return{token:_.attestationToken,expireTimeMillis:R+T,issuedAtTimeMillis:R}})).apply(this,arguments)}function MA(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const om="firebase-app-check-store";let ky=null;function Kb(){return ky||(ky=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ci.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(om,{keyPath:"compositeKey"})}}catch(t){e(ci.create("storage-open",{originalErrorMessage:t.message}))}}),ky)}function Jf(){return(Jf=(0,he.Z)(function*(n,e){const r=(yield Kb()).transaction(om,"readwrite"),c=r.objectStore(om).put({compositeKey:n,value:e});return new Promise((f,_)=>{c.onsuccess=C=>{f()},r.onerror=C=>{var T;_(ci.create("storage-set",{originalErrorMessage:null===(T=C.target.error)||void 0===T?void 0:T.message}))}})})).apply(this,arguments)}const zs=new $o.Yd("@firebase/app-check");function am(n,e){return(0,ft.hl)()?function(n,e){return function(n,e){return Jf.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{zs.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Dw(){return dl().enabled}function Tw(){return hl.apply(this,arguments)}function hl(){return(hl=(0,he.Z)(function*(){const n=dl();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Vy={error:"UNKNOWN_ERROR"};function Pd(n){return ft.US.encodeString(JSON.stringify(n),!1)}function Ju(n){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,he.Z)(function*(n,e=!1){const t=n.app;Ew(t);const r=Er(t);let c,o=r.token;if(!o){const C=yield r.cachedTokenPromise;C&&ep(C)&&(o=C)}if(!e&&o&&ep(o))return{token:o.token};let _,f=!1;if(Dw()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Py(MA(t,yield Tw()),n.platformLoggerProvider).then(T=>(r.exchangeTokenPromise=void 0,T)),f=!0);const C=yield r.exchangeTokenPromise;return yield am(t,C),Ho(t,Object.assign(Object.assign({},r),{token:C})),{token:C.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(C=>(r.exchangeTokenPromise=void 0,C)),f=!0),o=yield r.exchangeTokenPromise}catch(C){"appCheck/throttled"===C.code?zs.warn(C.message):zs.error(C),c=C}return o?(_={token:o.token},Ho(t,Object.assign(Object.assign({},r),{token:o})),yield am(t,o)):_=dm(c),f&&lm(t,_),_})).apply(this,arguments)}function cm(n,e){const t=Er(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ho(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function jy(n){const{app:e}=n,t=Er(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new Hb((0,he.Z)(function*(){let r;if(r=Er(e).token?yield Ju(n,!0):yield Ju(n),r.error)throw r.error}),()=>!0,()=>{const t=Er(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ho(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function lm(n,e){const t=Er(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function ep(n){return n.expireTimeMillis-Date.now()>0}function dm(n){return{token:Pd(Vy),error:n}}class Jb{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Er(this.app);for(const t of e)cm(this.app,t.next);return Promise.resolve()}}const Hy="app-check-internal";(0,wo._registerComponent)(new Yu.wA("app-check",n=>function(n,e){return new Jb(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Hy).initialize()})),(0,wo._registerComponent)(new Yu.wA(Hy,n=>function(n){return{getToken:e=>Ju(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,c=Er(o),f={next:t,error:r,type:e};if(Ho(o,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,f]})),c.token&&ep(c.token)){const _=c.token;Promise.resolve().then(()=>{t({token:_.token}),jy(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>jy(n))}(n,"INTERNAL",e),removeTokenListener:e=>cm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,wo.registerVersion)("@firebase/app-check","0.5.2");class fm{constructor(){return(0,Fn.vb)("app-check")}}"undefined"!=typeof window&&window;const $w=new u.OlP("angularfire2.auth.use-emulator"),gm=new u.OlP("angularfire2.auth.settings"),cI=new u.OlP("angularfire2.auth.tenant-id"),Hw=new u.OlP("angularfire2.auth.langugage-code"),zy=new u.OlP("angularfire2.auth.use-device-language"),Wy=new u.OlP("angularfire.auth.persistence"),Ky=(n,e,t,r,o,c,f,_)=>(0,Ai.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const C=e.runOutsideAngular(()=>n.auth());if(t&&C.useEmulator(...t),r&&(C.tenantId=r),C.languageCode=o,c&&C.useDeviceLanguage(),f)for(const[T,R]of Object.entries(f))C.settings[T]=R;return _&&C.setPersistence(_),C},[t,r,o,c,f,_]);let np=(()=>{class n{constructor(t,r,o,c,f,_,C,T,R,O,q,z){const ie=new Vi.x,Pe=Je(void 0).pipe((0,Kf.Q)(f.outsideAngular),mn(()=>c.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,9766)))),(0,it.U)(()=>(0,Ai.on)(t,c,r)),(0,it.U)(Me=>Ky(Me,c,_,T,R,O,C,q)),Iy({bufferSize:1,refCount:!1}));if(yr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{Pe.pipe(ka()).subscribe();const Tt=Pe.pipe(mn(lt=>lt.getRedirectResult().then(ln=>ln,()=>null)),Fn.iC,Iy({bufferSize:1,refCount:!1})),xt=Pe.pipe(mn(lt=>new Yr.y(ln=>({unsubscribe:c.runOutsideAngular(()=>lt.onAuthStateChanged(fi=>ln.next(fi),fi=>ln.error(fi),()=>ln.complete()))})))),Lt=Pe.pipe(mn(lt=>new Yr.y(ln=>({unsubscribe:c.runOutsideAngular(()=>lt.onIdTokenChanged(fi=>ln.next(fi),fi=>ln.error(fi),()=>ln.complete()))}))));this.authState=Tt.pipe(ww(xt),(0,rm.R)(f.outsideAngular),(0,Kf.Q)(f.insideAngular)),this.user=Tt.pipe(ww(Lt),(0,rm.R)(f.outsideAngular),(0,Kf.Q)(f.insideAngular)),this.idToken=this.user.pipe(mn(lt=>lt?(0,Wt.D)(lt.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(mn(lt=>lt?(0,Wt.D)(lt.getIdTokenResult()):Je(null))),this.credential=(0,kb.T)(Tt,ie,this.authState.pipe(ur(lt=>!lt))).pipe((0,it.U)(lt=>(null==lt?void 0:lt.user)?lt:null),(0,rm.R)(f.outsideAngular),(0,Kf.Q)(f.insideAngular))}return(0,Ai.pX)(this,Pe,c,{spy:{apply:(Me,Tt,xt)=>{(Me.startsWith("signIn")||Me.startsWith("createUser"))&&xt.then(Lt=>ie.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ai.Dh),u.LFG(Ai.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Fn.HU),u.LFG($w,8),u.LFG(gm,8),u.LFG(cI,8),u.LFG(Hw,8),u.LFG(zy,8),u.LFG(Wy,8),u.LFG(fm,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Gw=(()=>{class n{constructor(){Ku.Z.registerVersion("angularfire",Fn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[np]}),n})();var Go=P(2210);function kd(){return(0,vr.e)((n,e)=>{let t,r=!1;n.subscribe(new xn.Q(e,o=>{const c=t;t=o,r&&e.next([c,o]),r=!0}))})}function dI(n,e){return n===e}var Ye,hI=P(6293),Yy="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},zo={},fl=fl||{},Dt=Yy||self;function Nd(){}function mm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Fd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Qy="closure_uid_"+(1e9*Math.random()>>>0),Jy=0;function fI(n,e,t){return n.call.apply(n.bind,arguments)}function pI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Pr(n,e,t){return(Pr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fI:pI).apply(null,arguments)}function Xa(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function kr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,c){for(var f=Array(arguments.length-2),_=2;_<arguments.length;_++)f[_-2]=arguments[_];return e.prototype[o].apply(r,f)}}function ec(){this.s=this.s,this.o=this.o}var Ld={};ec.prototype.s=!1,ec.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Qy)&&n[Qy]||(n[Qy]=++Jy)}(this);delete Ld[n]}},ec.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ww=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Kw=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let c=0;c<r;c++)c in o&&e.call(t,o[c],c,n)};function Yw(n){return Array.prototype.concat.apply([],arguments)}function Wi(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ud(n){return/^[\s\xa0]*$/.test(n)}var hi,Xy=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function di(n,e){return-1!=n.indexOf(e)}function _m(n,e){return n<e?-1:n>e?1:0}e:{var Qw=Dt.navigator;if(Qw){var Jw=Qw.userAgent;if(Jw){hi=Jw;break e}}hi=""}function ev(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Xw(n){const e={};for(const t in n)e[t]=n[t];return e}var tv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _I(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let c=0;c<tv.length;c++)t=tv[c],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ym(n){return ym[" "](n),n}ym[" "]=Nd;var rv,n,vI=di(hi,"Opera"),rp=di(hi,"Trident")||di(hi,"MSIE"),wI=di(hi,"Edge"),ip=wI||rp,eC=di(hi,"Gecko")&&!(di(hi.toLowerCase(),"webkit")&&!di(hi,"Edge"))&&!(di(hi,"Trident")||di(hi,"MSIE"))&&!di(hi,"Edge"),tC=di(hi.toLowerCase(),"webkit")&&!di(hi,"Edge");function nv(){var n=Dt.document;return n?n.documentMode:void 0}e:{var _s="",nC=(n=hi,eC?/rv:([^\);]+)(\)|;)/.exec(n):wI?/Edge\/([\d\.]+)/.exec(n):rp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):tC?/WebKit\/(\S+)/.exec(n):vI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(nC&&(_s=nC?nC[1]:""),rp){var rC=nv();if(null!=rC&&rC>parseFloat(_s)){rv=String(rC);break e}}rv=_s}var iC={};function sC(){return e=iC,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Xy(String(rv)).split("."),t=Xy("9").split("."),r=Math.max(e.length,t.length);for(let f=0;0==n&&f<r;f++){var o=e[f]||"",c=t[f]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;n=_m(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||_m(0==o[2].length,0==c[2].length)||_m(o[2],c[2]),o=o[3],c=c[3]}while(0==n)}return 0<=n}();var e}var HA=Dt.document&&rp&&(nv()||parseInt(rv,10))||void 0,aC=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dt.addEventListener("test",Nd,e),Dt.removeEventListener("test",Nd,e)}catch(t){}return n}();function Nr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function sp(n,e){if(Nr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(eC){e:{try{ym(e.nodeName);var o=!0;break e}catch(c){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:iv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&sp.Z.h.call(this)}}Nr.prototype.h=function(){this.defaultPrevented=!0},kr(sp,Nr);var iv={2:"touch",3:"pen",4:"mouse"};sp.prototype.h=function(){sp.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var op="closure_listenable_"+(1e6*Math.random()|0),CI=0;function EI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++CI,this.ca=this.fa=!1}function wm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Cm(n){this.src=n,this.g={},this.h=0}function sv(n,e){var t=e.type;if(t in n.g){var c,r=n.g[t],o=Ww(r,e);(c=0<=o)&&Array.prototype.splice.call(r,o,1),c&&(wm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Vd(n,e,t,r){for(var o=0;o<n.length;++o){var c=n[o];if(!c.ca&&c.listener==e&&c.capture==!!t&&c.ia==r)return o}return-1}Cm.prototype.add=function(n,e,t,r,o){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var f=Vd(n,e,r,o);return-1<f?(e=n[f],t||(e.fa=!1)):((e=new EI(e,this.src,c,!!r,o)).fa=t,n.push(e)),e};var tc="closure_lm_"+(1e6*Math.random()|0),ov={};function Bd(n,e,t,r,o){if(r&&r.once)return Em(n,e,t,r,o);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Bd(n,e[c],t,r,o);return null}return t=ap(t),n&&n[op]?n.N(e,t,Fd(r)?!!r.capture:!!r,o):uC(n,e,t,!1,r,o)}function uC(n,e,t,r,o,c){if(!e)throw Error("Invalid event type");var f=Fd(o)?!!o.capture:!!o,_=jd(n);if(_||(n[tc]=_=new Cm(n)),(t=_.add(e,t,r,f,c)).proxy)return t;if(r=function(){var e=gl;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)aC||(o=f),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Xr(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Em(n,e,t,r,o){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Em(n,e[c],t,r,o);return null}return t=ap(t),n&&n[op]?n.O(e,t,Fd(r)?!!r.capture:!!r,o):uC(n,e,t,!0,r,o)}function Eo(n,e,t,r,o){if(Array.isArray(e))for(var c=0;c<e.length;c++)Eo(n,e[c],t,r,o);else r=Fd(r)?!!r.capture:!!r,t=ap(t),n&&n[op]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Vd(c=n.g[e],t,r,o))&&(wm(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=jd(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Vd(e,t,r,o)),(t=-1<n?e[n]:null)&&pl(t))}function pl(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[op])sv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Xr(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=jd(e))?(sv(t,n),0==t.h&&(t.src=null,e[tc]=null)):wm(n)}}}function Xr(n){return n in ov?ov[n]:ov[n]="on"+n}function gl(n,e){if(n.ca)n=!0;else{e=new sp(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&pl(n),n=t.call(r,e)}return n}function jd(n){return(n=n[tc])instanceof Cm?n:null}var Ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function ap(n){return"function"==typeof n?n:(n[Ki]||(n[Ki]=function(e){return n.handleEvent(e)}),n[Ki])}function Ln(){ec.call(this),this.i=new Cm(this),this.P=this,this.I=null}function qn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Nr(e,n);else if(e instanceof Nr)e.target=e.target||n;else{var o=e;_I(e=new Nr(r,n),o)}if(o=!0,t)for(var c=t.length-1;0<=c;c--){var f=e.g=t[c];o=eu(f,r,!0,e)&&o}if(o=eu(f=e.g=n,r,!0,e)&&o,o=eu(f,r,!1,e)&&o,t)for(c=0;c<t.length;c++)o=eu(f=e.g=t[c],r,!1,e)&&o}function eu(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,c=0;c<e.length;++c){var f=e[c];if(f&&!f.ca&&f.capture==t){var _=f.listener,C=f.ia||f.src;f.fa&&sv(n.i,f),o=!1!==_.call(C,r)&&o}}return o&&!r.defaultPrevented}kr(Ln,ec),Ln.prototype[op]=!0,Ln.prototype.removeEventListener=function(n,e,t,r){Eo(this,n,e,t,r)},Ln.prototype.M=function(){if(Ln.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)wm(t[r]);delete n.g[e],n.h--}}this.I=null},Ln.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ln.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var nc=Dt.JSON.stringify;function Zd(){var n=av;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Im,ml=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new $d,n=>n.reset());class $d{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Hd(n){Dt.setTimeout(()=>{throw n},0)}function bm(n,e){Im||function(){var n=Dt.Promise.resolve(void 0);Im=function(){n.then(lC)}}(),Dm||(Im(),Dm=!0),av.add(n,e)}var Dm=!1,av=new class{constructor(){this.h=this.g=null}add(e,t){const r=ml.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function lC(){for(var n;n=Zd();){try{n.h.call(n.g)}catch(t){Hd(t)}var e=ml;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Dm=!1}function up(n,e){Ln.call(this),this.h=n||1,this.g=e||Dt,this.j=Pr(this.kb,this),this.l=Date.now()}function Tm(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Am(n,e,t){if("function"==typeof n)t&&(n=Pr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Pr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dt.setTimeout(n,e||0)}function dC(n){n.g=Am(()=>{n.g=null,n.i&&(n.i=!1,dC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}kr(up,Ln),(Ye=up.prototype).da=!1,Ye.S=null,Ye.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),qn(this,"tick"),this.da&&(Tm(this),this.start()))}},Ye.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.M=function(){up.Z.M.call(this),Tm(this),delete this.g};class hC extends ec{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dC(this)}M(){super.M(),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cp(n){ec.call(this),this.h=n,this.g={}}kr(cp,ec);var fC=[];function uv(n,e,t,r){Array.isArray(t)||(t&&(fC[0]=t.toString()),t=fC);for(var o=0;o<t.length;o++){var c=Bd(e,t[o],r||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function pC(n){ev(n.g,function(e,t){this.g.hasOwnProperty(t)&&pl(e)},n),n.g={}}function Sm(){this.g=!0}function _l(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var c=o[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var f=1;f<o.length;f++)o[f]=""}}}return nc(t)}catch(_){return e}}(n,t)+(r?" "+r:"")})}cp.prototype.M=function(){cp.Z.M.call(this),pC(this)},cp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sm.prototype.Aa=function(){this.g=!1},Sm.prototype.info=function(){};var Gd={},mC=null;function zd(){return mC=mC||new Ln}function xm(n){Nr.call(this,Gd.Ma,n)}function lp(n){const e=zd();qn(e,new xm(e,n))}function AI(n,e){Nr.call(this,Gd.STAT_EVENT,n),this.stat=e}function Yi(n){const e=zd();qn(e,new AI(e,n))}function SI(n,e){Nr.call(this,Gd.Na,n),this.size=e}function dp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){n()},e)}Gd.Ma="serverreachability",kr(xm,Nr),Gd.STAT_EVENT="statevent",kr(AI,Nr),Gd.Na="timingevent",kr(SI,Nr);var hp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},xI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function cv(){}function _C(){}cv.prototype.h=null;var Kd,Wd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function lv(){Nr.call(this,"d")}function Mm(){Nr.call(this,"c")}function Rm(){}function Yd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new cp(this),this.P=MI,this.W=new up(n=ip?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new yC}function yC(){this.i=null,this.g="",this.h=!1}kr(lv,Nr),kr(Mm,Nr),kr(Rm,cv),Rm.prototype.g=function(){return new XMLHttpRequest},Rm.prototype.i=function(){return{}},Kd=new Rm;var MI=45e3,dv={},Om={};function hv(n,e,t){n.K=1,n.v=gp(nu(e)),n.s=t,n.U=!0,fv(n,null)}function fv(n,e){n.F=Date.now(),vl(n),n.A=nu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Cv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new yC,n.g=Lv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new hC(Pr(n.Ia,n,n.g),n.O)),uv(n.V,n.g,"readystatechange",n.gb),e=n.H?Xw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),lp(1),function(n,e,t,r,o,c){n.info(function(){if(n.g)if(c)for(var f="",_=c.split("&"),C=0;C<_.length;C++){var T=_[C].split("=");if(1<T.length){var R=T[0];T=T[1];var O=R.split("_");f=2<=O.length&&"type"==O[1]?f+(R+"=")+T+"&":f+(R+"=redacted&")}}else f=null;else f=c;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+f})}(n.j,n.u,n.A,n.m,n.X,n.s)}function vC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function pv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=wC(n,t),o==Om){4==e&&(n.o=4,Yi(14),r=!1),_l(n.j,n.m,null,"[Incomplete Response]");break}if(o==dv){n.o=4,Yi(15),_l(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}_l(n.j,n.m,o,null),wl(n,o)}vC(n)&&o!=Om&&o!=dv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Yi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Tp(e),e.L=!0,Yi(11))):(_l(n.j,n.m,t,"[Invalid Chunked Response]"),Jd(n),fp(n))}function wC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Om:(t=Number(e.substring(t,r)),isNaN(t)?dv:(r+=1)+t>e.length?Om:(e=e.substr(r,t),n.C=r+t,e))}function vl(n){n.Y=Date.now()+n.P,RI(n,n.P)}function RI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=dp(Pr(n.eb,n),e)}function Qd(n){n.B&&(Dt.clearTimeout(n.B),n.B=null)}function fp(n){0==n.l.G||n.I||Pv(n.l,n)}function Jd(n){Qd(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Tm(n.W),pC(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function wl(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Iv(t.i,n)))if(t.I=n.N,!n.J&&Iv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(T){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=dp(Pr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;rh(t),ic(t)}Um(t),Yi(18)}if(1>=kI(t.i)&&t.ka){try{t.ka()}catch(T){}t.ka=void 0}}else oc(t,11)}else if((n.J||t.g==n)&&rh(t),!Ud(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let T=o[e];if(t.U=T[0],T=T[1],2==t.G)if("c"==T[0]){t.J=T[1],t.la=T[2];const R=T[3];null!=R&&(t.ma=R,t.h.info("VER="+t.ma));const O=T[4];null!=O&&(t.za=O,t.h.info("SVER="+t.za));const q=T[5];null!=q&&"number"==typeof q&&0<q&&(t.K=r=1.5*q,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const z=n.g;if(z){const ie=z.g?z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var c=r.i;!c.g&&(di(ie,"spdy")||di(ie,"quic")||di(ie,"h2"))&&(c.j=c.l,c.g=new Set,c.h&&(Dv(c,c.h),c.h=null))}if(r.D){const Pe=z.g?z.g.getResponseHeader("X-HTTP-Session-Id"):null;Pe&&(r.sa=Pe,Dn(r.F,r.D,Pe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var f=n;if((r=t).oa=Fv(r,r.H?r.la:null,r.W),f.J){Tv(r.i,f);var _=f,C=r.K;C&&_.setTimeout(C),_.B&&(Qd(_),vl(_)),r.g=f}else Ov(r);0<t.l.length&&Lm(t)}else"stop"!=T[0]&&"close"!=T[0]||oc(t,7);else 3==t.G&&("stop"==T[0]||"close"==T[0]?"stop"==T[0]?oc(t,7):Dp(t):"noop"!=T[0]&&t.j&&t.j.wa(T),t.A=0)}lp(4)}catch(T){}}function pp(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(mm(n)||"string"==typeof n)Kw(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(mm(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(mm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var c=0;c<o;c++)e.call(void 0,r[c],t&&t[c],n)}}function rc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof rc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function gv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];tu(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)tu(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function tu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ye=Yd.prototype).setTimeout=function(n){this.P=n},Ye.gb=function(n){n=n.target;const e=this.L;e&&3==Ko(n)?e.l():this.Ia(n)},Ye.Ia=function(n){try{if(n==this.g)e:{const R=Ko(this.g);var e=this.g.Da();const O=this.g.ba();if(!(3>R)&&(3!=R||ip||this.g&&(this.h.h||this.g.ga()||xv(this.g)))){this.I||4!=R||7==e||lp(8==e||0>=O?3:2),Qd(this);var t=this.g.ba();this.N=t;t:if(vC(this)){var r=xv(this.g);n="";var o=r.length,c=4==Ko(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Jd(this),fp(this);var f="";break t}this.h.i=new Dt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:c&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,c,f){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+c+" "+f})}(this.j,this.u,this.A,this.m,this.X,R,t),this.i){if(this.$&&!this.J){t:{if(this.g){var _,C=this.g;if((_=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ud(_)){var T=_;break t}}T=null}if(!(t=T)){this.i=!1,this.o=3,Yi(12),Jd(this),fp(this);break e}_l(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,wl(this,t)}this.U?(pv(this,R,f),ip&&this.i&&3==R&&(uv(this.V,this.W,"tick",this.fb),this.W.start())):(_l(this.j,this.m,f,null),wl(this,f)),4==R&&Jd(this),this.i&&!this.I&&(4==R?Pv(this.l,this):(this.i=!1,vl(this)))}else 400==t&&0<f.indexOf("Unknown SID")?(this.o=3,Yi(12)):(this.o=0,Yi(13)),Jd(this),fp(this)}}}catch(R){}},Ye.fb=function(){if(this.g){var n=Ko(this.g),e=this.g.ga();this.C<e.length&&(Qd(this),pv(this,n,e),this.i&&4!=n&&vl(this))}},Ye.cancel=function(){this.I=!0,Jd(this)},Ye.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(lp(3),Yi(17)),Jd(this),this.o=2,fp(this)):RI(this,this.Y-n)},(Ye=rc.prototype).R=function(){gv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ye.T=function(){return gv(this),this.g.concat()},Ye.get=function(n,e){return tu(this.h,n)?this.h[n]:e},Ye.set=function(n,e){tu(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ye.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],c=this.get(o);n.call(e,c,o,this)}};var Pm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xd(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Xd){this.g=void 0!==e?e:n.g,eh(this,n.j),this.s=n.s,th(this,n.i),km(this,n.m),this.l=n.l,e=n.h;var t=new _p;t.i=e.i,e.g&&(t.g=new rc(e.g),t.h=e.h),mv(this,t),this.o=n.o}else n&&(t=String(n).match(Pm))?(this.g=!!e,eh(this,t[1]||"",!0),this.s=nh(t[2]||""),th(this,t[3]||"",!0),km(this,t[4]),this.l=nh(t[5]||"",!0),mv(this,t[6]||"",!0),this.o=nh(t[7]||"")):(this.g=!!e,this.h=new _p(null,this.g))}function nu(n){return new Xd(n)}function eh(n,e,t){n.j=t?nh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function th(n,e,t){n.i=t?nh(e,!0):e}function km(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function mv(n,e,t){e instanceof _p?(n.h=e,function(n,e){e&&!n.j&&(ru(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(yp(this,r),Cv(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=mp(e,OI)),n.h=new _p(e,n.g))}function Dn(n,e,t){n.h.set(e,t)}function gp(n){return Dn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function nh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function mp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,IC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function IC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xd.prototype.toString=function(){var n=[],e=this.j;e&&n.push(mp(e,yv,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(mp(e,yv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(mp(t,"/"==t.charAt(0)?DC:vv,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",mp(t,PI)),n.join("")};var yv=/[#\/\?@]/g,vv=/[#\?:]/g,DC=/[#\?]/g,OI=/[#\?@]/g,PI=/#/g;function _p(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ru(n){n.g||(n.g=new rc,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var c=n[t].substring(0,r);o=n[t].substring(r+1)}else c=n[t];e(c,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function yp(n,e){ru(n),e=Cl(n,e),tu(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,tu((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&gv(n)))}function wv(n,e){return ru(n),e=Cl(n,e),tu(n.g.h,e)}function Cv(n,e,t){yp(n,e),0<t.length&&(n.i=null,n.g.set(Cl(n,e),Wi(t)),n.h+=t.length)}function Cl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ev(n){this.l=n||SC,n=Dt.PerformanceNavigationTiming?0<(n=Dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ea&&Dt.g.Ea()&&Dt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=_p.prototype).add=function(n,e){ru(this),this.i=null,n=Cl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ye.forEach=function(n,e){ru(this),this.g.forEach(function(t,r){Kw(t,function(o){n.call(e,o,r,this)},this)},this)},Ye.T=function(){ru(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],c=0;c<o.length;c++)t.push(e[r]);return t},Ye.R=function(n){ru(this);var e=[];if("string"==typeof n)wv(this,n)&&(e=Yw(e,this.g.get(Cl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Yw(e,n[t])}return e},Ye.set=function(n,e){return ru(this),this.i=null,wv(this,n=Cl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ye.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var c=0;c<r.length;c++){var f=o;""!==r[c]&&(f+="="+encodeURIComponent(String(r[c]))),n.push(f)}}return this.i=n.join("&")};var SC=10;function bv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function kI(n){return n.h?1:n.g?n.g.size:0}function Iv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Dv(n,e){n.g?n.g.add(e):n.h=e}function Tv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function xC(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Wi(n.i)}function Qn(){}function MC(){this.g=new Qn}function NI(n,e,t){const r=t||"";try{pp(n,function(o,c){let f=o;Fd(o)&&(f=nc(o)),e.push(r+c+"="+encodeURIComponent(f))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function vp(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(c){}}function wp(n){this.l=n.$b||null,this.j=n.ib||!1}function Cp(n,e){Ln.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Nm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ev.prototype.cancel=function(){if(this.i=xC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Qn.prototype.stringify=function(n){return Dt.JSON.stringify(n,void 0)},Qn.prototype.parse=function(n){return Dt.JSON.parse(n,void 0)},kr(wp,cv),wp.prototype.g=function(){return new Cp(this.l,this.j)},wp.prototype.i=function(n){return function(){return n}}({}),kr(Cp,Ln);var Nm=0;function El(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Ep(n){n.readyState=4,n.l=null,n.j=null,n.A=null,bp(n)}function bp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ye=Cp.prototype).open=function(n,e){if(this.readyState!=Nm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,bp(this)},Ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Dt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ep(this)),this.readyState=Nm},Ye.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,bp(this)),this.g&&(this.readyState=3,bp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Dt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;El(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ye.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ep(this):bp(this),3==this.readyState&&El(this)}},Ye.Ua=function(n){this.g&&(this.response=this.responseText=n,Ep(this))},Ye.Ta=function(n){this.g&&(this.response=n,Ep(this))},Ye.ha=function(){this.g&&Ep(this)},Ye.setRequestHeader=function(n,e){this.v.append(n,e)},Ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Cp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var RC=Dt.JSON.parse;function hr(n){Ln.call(this),this.headers=new rc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Av,this.K=this.L=!1}kr(hr,Ln);var Av="",GA=/^https?$/i,OC=["POST","PUT"];function Wo(n){return"content-type"==n.toLowerCase()}function PC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,kC(n),Qi(n)}function kC(n){n.D||(n.D=!0,qn(n,"complete"),qn(n,"error"))}function bo(n){if(n.h&&void 0!==fl&&(!n.C[1]||4!=Ko(n)||2!=n.ba()))if(n.v&&4==Ko(n))Am(n.Fa,0,n);else if(qn(n,"readystatechange"),4==Ko(n)){n.h=!1;try{const _=n.ba();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===_){var o=String(n.H).match(Pm)[1]||null;if(!o&&Dt.self&&Dt.self.location){var c=Dt.self.location.protocol;o=c.substr(0,c.length-1)}r=!GA.test(o?o.toLowerCase():"")}t=r}if(t)qn(n,"complete"),qn(n,"success");else{n.m=6;try{var f=2<Ko(n)?n.g.statusText:""}catch(C){f=""}n.j=f+" ["+n.ba()+"]",kC(n)}}finally{Qi(n)}}}function Qi(n,e){if(n.g){Ws(n);const t=n.g,r=n.C[0]?Nd:null;n.g=null,n.C=null,e||qn(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Ws(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Dt.clearTimeout(n.A),n.A=null)}function Ko(n){return n.g?n.g.readyState:0}function xv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Av:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Mv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return ev(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Dn(n,e,t))}function Ip(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function NC(n){this.za=0,this.l=[],this.h=new Sm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ip("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ip("baseRetryDelayMs",5e3,n),this.$a=Ip("retryDelaySeedMs",1e4,n),this.Ya=Ip("forwardChannelMaxRetries",2,n),this.ra=Ip("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Ev(n&&n.concurrentRequestLimit),this.Ca=new MC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Dp(n){if(FC(n),3==n.G){var e=n.V++,t=nu(n.F);Dn(t,"SID",n.J),Dn(t,"RID",e),Dn(t,"TYPE","terminate"),sc(n,t),(e=new Yd(n,n.h,e,void 0)).K=2,e.v=gp(nu(t)),t=!1,Dt.navigator&&Dt.navigator.sendBeacon&&(t=Dt.navigator.sendBeacon(e.v.toString(),"")),!t&&Dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Lv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),vl(e)}Nv(n)}function ic(n){n.g&&(Tp(n),n.g.cancel(),n.g=null)}function FC(n){ic(n),n.u&&(Dt.clearTimeout(n.u),n.u=null),rh(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Dt.clearTimeout(n.m),n.m=null)}function Fm(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Lm(n)}function Lm(n){bv(n.i)||n.m||(n.m=!0,bm(n.Ha,n),n.C=0)}function Rv(n,e){var t;t=e?e.m:n.V++;const r=nu(n.F);Dn(r,"SID",n.J),Dn(r,"RID",t),Dn(r,"AID",n.U),sc(n,r),n.o&&n.s&&Mv(r,n.o,n.s),t=new Yd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=UC(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Dv(n.i,t),hv(t,r,e)}function sc(n,e){n.j&&pp({},function(t,r){Dn(e,r,t)})}function UC(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Pr(n.j.Oa,n.j,n):null;e:{var o=n.l;let c=-1;for(;;){const f=["count="+t];-1==c?0<t?(c=o[0].h,f.push("ofs="+c)):c=0:f.push("ofs="+c);let _=!0;for(let C=0;C<t;C++){let T=o[C].h;const R=o[C].g;if(T-=c,0>T)c=Math.max(0,o[C].h-100),_=!1;else try{NI(R,f,"req"+T+"_")}catch(O){r&&r(R)}}if(_){r=f.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Ov(n){n.g||n.u||(n.Y=1,bm(n.Ga,n),n.A=0)}function Um(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=dp(Pr(n.Ga,n),kv(n,n.A)),n.A++,0))}function Tp(n){null!=n.B&&(Dt.clearTimeout(n.B),n.B=null)}function Ap(n){n.g=new Yd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=nu(n.oa);Dn(e,"RID","rpc"),Dn(e,"SID",n.J),Dn(e,"CI",n.N?"0":"1"),Dn(e,"AID",n.U),sc(n,e),Dn(e,"TYPE","xmlhttp"),n.o&&n.s&&Mv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=gp(nu(e)),t.s=null,t.U=!0,fv(t,n)}function rh(n){null!=n.v&&(Dt.clearTimeout(n.v),n.v=null)}function Pv(n,e){var t=null;if(n.g==e){rh(n),Tp(n),n.g=null;var r=2}else{if(!Iv(n.i,e))return;t=e.D,Tv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;qn(r=zd(),new SI(r,t,e,o)),Lm(n)}else Ov(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(kI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=dp(Pr(n.Ha,n,e),kv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Um(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:oc(n,5);break;case 4:oc(n,10);break;case 3:oc(n,6);break;default:oc(n,2)}}function kv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function oc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Pr(n.jb,n);t||(t=new Xd("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||eh(t,"https"),gp(t)),function(n,e){const t=new Sm;if(Dt.Image){const r=new Image;r.onload=Xa(vp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Xa(vp,t,r,"TestLoadImage: error",!1,e),r.onabort=Xa(vp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xa(vp,t,r,"TestLoadImage: timeout",!1,e),Dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Yi(2);n.G=0,n.j&&n.j.va(e),Nv(n),FC(n)}function Nv(n){n.G=0,n.I=-1,n.j&&((0!=xC(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Wi(n.l),n.l.length=0),n.j.ua())}function Fv(n,e,t){let r=function(n){return n instanceof Xd?nu(n):new Xd(n,void 0)}(t);if(""!=r.i)e&&th(r,e+"."+r.i),km(r,r.m);else{const o=Dt.location;r=function(n,e,t,r){var o=new Xd(null,void 0);return n&&eh(o,n),e&&th(o,e),t&&km(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&ev(n.aa,function(o,c){Dn(r,c,o)}),t=n.sa,(e=n.D)&&t&&Dn(r,e,t),Dn(r,"VER",n.ma),sc(n,r),r}function Lv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new hr(t&&n.Ba&&!n.qa?new wp({ib:!0}):n.qa)).L=n.H,e}function Uv(){}function Vm(){if(rp&&!(10<=Number(HA)))throw Error("Environmental error: no available transport.")}function ys(n,e){Ln.call(this),this.g=new NC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Ud(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ud(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ih(this)}function VC(n){lv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function BC(){Mm.call(this),this.status=1}function ih(n){this.g=n}(Ye=hr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Kd.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Kd),this.g.onreadystatechange=Pr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void PC(this,c)}n=t||"";const o=new rc(this.headers);r&&pp(r,function(c,f){o.set(f,c)}),r=function(n){e:{var e=Wo;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Dt.FormData&&n instanceof Dt.FormData,!(0<=Ww(OC,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(c,f){this.g.setRequestHeader(f,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ws(this),0<this.B&&((this.K=function(n){return rp&&sC()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pr(this.pa,this)):this.A=Am(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){PC(this,c)}},Ye.pa=function(){void 0!==fl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qn(this,"timeout"),this.abort(8))},Ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,qn(this,"complete"),qn(this,"abort"),Qi(this))},Ye.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qi(this,!0)),hr.Z.M.call(this)},Ye.Fa=function(){this.s||(this.F||this.v||this.l?bo(this):this.cb())},Ye.cb=function(){bo(this)},Ye.ba=function(){try{return 2<Ko(this)?this.g.status:-1}catch(n){return-1}},Ye.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ye.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),RC(e)}},Ye.Da=function(){return this.m},Ye.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=NC.prototype).ma=8,Ye.G=1,Ye.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ye.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Yd(this,this.h,n,void 0);let c=this.s;if(this.P&&(c?(c=Xw(c),_I(c,this.P)):c=this.P),null===this.o&&(o.H=c),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=UC(this,o,e),Dn(t=nu(this.F),"RID",n),Dn(t,"CVER",22),this.D&&Dn(t,"X-HTTP-Session-Id",this.D),sc(this,t),this.o&&c&&Mv(t,this.o,c),Dv(this.i,o),this.Ra&&Dn(t,"TYPE","init"),this.ja?(Dn(t,"$req",e),Dn(t,"SID","null"),o.$=!0,hv(o,t,null)):hv(o,t,e),this.G=2}}else 3==this.G&&(n?Rv(this,n):0==this.l.length||bv(this.i)||Rv(this))},Ye.Ga=function(){if(this.u=null,Ap(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=dp(Pr(this.bb,this),n)}},Ye.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Yi(10),ic(this),Ap(this))},Ye.ab=function(){null!=this.v&&(this.v=null,ic(this),Um(this),Yi(19))},Ye.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Yi(2)):(this.h.info("Failed to ping google.com"),Yi(1))},(Ye=Uv.prototype).xa=function(){},Ye.wa=function(){},Ye.va=function(){},Ye.ua=function(){},Ye.Oa=function(){},Vm.prototype.g=function(n,e){return new ys(n,e)},kr(ys,Ln),ys.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),bm(Pr(n.hb,n,e))),Yi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Fv(n,null,n.W),Lm(n)},ys.prototype.close=function(){Dp(this.g)},ys.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Fm(this.g,e)}else this.v?((e={}).__data__=nc(n),Fm(this.g,e)):Fm(this.g,n)},ys.prototype.M=function(){this.g.j=null,delete this.j,Dp(this.g),delete this.g,ys.Z.M.call(this)},kr(VC,lv),kr(BC,Mm),kr(ih,Uv),ih.prototype.xa=function(){qn(this.g,"a")},ih.prototype.wa=function(n){qn(this.g,new VC(n))},ih.prototype.va=function(n){qn(this.g,new BC(n))},ih.prototype.ua=function(){qn(this.g,"b")},Vm.prototype.createWebChannel=Vm.prototype.g,ys.prototype.send=ys.prototype.u,ys.prototype.open=ys.prototype.m,ys.prototype.close=ys.prototype.close,hp.NO_ERROR=0,hp.TIMEOUT=8,hp.HTTP_ERROR=6,xI.COMPLETE="complete",_C.EventType=Wd,Wd.OPEN="a",Wd.CLOSE="b",Wd.ERROR="c",Wd.MESSAGE="d",Ln.prototype.listen=Ln.prototype.N,hr.prototype.listenOnce=hr.prototype.O,hr.prototype.getLastError=hr.prototype.La,hr.prototype.getLastErrorCode=hr.prototype.Da,hr.prototype.getStatus=hr.prototype.ba,hr.prototype.getResponseJson=hr.prototype.Qa,hr.prototype.getResponseText=hr.prototype.ga,hr.prototype.send=hr.prototype.ea;var UI=zo.createWebChannelTransport=function(){return new Vm},VI=zo.getStatEventTarget=function(){return zd()},Vv=zo.ErrorCode=hp,BI=zo.EventType=xI,jI=zo.Event=Gd,jC=zo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ZI=zo.FetchXmlHttpFactory=wp,Bm=zo.WebChannel=_C,qI=zo.XhrIo=hr;const ZC="@firebase/firestore";class ei{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ei.UNAUTHENTICATED=new ei(null),ei.GOOGLE_CREDENTIALS=new ei("google-credentials-uid"),ei.FIRST_PARTY=new ei("first-party-uid"),ei.MOCK_USER=new ei("mock-user");let sh="9.6.1";const ac=new $o.Yd("@firebase/firestore");function jm(){return ac.logLevel}function Ne(n,...e){if(ac.logLevel<=$o.in.DEBUG){const t=e.map(Zm);ac.debug(`Firestore (${sh}): ${n}`,...t)}}function Jn(n,...e){if(ac.logLevel<=$o.in.ERROR){const t=e.map(Zm);ac.error(`Firestore (${sh}): ${n}`,...t)}}function oh(n,...e){if(ac.logLevel<=$o.in.WARN){const t=e.map(Zm);ac.warn(`Firestore (${sh}): ${n}`,...t)}}function Zm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${sh}) INTERNAL ASSERTION FAILED: `+n;throw Jn(e),new Error(e)}function vt(n,e){n||st()}function Ze(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class HC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ah{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ei.UNAUTHENTICATED))}shutdown(){}}class zA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Bv{constructor(e){this.t=e,this.currentUser=ei.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const c=T=>this.i!==o?(o=this.i,t(T)):Promise.resolve();let f=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Fr,e.enqueueRetryable(()=>c(this.currentUser))};const _=()=>{const T=f;e.enqueueRetryable((0,he.Z)(function*(){yield T.promise,yield c(r.currentUser)}))},C=T=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(T=>C(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?C(T):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Fr)}},0),_()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt("string"==typeof r.accessToken),new HC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vt(null===e||"string"==typeof e),new ei(e)}}class WA{constructor(e,t,r){this.type="FirstParty",this.user=ei.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class GC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new WA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ei.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KA{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=o=>{e.enqueueRetryable(()=>{return null!=(c=o).error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`),t(c.token);var c})};const r=o=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?r(o):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt("string"==typeof t.token),new jv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class vs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function $I(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}vs.I=-1;class zC{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=$I(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function uh(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Sp(n){return n+"\0"}class Xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rt(e)}static min(){return new rt(new Xn(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function HI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function uc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function WC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class xp{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===xp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=e.get(o),f=t.get(o);if(c<f)return-1;if(c>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends xp{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const KC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lr extends xp{construct(e,t,r){return new Lr(e,t,r)}static isValidIdentifier(e){return KC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Lr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(0===r.length)throw new De(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let f=!1;for(;o<e.length;){const _=e[o];if("\\"===_){if(o+1===e.length)throw new De(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const C=e[o+1];if("\\"!==C&&"."!==C&&"`"!==C)throw new De(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=C,o+=2}else"`"===_?(f=!f,o++):"."!==_||f?(r+=_,o++):(c(),o++)}if(c(),f)throw new De(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lr(t)}static emptyPath(){return new Lr([])}}class bl{constructor(e){this.fields=e,e.sort(Lr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ur(t)}static fromUint8Array(e){const t=function(r){let o="";for(let c=0;c<r.length;++c)o+=String.fromCharCode(r[c]);return o}(e);return new Ur(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const zI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ks(n){if(vt(!!n),"string"==typeof n){let e=0;const t=zI.exec(n);if(vt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fr(n.seconds),nanos:fr(n.nanos)}}function fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ch(n){return"string"==typeof n?Ur.fromBase64String(n):Ur.fromUint8Array(n)}function Zv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Mp(n){const e=n.mapValue.fields.__previous_value__;return Zv(e)?Mp(e):e}function lh(n){const e=Ks(n.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}function cc(n){return null==n}function Rp(n){return 0===n&&1/n==-1/0}function YC(n){return"number"==typeof n&&Number.isInteger(n)&&!Rp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class nt{constructor(e){this.path=e}static fromPath(e){return new nt(Xt.fromString(e))}static fromName(e){return new nt(Xt.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new Xt(e.slice()))}}function Io(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zv(n)?4:10:st()}function Yo(n,e){const t=Io(n);if(t!==Io(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lh(n).isEqual(lh(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const c=Ks(r.timestampValue),f=Ks(o.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ch(n.bytesValue).isEqual(ch(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return fr(r.geoPointValue.latitude)===fr(o.geoPointValue.latitude)&&fr(r.geoPointValue.longitude)===fr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return fr(r.integerValue)===fr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const c=fr(r.doubleValue),f=fr(o.doubleValue);return c===f?Rp(c)===Rp(f):isNaN(c)&&isNaN(f)}return!1}(n,e);case 9:return uh(n.arrayValue.values||[],e.arrayValue.values||[],Yo);case 10:return function(r,o){const c=r.mapValue.fields||{},f=o.mapValue.fields||{};if(HI(c)!==HI(f))return!1;for(const _ in c)if(c.hasOwnProperty(_)&&(void 0===f[_]||!Yo(c[_],f[_])))return!1;return!0}(n,e);default:return st()}var o}function Op(n,e){return void 0!==(n.values||[]).find(t=>Yo(t,e))}function dh(n,e){const t=Io(n),r=Io(e);if(t!==r)return Nt(t,r);switch(t){case 0:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(o,c){const f=fr(o.integerValue||o.doubleValue),_=fr(c.integerValue||c.doubleValue);return f<_?-1:f>_?1:f===_?0:isNaN(f)?isNaN(_)?0:-1:1}(n,e);case 3:return qv(n.timestampValue,e.timestampValue);case 4:return qv(lh(n),lh(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(o,c){const f=ch(o),_=ch(c);return f.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const f=o.split("/"),_=c.split("/");for(let C=0;C<f.length&&C<_.length;C++){const T=Nt(f[C],_[C]);if(0!==T)return T}return Nt(f.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const f=Nt(fr(o.latitude),fr(c.latitude));return 0!==f?f:Nt(fr(o.longitude),fr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,c){const f=o.values||[],_=c.values||[];for(let C=0;C<f.length&&C<_.length;++C){const T=dh(f[C],_[C]);if(T)return T}return Nt(f.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,c){const f=o.fields||{},_=Object.keys(f),C=c.fields||{},T=Object.keys(C);_.sort(),T.sort();for(let R=0;R<_.length&&R<T.length;++R){const O=Nt(_[R],T[R]);if(0!==O)return O;const q=dh(f[_[R]],C[T[R]]);if(0!==q)return q}return Nt(_.length,T.length)}(n.mapValue,e.mapValue);default:throw st()}}function qv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=Ks(n),r=Ks(e),o=Nt(t.seconds,r.seconds);return 0!==o?o:Nt(t.nanos,r.nanos)}function qm(n){return $m(n)}function $m(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ks(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ch(n.bytesValue).toBase64():"referenceValue"in n?nt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",c=!0;for(const f of r.values||[])c?c=!1:o+=",",o+=$m(f);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let c="{",f=!0;for(const _ of o)f?f=!1:c+=",",c+=`${_}:${$m(r.fields[_])}`;return c+"}"}(n.mapValue):st();var e}function Hm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gm(n){return!!n&&"integerValue"in n}function $v(n){return!!n&&"arrayValue"in n}function QC(n){return!!n&&"nullValue"in n}function WI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hv(n){return!!n&&"mapValue"in n}function zm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return uc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zm(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Si{constructor(e){this.value=e}static empty(){return new Si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zm(t)}setAll(e){let t=Lr.emptyPath(),r={},o=[];e.forEach((f,_)=>{if(!t.isImmediateParentOf(_)){const C=this.getFieldsMap(t);this.applyChanges(C,r,o),r={},o=[],t=_.popLast()}f?r[_.lastSegment()]=zm(f):o.push(_.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());Hv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Hv(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){uc(t,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new Si(zm(this.value))}}function Gv(n){const e=[];return uc(n.fields,(t,r)=>{const o=new Lr([t]);if(Hv(r)){const c=Gv(r.mapValue).fields;if(0===c.length)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)}),new bl(e)}class Cn{constructor(e,t,r,o,c){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Cn(e,0,rt.min(),Si.empty(),0)}static newFoundDocument(e,t,r){return new Cn(e,1,t,r,0)}static newNoDocument(e,t){return new Cn(e,2,t,Si.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,Si.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Cn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class KI{constructor(e,t=null,r=[],o=[],c=null,f=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=f,this.endAt=_,this.R=null}}function JC(n,e=null,t=[],r=[],o=null,c=null,f=null){return new KI(n,e,t,r,o,c,f)}function hh(n){const e=Ze(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+qm(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),cc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Ym(e.startAt)),e.endAt&&(t+="|ub:",t+=Ym(e.endAt)),e.R=t}return e.R}function Wm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!tD(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Yo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nE(n.startAt,e.startAt)&&nE(n.endAt,e.endAt)}function Km(n){return nt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class xi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new QI(e,t,r):"array-contains"===t?new fh(e,r):"in"===t?new XI(e,r):"not-in"===t?new tE(e,r):"array-contains-any"===t?new eD(e,r):new xi(e,t,r)}static P(e,t,r){return"in"===t?new XC(e,r):new JI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(dh(t,this.value)):null!==t&&Io(this.value)===Io(t)&&this.v(dh(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class QI extends xi{constructor(e,t,r){super(e,t,r),this.key=nt.fromName(r.referenceValue)}matches(e){const t=nt.comparator(e.key,this.key);return this.v(t)}}class XC extends xi{constructor(e,t){super(e,"in",t),this.keys=eE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JI extends xi{constructor(e,t){super(e,"not-in",t),this.keys=eE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>nt.fromName(r.referenceValue))}class fh extends xi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $v(t)&&Op(t.arrayValue,this.value)}}class XI extends xi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Op(this.value.arrayValue,t)}}class tE extends xi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Op(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Op(this.value.arrayValue,t)}}class eD extends xi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$v(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Op(this.value.arrayValue,r))}}class ph{constructor(e,t){this.position=e,this.before=t}}function Ym(n){return`${n.before?"b":"a"}:${n.position.map(e=>qm(e)).join(",")}`}class Il{constructor(e,t="asc"){this.field=e,this.dir=t}}function tD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Qm(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const c=e[o],f=n.position[o];if(r=c.field.isKeyField()?nt.comparator(nt.fromName(f.referenceValue),t.key):dh(f,t.data.field(c.field)),"desc"===c.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function nE(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yo(n.position[t],e.position[t]))return!1;return!0}class Qo{constructor(e,t=null,r=[],o=[],c=null,f="F",_=null,C=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=f,this.startAt=_,this.endAt=C,this.S=null,this.D=null}}function zv(n,e,t,r,o,c,f,_){return new Qo(n,e,t,r,o,c,f,_)}function gh(n){return new Qo(n)}function Jm(n){return!cc(n.limit)&&"F"===n.limitType}function Xm(n){return!cc(n.limit)&&"L"===n.limitType}function kp(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Wv(n){for(const e of n.filters)if(e.V())return e.field;return null}function e_(n){return null!==n.collectionGroup}function mh(n){const e=Ze(n);if(null===e.S){e.S=[];const t=Wv(e),r=kp(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new Il(t)),e.S.push(new Il(Lr.keyField(),"asc"));else{let o=!1;for(const c of e.explicitOrderBy)e.S.push(c),c.field.isKeyField()&&(o=!0);if(!o){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Il(Lr.keyField(),c))}}}return e.S}function Ys(n){const e=Ze(n);if(!e.D)if("F"===e.limitType)e.D=JC(e.path,e.collectionGroup,mh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of mh(e))t.push(new Il(c.field,"desc"===c.dir?"asc":"desc"));const r=e.endAt?new ph(e.endAt.position,!e.endAt.before):null,o=e.startAt?new ph(e.startAt.position,!e.startAt.before):null;e.D=JC(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.D}function rE(n,e,t){return new Qo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Np(n,e){return Wm(Ys(n),Ys(e))&&n.limitType===e.limitType}function iE(n){return`${hh(Ys(n))}|lt:${n.limitType}`}function Kv(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${qm(r.value)}`;var r}).join(", ")}]`),cc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+Ym(n.startAt)),n.endAt&&(e+=", endAt: "+Ym(n.endAt)),`Target(${e})`}(Ys(n))}; limitType=${n.limitType})`}function Fp(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):nt.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!Qm(t.startAt,mh(t),r)||t.endAt&&Qm(t.endAt,mh(t),r)));var t,r}function sE(n){return(e,t)=>{let r=!1;for(const o of mh(n)){const c=oE(o,e,t);if(0!==c)return c;r=r||o.field.isKeyField()}return 0}}function oE(n,e,t){const r=n.field.isKeyField()?nt.comparator(e.key,t.key):function(o,c,f){const _=c.data.field(o),C=f.data.field(o);return null!==_&&null!==C?dh(_,C):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function Yv(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rp(e)?"-0":e}}function aE(n){return{integerValue:""+n}}function uE(n,e){return YC(e)?aE(e):Yv(n,e)}class Lp{constructor(){this._=void 0}}function nD(n,e,t){return n instanceof lc?function(r,o){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(c.fields.__previous_value__=o),{mapValue:c}}(t,e):n instanceof iu?Qv(n,e):n instanceof su?lE(n,e):function(r,o){const c=cE(r,o),f=t_(c)+t_(r.N);return Gm(c)&&Gm(r.N)?aE(f):Yv(r.k,f)}(n,e)}function rD(n,e,t){return n instanceof iu?Qv(n,e):n instanceof su?lE(n,e):t}function cE(n,e){return n instanceof _h?Gm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class lc extends Lp{}class iu extends Lp{constructor(e){super(),this.elements=e}}function Qv(n,e){const t=dE(e);for(const r of n.elements)t.some(o=>Yo(o,r))||t.push(r);return{arrayValue:{values:t}}}class su extends Lp{constructor(e){super(),this.elements=e}}function lE(n,e){let t=dE(e);for(const r of n.elements)t=t.filter(o=>!Yo(o,r));return{arrayValue:{values:t}}}class _h extends Lp{constructor(e,t){super(),this.k=e,this.N=t}}function t_(n){return fr(n.integerValue||n.doubleValue)}function dE(n){return $v(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class yh{constructor(e,t){this.field=e,this.transform=t}}class hE{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Up(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Jv{}function sD(n,e,t){n instanceof Vp?function(r,o,c){const f=r.value.clone(),_=fE(r.fieldTransforms,o,c.transformResults);f.setAll(_),o.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Al?function(r,o,c){if(!Up(r.precondition,o))return void o.convertToUnknownDocument(c.version);const f=fE(r.fieldTransforms,o,c.transformResults),_=o.data;_.setAll(Xv(r)),_.setAll(f),o.convertToFoundDocument(c.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Dl(n,e,t){var o;n instanceof Vp?function(r,o,c){if(!Up(r.precondition,o))return;const f=r.value.clone(),_=pE(r.fieldTransforms,c,o);f.setAll(_),o.convertToFoundDocument(vh(o),f).setHasLocalMutations()}(n,e,t):n instanceof Al?function(r,o,c){if(!Up(r.precondition,o))return;const f=pE(r.fieldTransforms,c,o),_=o.data;_.setAll(Xv(r)),_.setAll(f),o.convertToFoundDocument(vh(o),_).setHasLocalMutations()}(n,e,t):Up(n.precondition,o=e)&&o.convertToNoDocument(rt.min())}function oD(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),c=cE(r.transform,o||null);null!=c&&(null==t&&(t=Si.empty()),t.set(r.field,c))}return t||null}function Tl(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&uh(t,r,(o,c)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof iu&&r instanceof iu||t instanceof su&&r instanceof su?uh(t.elements,r.elements,Yo):t instanceof _h&&r instanceof _h?Yo(t.N,r.N):t instanceof lc&&r instanceof lc);var t,r}(o,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function vh(n){return n.isFoundDocument()?n.version:rt.min()}class Vp extends Jv{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Al extends Jv{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}}function Xv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function fE(n,e,t){const r=new Map;vt(n.length===t.length);for(let o=0;o<t.length;o++){const c=n[o],f=c.transform,_=e.data.field(c.field);r.set(c.field,rD(f,_,t[o]))}return r}function pE(n,e,t){const r=new Map;for(const o of n){const c=o.transform,f=t.data.field(o.field);r.set(o.field,nD(c,f,e))}return r}class Bp extends Jv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class e0 extends Jv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class gE{constructor(e){this.count=e}}var er,jt;function jp(n){switch(n){default:return st();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function wh(n){if(void 0===n)return Jn("GRPC error has no .code"),le.UNKNOWN;switch(n){case er.OK:return le.OK;case er.CANCELLED:return le.CANCELLED;case er.UNKNOWN:return le.UNKNOWN;case er.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case er.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case er.INTERNAL:return le.INTERNAL;case er.UNAVAILABLE:return le.UNAVAILABLE;case er.UNAUTHENTICATED:return le.UNAUTHENTICATED;case er.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case er.NOT_FOUND:return le.NOT_FOUND;case er.ALREADY_EXISTS:return le.ALREADY_EXISTS;case er.PERMISSION_DENIED:return le.PERMISSION_DENIED;case er.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case er.ABORTED:return le.ABORTED;case er.OUT_OF_RANGE:return le.OUT_OF_RANGE;case er.UNIMPLEMENTED:return le.UNIMPLEMENTED;case er.DATA_LOSS:return le.DATA_LOSS;default:return st()}}(jt=er||(er={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";class br{constructor(e,t){this.comparator=e,this.root=t||Vr.EMPTY}insert(e,t){return new br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zp(this.root,e,this.comparator,!0)}}class Zp{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vr{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=null!=r?r:Vr.RED,this.left=null!=o?o:Vr.EMPTY,this.right=null!=c?c:Vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new Vr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===c?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Vr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1,Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Vr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(e){this.comparator=e,this.data=new br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mE(this.data.getIterator())}getIteratorFrom(e){return new mE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(0!==this.comparator(o,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $n(this.comparator);return t.data=e,t}}class mE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const aD=new br(nt.comparator);function Ji(){return aD}const uD=new br(nt.comparator);function _E(){return uD}const cD=new br(nt.comparator);function yE(){return cD}const Ch=new $n(nt.comparator);function un(...n){let e=Ch;for(const t of n)e=e.add(t);return e}const Eh=new $n(Nt);function t0(){return Eh}class bh{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,qp.createSynthesizedTargetChangeForCurrentChange(e,t)),new bh(rt.min(),r,t0(),Ji(),un())}}class qp{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t){return new qp(Ur.EMPTY_BYTE_STRING,t,un(),un(),un())}}class n0{constructor(e,t,r,o){this.$=e,this.removedTargetIds=t,this.key=r,this.F=o}}class r0{constructor(e,t){this.targetId=e,this.O=t}}class lD{constructor(e,t,r=Ur.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class s0{constructor(){this.M=0,this.L=u0(),this.B=Ur.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=un(),t=un(),r=un();return this.L.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:st()}}),new qp(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=u0()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class o0{constructor(e){this.et=e,this.nt=new Map,this.st=Ji(),this.it=a0(),this.rt=new $n(Nt)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,o)=>{this.lt(o)&&t(o)})}dt(e){const t=e.targetId,r=e.O.count,o=this.wt(t);if(o){const c=o.target;if(Km(c))if(0===r){const f=new nt(c.path);this.ct(t,f,Cn.newNoDocument(f,rt.min()))}else vt(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((c,f)=>{const _=this.wt(f);if(_){if(c.current&&Km(_.target)){const C=new nt(_.target.path);null!==this.st.get(C)||this.yt(f,C)||this.ct(f,C,Cn.newNoDocument(C,e))}c.j&&(t.set(f,c.G()),c.H())}});let r=un();this.it.forEach((c,f)=>{let _=!0;f.forEachWhile(C=>{const T=this.wt(C);return!T||2===T.purpose||(_=!1,!1)}),_&&(r=r.add(c))});const o=new bh(e,t,this.rt,this.st,r);return this.st=Ji(),this.it=a0(),this.rt=new $n(Nt),o}at(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.lt(e))return;const o=this.ht(e);this.yt(e,t)?o.J(t,1):o.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new s0,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new $n(Nt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new s0),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function a0(){return new br(nt.comparator)}function u0(){return new br(nt.comparator)}const vE={asc:"ASCENDING",desc:"DESCENDING"},dD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class wE{constructor(e,t){this.databaseId=e,this.C=t}}function Ih(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CE(n,e){return n.C?e.toBase64():e.toUint8Array()}function hD(n,e){return Ih(n,e.toTimestamp())}function Br(n){return vt(!!n),rt.fromTimestamp(function(e){const t=Ks(e);return new Xn(t.seconds,t.nanos)}(n))}function c0(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Dh(n){const e=Xt.fromString(n);return vt(p0(e)),e}function Th(n,e){return c0(n.databaseId,e.path)}function Do(n,e){const t=Dh(e);if(t.get(1)!==n.databaseId.projectId)throw new De(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new nt(d0(t))}function n_(n,e){return c0(n.databaseId,e)}function l0(n){const e=Dh(n);return 4===e.length?Xt.emptyPath():d0(e)}function Ah(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function d0(n){return vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function EE(n,e,t){return{name:Th(n,e),fields:t.value.mapValue.fields}}function h0(n,e,t){const r=Do(n,e.name),o=Br(e.updateTime),c=new Si({mapValue:{fields:e.fields}}),f=Cn.newFoundDocument(r,o,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function r_(n,e){let t;if(e instanceof Vp)t={update:EE(n,e.key,e.value)};else if(e instanceof Bp)t={delete:Th(n,e.key)};else if(e instanceof Al)t={update:EE(n,e.key,e.data),updateMask:DE(e.fieldMask)};else{if(!(e instanceof e0))return st();t={verify:Th(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const f=c.transform;if(f instanceof lc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof iu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof su)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof _h)return{fieldPath:c.field.canonicalString(),increment:f.N};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:hD(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:st()),t;var o}function f0(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?pr.updateTime(Br(o.updateTime)):void 0!==o.exists?pr.exists(o.exists):pr.none():pr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(c,f){let _=null;"setToServerValue"in f?(vt("REQUEST_TIME"===f.setToServerValue),_=new lc):"appendMissingElements"in f?_=new iu(f.appendMissingElements.values||[]):"removeAllFromArray"in f?_=new su(f.removeAllFromArray.values||[]):"increment"in f?_=new _h(c,f.increment):st();const C=Lr.fromServerFormat(f.fieldPath);return new yh(C,_)}(n,o)):[];var o;if(e.update){const o=Do(n,e.update.name),c=new Si({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new bl((e.updateMask.fieldPaths||[]).map(T=>Lr.fromServerFormat(T)));return new Al(o,c,f,t,r)}return new Vp(o,c,t,r)}if(e.delete){const o=Do(n,e.delete);return new Bp(o,t)}if(e.verify){const o=Do(n,e.verify);return new e0(o,t)}return st()}function bE(n,e){return{documents:[n_(n,e.path)]}}function i_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=n_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=n_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(_){if(0===_.length)return;const C=_.map(T=>function(R){if("=="===R.op){if(WI(R.value))return{unaryFilter:{field:ou(R.field),op:"IS_NAN"}};if(QC(R.value))return{unaryFilter:{field:ou(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(WI(R.value))return{unaryFilter:{field:ou(R.field),op:"IS_NOT_NAN"}};if(QC(R.value))return{unaryFilter:{field:ou(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ou(R.field),op:_D(R.op),value:R.value}}}(T));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const c=function(_){if(0!==_.length)return _.map(C=>{return{field:ou((T=C).field),direction:mD(T.dir)};var T})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=(C=e.limit,n.C||cc(C)?C:{value:C});var C;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=Sh(e.startAt)),e.endAt&&(t.structuredQuery.endAt=Sh(e.endAt)),t}function To(n){let e=l0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){vt(1===r);const R=t.from[0];R.allDescendants?o=R.collectionId:e=e.child(R.collectionId)}let c=[];t.where&&(c=s_(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(R=>{return new Il(au((O=R).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let _=null;t.limit&&(_=function(R){let O;return O="object"==typeof R?R.value:R,cc(O)?null:O}(t.limit));let C=null;t.startAt&&(C=IE(t.startAt));let T=null;return t.endAt&&(T=IE(t.endAt)),zv(e,o,f,c,_,"F",C,T)}function s_(n){return n?void 0!==n.unaryFilter?[vD(n)]:void 0!==n.fieldFilter?[yD(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>s_(e)).reduce((e,t)=>e.concat(t)):st():[]}function Sh(n){return{before:n.before,values:n.position}}function IE(n){return new ph(n.values||[],!!n.before)}function mD(n){return vE[n]}function _D(n){return dD[n]}function ou(n){return{fieldPath:n.canonicalString()}}function au(n){return Lr.fromServerFormat(n.fieldPath)}function yD(n){return xi.create(au(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function vD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=au(n.unaryFilter.field);return xi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=au(n.unaryFilter.field);return xi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=au(n.unaryFilter.field);return xi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=au(n.unaryFilter.field);return xi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function DE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function p0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ws(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=AE(e)),e=TE(n.get(t),e);return AE(e)}function TE(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const c=n.charAt(o);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function AE(n){return n+"\x01\x01"}function uu(n){const e=n.length;if(vt(e>=2),2===e)return vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let o="";for(let c=0;c<e;){const f=n.indexOf("\x01",c);switch((f<0||f>t)&&st(),n.charAt(f+1)){case"\x01":const _=n.substring(c,f);let C;0===o.length?C=_:(o+=_,C=o,o=""),r.push(C);break;case"\x10":o+=n.substring(c,f),o+="\0";break;case"\x11":o+=n.substring(c,f+1);break;default:st()}c=f+2}return new Xt(r)}class YA{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Mi{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}Mi.store="owner",Mi.key="owner";class Jo{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Jo.store="mutationQueues",Jo.keyPath="userId";class Tn{constructor(e,t,r,o,c){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=c}}Tn.store="mutations",Tn.keyPath="batchId",Tn.userMutationsIndex="userMutationsIndex",Tn.userMutationsKeyPath=["userId","batchId"];class jr{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,ws(t)]}static key(e,t,r){return[e,ws(t),r]}}jr.store="documentMutations",jr.PLACEHOLDER=new jr;class g0{constructor(e,t){this.path=e,this.readTime=t}}class wD{constructor(e,t){this.path=e,this.version=t}}class Hn{constructor(e,t,r,o,c,f){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=c,this.parentPath=f}}Hn.store="remoteDocuments",Hn.readTimeIndex="readTimeIndex",Hn.readTimeIndexPath="readTime",Hn.collectionReadTimeIndex="collectionReadTimeIndex",Hn.collectionReadTimeIndexPath=["parentPath","readTime"];class Xo{constructor(e){this.byteSize=e}}Xo.store="remoteDocumentGlobal",Xo.key="remoteDocumentGlobalKey";class Xi{constructor(e,t,r,o,c,f,_){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=f,this.query=_}}Xi.store="targets",Xi.keyPath="targetId",Xi.queryTargetsIndexName="queryTargetsIndex",Xi.queryTargetsKeyPath=["canonicalId","targetId"];class Zr{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Zr.store="targetDocuments",Zr.keyPath=["targetId","path"],Zr.documentTargetsIndex="documentTargetsIndex",Zr.documentTargetsKeyPath=["path","targetId"];class Ri{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}Ri.key="targetGlobalKey",Ri.store="targetGlobal";class dc{constructor(e,t){this.collectionId=e,this.parent=t}}dc.store="collectionParents",dc.keyPath=["collectionId","parent"];class cu{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}cu.store="clientMetadata",cu.keyPath="clientId";class Sl{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Sl.store="bundles",Sl.keyPath="bundleId";class xl{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}xl.store="namedQueries",xl.keyPath="name";const CD=[Jo.store,Tn.store,jr.store,Hn.store,Xi.store,Mi.store,Ri.store,Zr.store,cu.store,Xo.store,dc.store,Sl.store,xl.store],m0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ae((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ae?t:Ae.resolve(t)}catch(t){return Ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.reject(t)}static resolve(e){return new Ae((t,r)=>{t(e)})}static reject(e){return new Ae((t,r)=>{r(e)})}static waitFor(e){return new Ae((t,r)=>{let o=0,c=0,f=!1;e.forEach(_=>{++o,_.next(()=>{++c,f&&c===o&&t()},C=>r(C))}),f=!0,c===o&&t()})}static or(e){let t=Ae.resolve(!1);for(const r of e)t=t.next(o=>o?Ae.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,c)=>{r.push(t.call(this,o,c))}),this.waitFor(r)}}class Hp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Fr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new ea(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const o=y0(r.target.error);this.It.reject(new ea(e,o))}}static open(e,t,r,o){try{return new Hp(t,e.transaction(o,r))}catch(c){throw new ea(t,c)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new ED(t)}}class Ao{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===Ao.Pt((0,ft.z$)())&&Jn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),xh(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,ft.hl)())return!1;if(Ao.vt())return!0;const e=(0,ft.z$)(),t=Ao.Pt(e),r=0<t&&t<10,o=Ao.Vt(e),c=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||c)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,he.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=f=>{r(f.target.result)},c.onblocked=()=>{o(new ea(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=f=>{const _=f.target.error;o("VersionError"===_.name?new De(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new De(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new ea(e,_))},c.onupgradeneeded=f=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.Rt.Nt(f.target.result,c.transaction,f.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var c=this;return(0,he.Z)(function*(){const f="readonly"===t;let _=0;for(;;){++_;try{c.db=yield c.Ct(e);const C=Hp.open(c.db,e,f?"readonly":"readwrite",r),T=o(C).catch(R=>(C.abort(R),Ae.reject(R))).toPromise();return T.catch(()=>{}),yield C.At,T}catch(C){const T="FirebaseError"!==C.name&&_<3;if(Ne("SimpleDb","Transaction failed with error:",C.message,"Retrying:",T),c.close(),!T)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Oi{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return xh(this.$t.delete())}}class ea extends De{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ml(n){return"IndexedDbTransactionError"===n.name}class ED{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xh(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),xh(this.store.add(e))}get(e){return xh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),xh(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),xh(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Ut(r,(c,f)=>{o.push(f)}).next(()=>o)}qt(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const o=this.cursor(r);return this.Ut(o,(c,f,_)=>_.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Ut(o,t)}Qt(e){const t=this.cursor({});return new Ae((r,o)=>{t.onerror=c=>{const f=y0(c.target.error);o(f)},t.onsuccess=c=>{const f=c.target.result;f?e(f.primaryKey,f.value).next(_=>{_?f.continue():r()}):r()}})}Ut(e,t){const r=[];return new Ae((o,c)=>{e.onerror=f=>{c(f.target.error)},e.onsuccess=f=>{const _=f.target.result;if(!_)return void o();const C=new Oi(_),T=t(_.primaryKey,_.value,C);if(T instanceof Ae){const R=T.catch(O=>(C.done(),Ae.reject(O)));r.push(R)}C.isDone?o():null===C.Mt?_.continue():_.continue(C.Mt)}}).next(()=>Ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xh(n){return new Ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=y0(r.target.error);t(o)}})}let Mh=!1;function y0(n){const e=Ao.Pt((0,ft.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Mh||(Mh=!0,setTimeout(()=>{throw r},0)),r}}return n}class o_ extends _0{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function es(n,e){const t=Ze(n);return Ao.Dt(t.Wt,e)}class a_{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&sD(c,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Dl(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Dl(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(rt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&uh(this.mutations,e.mutations,(t,r)=>Tl(t,r))&&uh(this.baseMutations,e.baseMutations,(t,r)=>Tl(t,r))}}class v0{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){vt(e.mutations.length===r.length);let o=yE();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,r[f].version);return new v0(e,t,r,o)}}class hc{constructor(e,t,r,o,c=rt.min(),f=rt.min(),_=Ur.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=_}withSequenceNumber(e){return new hc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new hc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new hc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class u_{constructor(e){this.Gt=e}}function c_(n,e){if(e.document)return h0(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=nt.fromSegments(e.noDocument.path),r=Rl(e.noDocument.readTime),o=Cn.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=nt.fromSegments(e.unknownDocument.path),r=Rl(e.unknownDocument.version);return Cn.newUnknownDocument(t,r)}return st()}function w0(n,e,t){const r=Rh(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const c={name:Th(_=n.Gt,(C=e).key),fields:C.data.value.mapValue.fields,updateTime:Ih(_,C.version.toTimestamp())};return new Hn(null,null,c,e.hasCommittedMutations,r,o)}var _,C;if(e.isNoDocument()){const c=e.key.path.toArray(),f=Gp(e.version),_=e.hasCommittedMutations;return new Hn(null,new g0(c,f),null,_,r,o)}if(e.isUnknownDocument()){const c=e.key.path.toArray(),f=Gp(e.version);return new Hn(new wD(c,f),null,null,!0,r,o)}return st()}function Rh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function l_(n){const e=new Xn(n[0],n[1]);return rt.fromTimestamp(e)}function Gp(n){const e=n.toTimestamp();return new YA(e.seconds,e.nanoseconds)}function Rl(n){const e=new Xn(n.seconds,n.nanoseconds);return rt.fromTimestamp(e)}function Oh(n,e){const t=(e.baseMutations||[]).map(c=>f0(n.Gt,c));for(let c=0;c<e.mutations.length-1;++c){const f=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(f.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const r=e.mutations.map(c=>f0(n.Gt,c)),o=Xn.fromMillis(e.localWriteTimeMs);return new a_(e.batchId,o,t,r)}function Ph(n){const e=Rl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Rl(n.lastLimboFreeSnapshotVersion):rt.min();let r;var o;return void 0!==n.query.documents?(vt(1===(o=n.query).documents.length),r=Ys(gh(l0(o.documents[0])))):r=Ys(To(n.query)),new hc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ur.fromBase64String(n.resumeToken))}function zp(n,e){const t=Gp(e.snapshotVersion),r=Gp(e.lastLimboFreeSnapshotVersion);let o;o=Km(e.target)?bE(n.Gt,e.target):i_(n.Gt,e.target);const c=e.resumeToken.toBase64();return new Xi(e.targetId,hh(e.target),t,c,e.sequenceNumber,r,o)}function d_(n){const e=To({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?rE(e,e.limit,"L"):e}class bD{getBundleMetadata(e,t){return h_(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Rl(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return h_(e).put({bundleId:(r=t).id,createTime:Gp(Br(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return f_(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:d_(o.bundledQuery),readTime:Rl(o.readTime)};var o})}saveNamedQuery(e,t){return f_(e).put({name:(r=t).name,readTime:Gp(Br(r.readTime)),bundledQuery:r.bundledQuery});var r}}function h_(n){return es(n,Sl.store)}function f_(n){return es(n,xl.store)}class ID{constructor(){this.zt=new C0}addToCollectionParentIndex(e,t){return this.zt.add(t),Ae.resolve()}getCollectionParents(e,t){return Ae.resolve(this.zt.getEntries(t))}}class C0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new $n(Xt.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new $n(Xt.comparator)).toArray()}}class SE{constructor(){this.Ht=new C0}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const c={collectionId:r,parent:ws(o)};return E0(e).put(c)}return Ae.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Sp(t),""],!1,!0);return E0(e).Bt(o).next(c=>{for(const f of c){if(f.collectionId!==t)break;r.push(uu(f.parent))}return r})}}function E0(n){return es(n,dc.store)}const b0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ts{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function I0(n,e,t){const r=n.store(Tn.store),o=n.store(jr.store),c=[],f=IDBKeyRange.only(t.batchId);let _=0;const C=r.jt({range:f},(R,O,q)=>(_++,q.delete()));c.push(C.next(()=>{vt(1===_)}));const T=[];for(const R of t.mutations){const O=jr.key(e,R.key.path,t.batchId);c.push(o.delete(O)),T.push(R.key)}return Ae.waitFor(c).next(()=>T)}function Wp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(41943040,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class D0{constructor(e,t,r,o){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=o,this.Yt={}}static Xt(e,t,r,o){vt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new D0(c,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).jt({index:Tn.userMutationsIndex,range:r},(o,c,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const c=kh(e),f=lu(e);return f.add({}).next(_=>{vt("number"==typeof _);const C=new a_(_,t,r,o),T=function(q,z,ie){const Pe=ie.baseMutations.map(Tt=>r_(q.Gt,Tt)),Me=ie.mutations.map(Tt=>r_(q.Gt,Tt));return new Tn(z,ie.batchId,ie.localWriteTime.toMillis(),Pe,Me)}(this.k,this.userId,C),R=[];let O=new $n((q,z)=>Nt(q.canonicalString(),z.canonicalString()));for(const q of o){const z=jr.key(this.userId,q.key.path,_);O=O.add(q.key.path.popLast()),R.push(f.put(T)),R.push(c.put(z,jr.PLACEHOLDER))}return O.forEach(q=>{R.push(this.Jt.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.Yt[_]=C.keys()}),Ae.waitFor(R).next(()=>C)})}lookupMutationBatch(e,t){return lu(e).get(t).next(r=>r?(vt(r.userId===this.userId),Oh(this.k,r)):null)}Zt(e,t){return this.Yt[t]?Ae.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Yt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let c=null;return lu(e).jt({index:Tn.userMutationsIndex,range:o},(f,_,C)=>{_.userId===this.userId&&(vt(_.batchId>=r),c=Oh(this.k,_)),C.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lu(e).jt({index:Tn.userMutationsIndex,range:t,reverse:!0},(o,c,f)=>{r=c.batchId,f.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lu(e).Bt(Tn.userMutationsIndex,t).next(r=>r.map(o=>Oh(this.k,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jr.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),c=[];return kh(e).jt({range:o},(f,_,C)=>{const[T,R,O]=f,q=uu(R);if(T===this.userId&&t.path.isEqual(q))return lu(e).get(O).next(z=>{if(!z)throw st();vt(z.userId===this.userId),c.push(Oh(this.k,z))});C.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(Nt);const o=[];return t.forEach(c=>{const f=jr.prefixForPath(this.userId,c.path),_=IDBKeyRange.lowerBound(f),C=kh(e).jt({range:_},(T,R,O)=>{const[q,z,ie]=T,Pe=uu(z);q===this.userId&&c.path.isEqual(Pe)?r=r.add(ie):O.done()});o.push(C)}),Ae.waitFor(o).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,c=jr.prefixForPath(this.userId,r),f=IDBKeyRange.lowerBound(c);let _=new $n(Nt);return kh(e).jt({range:f},(C,T,R)=>{const[O,q,z]=C,ie=uu(q);O===this.userId&&r.isPrefixOf(ie)?ie.length===o&&(_=_.add(z)):R.done()}).next(()=>this.te(e,_))}te(e,t){const r=[],o=[];return t.forEach(c=>{o.push(lu(e).get(c).next(f=>{if(null===f)throw st();vt(f.userId===this.userId),r.push(Oh(this.k,f))}))}),Ae.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return I0(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Ae.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ae.resolve();const r=IDBKeyRange.lowerBound(jr.prefixForUser(this.userId)),o=[];return kh(e).jt({range:r},(c,f,_)=>{if(c[0]===this.userId){const C=uu(c[1]);o.push(C)}else _.done()}).next(()=>{vt(0===o.length)})})}containsKey(e,t){return xE(e,this.userId,t)}ne(e){return T0(e).get(this.userId).next(t=>t||new Jo(this.userId,-1,""))}}function xE(n,e,t){const r=jr.prefixForPath(e,t.path),o=r[1],c=IDBKeyRange.lowerBound(r);let f=!1;return kh(n).jt({range:c,Kt:!0},(_,C,T)=>{const[R,O,q]=_;R===e&&O===o&&(f=!0),T.done()}).next(()=>f)}function lu(n){return es(n,Tn.store)}function kh(n){return es(n,jr.store)}function T0(n){return es(n,Jo.store)}class fc{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new fc(0)}static re(){return new fc(-1)}}class ME{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new fc(t.highestTargetId);return t.highestTargetId=r.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>rt.fromTimestamp(new Xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.ae(e,o)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ae(e,r))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ol(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(vt(r.targetCount>0),r.targetCount-=1,this.ae(e,r)))}removeTargets(e,t,r){let o=0;const c=[];return Ol(e).jt((f,_)=>{const C=Ph(_);C.sequenceNumber<=t&&null===r.get(C.targetId)&&(o++,c.push(this.removeTargetData(e,C)))}).next(()=>Ae.waitFor(c)).next(()=>o)}forEachTarget(e,t){return Ol(e).jt((r,o)=>{const c=Ph(o);t(c)})}oe(e){return RE(e).get(Ri.key).next(t=>(vt(null!==t),t))}ae(e,t){return RE(e).put(Ri.key,t)}ce(e,t){return Ol(e).put(zp(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=hh(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let c=null;return Ol(e).jt({range:o,index:Xi.queryTargetsIndexName},(f,_,C)=>{const T=Ph(_);Wm(t,T.target)&&(c=T,C.done())}).next(()=>c)}addMatchingKeys(e,t,r){const o=[],c=pc(e);return t.forEach(f=>{const _=ws(f.path);o.push(c.put(new Zr(r,_))),o.push(this.referenceDelegate.addReference(e,r,f))}),Ae.waitFor(o)}removeMatchingKeys(e,t,r){const o=pc(e);return Ae.forEach(t,c=>{const f=ws(c.path);return Ae.waitFor([o.delete([r,f]),this.referenceDelegate.removeReference(e,r,c)])})}removeMatchingKeysForTargetId(e,t){const r=pc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=pc(e);let c=un();return o.jt({range:r,Kt:!0},(f,_,C)=>{const T=uu(f[1]),R=new nt(T);c=c.add(R)}).next(()=>c)}containsKey(e,t){const r=ws(t.path),o=IDBKeyRange.bound([r],[Sp(r)],!1,!0);let c=0;return pc(e).jt({index:Zr.documentTargetsIndex,Kt:!0,range:o},([f,_],C,T)=>{0!==f&&(c++,T.done())}).next(()=>c>0)}Et(e,t){return Ol(e).get(t).next(r=>r?Ph(r):null)}}function Ol(n){return es(n,Xi.store)}function RE(n){return es(n,Ri.store)}function pc(n){return es(n,Zr.store)}function Pl(n){return p_.apply(this,arguments)}function p_(){return p_=(0,he.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==m0)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),p_.apply(this,arguments)}function DD([n,e],[t,r]){const o=Nt(n,t);return 0===o?Nt(e,r):o}class QA{constructor(e){this.he=e,this.buffer=new $n(DD),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();DD(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JA{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;Ne("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,he.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Ml(o)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Pl(o)}yield t.me(e)}))}}class XA{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ae.resolve(vs.I);const r=new QA(t);return this.ge.forEachTarget(e,o=>r.de(o.sequenceNumber)).next(()=>this.ge.pe(e,o=>r.de(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(b0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b0):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,o,c,f,_,C,T;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),o=this.params.maximumSequenceNumbersToCollect):o=O,f=Date.now(),this.nthSequenceNumber(e,o))).next(O=>(r=O,_=Date.now(),this.removeTargets(e,r,t))).next(O=>(c=O,C=Date.now(),this.removeOrphanedDocuments(e,r))).next(O=>(T=Date.now(),jm()<=$o.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-R}ms\n\tDetermined least recently used ${o} in `+(_-f)+`ms\n\tRemoved ${c} targets in `+(C-_)+`ms\n\tRemoved ${O} documents in `+(T-C)+`ms\nTotal Duration: ${T-R}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:O})))}}class eS{constructor(e,t){this.db=e,this.garbageCollector=new XA(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,o)=>t(o))}addReference(e,t,r){return A0(e,r)}removeReference(e,t,r){return A0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return A0(e,t)}Ae(e,t){return function(r,o){let c=!1;return T0(r).Qt(f=>xE(r,f,o).next(_=>(_&&(c=!0),Ae.resolve(!_)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let c=0;return this.Ie(e,(f,_)=>{if(_<=t){const C=this.Ae(e,f).next(T=>{if(!T)return c++,r.getEntry(e,f).next(()=>(r.removeEntry(f),pc(e).delete([0,ws(f.path)])))});o.push(C)}}).next(()=>Ae.waitFor(o)).next(()=>r.apply(e)).next(()=>c)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return A0(e,t)}Ie(e,t){const r=pc(e);let o,c=vs.I;return r.jt({index:Zr.documentTargetsIndex},([f,_],{path:C,sequenceNumber:T})=>{0===f?(c!==vs.I&&t(new nt(uu(o)),c),c=T,o=C):c=vs.I}).next(()=>{c!==vs.I&&t(new nt(uu(o)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function A0(n,e){return pc(n).put((r=n.currentSequenceNumber,new Zr(0,ws(e.path),r)));var r}class Kp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,c]of r)if(this.equalsFn(o,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){uc(this.inner,(t,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return WC(this.inner)}}class TD{constructor(){this.changes=new Kp(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:rt.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Cn.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ae.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class g_{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return Cs(e).put(Yp(t),r)}removeEntry(e,t){const r=Cs(e),o=Yp(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return Cs(e).get(Yp(t)).next(r=>this.Pe(t,r))}be(e,t){return Cs(e).get(Yp(t)).next(r=>({document:this.Pe(t,r),size:Wp(r)}))}getEntries(e,t){let r=Ji();return this.ve(e,t,(o,c)=>{const f=this.Pe(o,c);r=r.insert(o,f)}).next(()=>r)}Ve(e,t){let r=Ji(),o=new br(nt.comparator);return this.ve(e,t,(c,f)=>{const _=this.Pe(c,f);r=r.insert(c,_),o=o.insert(c,Wp(f))}).next(()=>({documents:r,Se:o}))}ve(e,t,r){if(t.isEmpty())return Ae.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),c=t.getIterator();let f=c.getNext();return Cs(e).jt({range:o},(_,C,T)=>{const R=nt.fromSegments(_);for(;f&&nt.comparator(f,R)<0;)r(f,null),f=c.getNext();f&&f.isEqual(R)&&(r(f,C),f=c.hasNext()?c.getNext():null),f?T.Lt(f.path.toArray()):T.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=Ji();const c=t.path.length+1,f={};if(r.isEqual(rt.min())){const _=t.path.toArray();f.range=IDBKeyRange.lowerBound(_)}else{const _=t.path.toArray(),C=Rh(r);f.range=IDBKeyRange.lowerBound([_,C],!0),f.index=Hn.collectionReadTimeIndex}return Cs(e).jt(f,(_,C,T)=>{if(_.length!==c)return;const R=c_(this.k,C);t.path.isPrefixOf(R.key.path)?Fp(t,R)&&(o=o.insert(R.key,R)):T.done()}).next(()=>o)}newChangeBuffer(e){return new tS(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return m_(e).get(Xo.key).next(t=>(vt(!!t),t))}Re(e,t){return m_(e).put(Xo.key,t)}Pe(e,t){if(t){const r=c_(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(rt.min()))return r}return Cn.newInvalidDocument(e)}}class tS extends TD{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Kp(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new $n((c,f)=>Nt(c.canonicalString(),f.canonicalString()));return this.changes.forEach((c,f)=>{const _=this.Ce.get(c);if(f.document.isValidDocument()){const C=w0(this.De.k,f.document,this.getReadTime(c));o=o.add(c.path.popLast()),r+=Wp(C)-_,t.push(this.De.addEntry(e,c,C))}else if(r-=_,this.trackRemovals){const C=w0(this.De.k,Cn.newNoDocument(c,rt.min()),this.getReadTime(c));t.push(this.De.addEntry(e,c,C))}else t.push(this.De.removeEntry(e,c))}),o.forEach(c=>{t.push(this.De.Jt.addToCollectionParentIndex(e,c))}),t.push(this.De.updateMetadata(e,r)),Ae.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:o})=>(o.forEach((c,f)=>{this.Ce.set(c,f)}),r))}}function m_(n){return es(n,Xo.store)}function Cs(n){return es(n,Hn.store)}function Yp(n){return n.path.toArray()}class AD{constructor(e){this.k=e}Nt(e,t,r,o){vt(r<o&&r>=0&&o<=11);const c=new Hp("createOrUpgrade",t);var _;r<1&&o>=1&&(e.createObjectStore(Mi.store),(_=e).createObjectStore(Jo.store,{keyPath:Jo.keyPath}),_.createObjectStore(Tn.store,{keyPath:Tn.keyPath,autoIncrement:!0}).createIndex(Tn.userMutationsIndex,Tn.userMutationsKeyPath,{unique:!0}),_.createObjectStore(jr.store),OE(e),function(_){_.createObjectStore(Hn.store)}(e));let f=Ae.resolve();return r<3&&o>=3&&(0!==r&&(function(_){_.deleteObjectStore(Zr.store),_.deleteObjectStore(Xi.store),_.deleteObjectStore(Ri.store)}(e),OE(e)),f=f.next(()=>function(_){const C=_.store(Ri.store),T=new Ri(0,0,rt.min().toTimestamp(),0);return C.put(Ri.key,T)}(c))),r<4&&o>=4&&(0!==r&&(f=f.next(()=>function(_,C){return C.store(Tn.store).Bt().next(T=>{_.deleteObjectStore(Tn.store),_.createObjectStore(Tn.store,{keyPath:Tn.keyPath,autoIncrement:!0}).createIndex(Tn.userMutationsIndex,Tn.userMutationsKeyPath,{unique:!0});const R=C.store(Tn.store),O=T.map(q=>R.put(q));return Ae.waitFor(O)})}(e,c))),f=f.next(()=>{!function(_){_.createObjectStore(cu.store,{keyPath:cu.keyPath})}(e)})),r<5&&o>=5&&(f=f.next(()=>this.Ne(c))),r<6&&o>=6&&(f=f.next(()=>(function(_){_.createObjectStore(Xo.store)}(e),this.ke(c)))),r<7&&o>=7&&(f=f.next(()=>this.xe(c))),r<8&&o>=8&&(f=f.next(()=>this.$e(e,c))),r<9&&o>=9&&(f=f.next(()=>{(function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")})(e),function(_){const C=_.objectStore(Hn.store);C.createIndex(Hn.readTimeIndex,Hn.readTimeIndexPath,{unique:!1}),C.createIndex(Hn.collectionReadTimeIndex,Hn.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(f=f.next(()=>this.Fe(c))),r<11&&o>=11&&(f=f.next(()=>{(function(_){_.createObjectStore(Sl.store,{keyPath:Sl.keyPath})})(e),function(_){_.createObjectStore(xl.store,{keyPath:xl.keyPath})}(e)})),f}ke(e){let t=0;return e.store(Hn.store).jt((r,o)=>{t+=Wp(o)}).next(()=>{const r=new Xo(t);return e.store(Xo.store).put(Xo.key,r)})}Ne(e){const t=e.store(Jo.store),r=e.store(Tn.store);return t.Bt().next(o=>Ae.forEach(o,c=>{const f=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return r.Bt(Tn.userMutationsIndex,f).next(_=>Ae.forEach(_,C=>{vt(C.userId===c.userId);const T=Oh(this.k,C);return I0(e,c.userId,T).next(()=>{})}))}))}xe(e){const t=e.store(Zr.store),r=e.store(Hn.store);return e.store(Ri.store).get(Ri.key).next(o=>{const c=[];return r.jt((f,_)=>{const C=new Xt(f),T=[0,ws(C)];c.push(t.get(T).next(R=>R?Ae.resolve():t.put(new Zr(0,ws(C),o.highestListenSequenceNumber))))}).next(()=>Ae.waitFor(c))})}$e(e,t){e.createObjectStore(dc.store,{keyPath:dc.keyPath});const r=t.store(dc.store),o=new C0,c=f=>{if(o.add(f)){const _=f.lastSegment(),C=f.popLast();return r.put({collectionId:_,parent:ws(C)})}};return t.store(Hn.store).jt({Kt:!0},(f,_)=>{const C=new Xt(f);return c(C.popLast())}).next(()=>t.store(jr.store).jt({Kt:!0},([f,_,C],T)=>{const R=uu(_);return c(R.popLast())}))}Fe(e){const t=e.store(Xi.store);return t.jt((r,o)=>{const c=Ph(o),f=zp(this.k,c);return t.put(f)})}}function OE(n){n.createObjectStore(Zr.store,{keyPath:Zr.keyPath}).createIndex(Zr.documentTargetsIndex,Zr.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Xi.store,{keyPath:Xi.keyPath}).createIndex(Xi.queryTargetsIndexName,Xi.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Ri.store)}const Qp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class __{constructor(e,t,r,o,c,f,_,C,T,R){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=c,this.window=f,this.document=_,this.Me=T,this.Le=R,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=O=>Promise.resolve(),!__.bt())throw new De(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eS(this,o),this.Ge=t+"main",this.k=new u_(C),this.ze=new Ao(this.Ge,11,new AD(this.k)),this.He=new ME(this.referenceDelegate,this.k),this.Jt=new SE,this.Je=new g_(this.k,this.Jt),this.Ye=new bD,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===R&&Jn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(le.FAILED_PRECONDITION,Qp);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new vs(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,he.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,he.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jp(e).put(new cu(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(Ml(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return Nh(e).get(Mi.key).next(t=>Ae.resolve(this.un(t)))}hn(e){return Jp(e).delete(this.clientId)}ln(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=es(r,cu.store);return o.Bt().next(c=>{const f=e.dn(c,18e5),_=c.filter(C=>-1===f.indexOf(C));return Ae.forEach(_,C=>o.delete(C.clientId)).next(()=>_)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Ae.resolve(!0):Nh(e).get(Mi.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new De(le.FAILED_PRECONDITION,Qp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jp(e).Bt().next(r=>void 0===this.dn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const f=!this.inForeground&&o.inForeground,_=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||f&&_)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[Mi.store,cu.store],t=>{const r=new o_(t,vs.I);return e.an(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>Jp(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return D0.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let c;return Ne("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",CD,f=>(c=new o_(f,this.Be?this.Be.next():vs.I),"readwrite-primary"===t?this.rn(c).next(_=>!!_||this.on(c)).next(_=>{if(!_)throw Jn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new De(le.FAILED_PRECONDITION,m0);return r(c)}).next(_=>this.cn(c).next(()=>_)):this.En(c).next(()=>r(c)))).then(f=>(c.raiseOnCommittedEvent(),f))}En(e){return Nh(e).get(Mi.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(le.FAILED_PRECONDITION,Qp)})}cn(e){const t=new Mi(this.clientId,this.allowTabSynchronization,Date.now());return Nh(e).put(Mi.key,t)}static bt(){return Ao.bt()}an(e){const t=Nh(e);return t.get(Mi.key).next(r=>this.un(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete(Mi.key)):Ae.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(Jn(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,ft.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Jn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Jn("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nh(n){return es(n,Mi.store)}function Jp(n){return es(n,cu.store)}function PE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class kE{constructor(e,t){this.progress=e,this.In=t}}class Xp{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Pn(e,t,r))}Pn(e,t,r){return this.Je.getEntry(e,t).next(o=>{for(const c of r)c.applyToLocalView(o);return o})}bn(e,t){e.forEach((r,o)=>{for(const c of t)c.applyToLocalView(o)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return nt.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Sn(e,t.path):e_(t)?this.Dn(e,t,r):this.Cn(e,t,r);var o}Sn(e,t){return this.Rn(e,new nt(t)).next(r=>{let o=_E();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Dn(e,t,r){const o=t.collectionGroup;let c=_E();return this.Jt.getCollectionParents(e,o).next(f=>Ae.forEach(f,_=>{const C=(T=t,R=_.child(o),new Qo(R,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));var T,R;return this.Cn(e,C,r).next(T=>{T.forEach((R,O)=>{c=c.insert(R,O)})})}).next(()=>c))}Cn(e,t,r){let o,c;return this.Je.getDocumentsMatchingQuery(e,t,r).next(f=>(o=f,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(f=>(c=f,this.Nn(e,c,o).next(_=>{o=_;for(const C of c)for(const T of C.mutations){const R=T.key;let O=o.get(R);null==O&&(O=Cn.newInvalidDocument(R),o=o.insert(R,O)),Dl(T,O,C.localWriteTime),O.isFoundDocument()||(o=o.remove(R))}}))).next(()=>(o.forEach((f,_)=>{Fp(t,_)||(o=o.remove(f))}),o))}Nn(e,t,r){let o=un();for(const f of t)for(const _ of f.mutations)_ instanceof Al&&null===r.get(_.key)&&(o=o.add(_.key));let c=r;return this.Je.getEntries(e,o).next(f=>(f.forEach((_,C)=>{C.isFoundDocument()&&(c=c.insert(_,C))}),c))}}class y_{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=o}static $n(e,t){let r=un(),o=un();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new y_(e,t.fromCache,r,o)}}class SD{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(c=t).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||r.isEqual(rt.min())?this.Mn(e,t):this.On.vn(e,o).next(c=>{const f=this.Ln(t,c);return(Jm(t)||Xm(t))&&this.Bn(t.limitType,f,o,r)?this.Mn(e,t):(jm()<=$o.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kv(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(_=>(f.forEach(C=>{_=_.insert(C.key,C)}),_)))});var c}Ln(e,t){let r=new $n(sE(e));return t.forEach((o,c)=>{Fp(e,c)&&(r=r.add(c))}),r}Bn(e,t,r,o){if(r.size!==t.size)return!0;const c="F"===e?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Mn(e,t){return jm()<=$o.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",Kv(t)),this.On.getDocumentsMatchingQuery(e,t,rt.min())}}class nS{constructor(e,t,r,o){this.persistence=e,this.Un=t,this.k=o,this.qn=new br(Nt),this.Kn=new Kp(c=>hh(c),Wm),this.jn=rt.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Xp(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function xD(n,e,t,r){return new nS(n,e,t,r)}function NE(n,e){return eg.apply(this,arguments)}function eg(){return eg=(0,he.Z)(function*(n,e){const t=Ze(n);let r=t.An,o=t.Wn;const c=yield t.persistence.runTransaction("Handle user change","readonly",f=>{let _;return t.An.getAllMutationBatches(f).next(C=>(_=C,r=t.persistence.getMutationQueue(e),o=new Xp(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(f))).next(C=>{const T=[],R=[];let O=un();for(const q of _){T.push(q.batchId);for(const z of q.mutations)O=O.add(z.key)}for(const q of C){R.push(q.batchId);for(const z of q.mutations)O=O.add(z.key)}return o.vn(f,O).next(q=>({Gn:q,removedBatchIds:T,addedBatchIds:R}))})});return t.An=r,t.Wn=o,t.Un.Fn(t.Wn),c}),eg.apply(this,arguments)}function MD(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=t.Qn.newChangeBuffer({trackRemovals:!0});return function(f,_,C,T){const R=C.batch,O=R.keys();let q=Ae.resolve();return O.forEach(z=>{q=q.next(()=>T.getEntry(_,z)).next(ie=>{const Pe=C.docVersions.get(z);vt(null!==Pe),ie.version.compareTo(Pe)<0&&(R.applyToRemoteDocument(ie,C),ie.isValidDocument()&&T.addEntry(ie,C.commitVersion))})}),q.next(()=>f.An.removeMutationBatch(_,R))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,o))})}function RD(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function OD(n,e){const t=Ze(n),r=e.snapshotVersion;let o=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=t.Qn.newChangeBuffer({trackRemovals:!0});o=t.qn;const _=[];e.targetChanges.forEach((T,R)=>{const O=o.get(R);if(!O)return;_.push(t.He.removeMatchingKeys(c,T.removedDocuments,R).next(()=>t.He.addMatchingKeys(c,T.addedDocuments,R)));const q=T.resumeToken;if(q.approximateByteSize()>0){const z=O.withResumeToken(q,r).withSequenceNumber(c.currentSequenceNumber);o=o.insert(R,z),ie=O,Me=T,vt((Pe=z).resumeToken.approximateByteSize()>0),(0===ie.resumeToken.approximateByteSize()||Pe.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=3e8||Me.addedDocuments.size+Me.modifiedDocuments.size+Me.removedDocuments.size>0)&&_.push(t.He.updateTargetData(c,z))}var ie,Pe,Me});let C=Ji();if(e.documentUpdates.forEach((T,R)=>{e.resolvedLimboDocuments.has(T)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(c,T))}),_.push(v_(c,f,e.documentUpdates,r,void 0).next(T=>{C=T})),!r.isEqual(rt.min())){const T=t.He.getLastRemoteSnapshotVersion(c).next(R=>t.He.setTargetsMetadata(c,c.currentSequenceNumber,r));_.push(T)}return Ae.waitFor(_).next(()=>f.apply(c)).next(()=>t.Wn.Vn(c,C)).next(()=>C)}).then(c=>(t.qn=o,c))}function v_(n,e,t,r,o){let c=un();return t.forEach(f=>c=c.add(f)),e.getEntries(n,c).next(f=>{let _=Ji();return t.forEach((C,T)=>{const R=f.get(C),O=(null==o?void 0:o.get(C))||r;T.isNoDocument()&&T.version.isEqual(rt.min())?(e.removeEntry(C,O),_=_.insert(C,T)):!R.isValidDocument()||T.version.compareTo(R.version)>0||0===T.version.compareTo(R.version)&&R.hasPendingWrites?(e.addEntry(T,O),_=_.insert(C,T)):Ne("LocalStore","Ignoring outdated watch update for ",C,". Current version:",R.version," Watch version:",T.version)}),_})}function PD(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function qr(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.He.getTargetData(r,e).next(c=>c?(o=c,Ae.resolve(o)):t.He.allocateTargetId(r).next(f=>(o=new hc(e,f,0,r.currentSequenceNumber),t.He.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qn.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function Fh(n,e,t){return tg.apply(this,arguments)}function tg(){return tg=(0,he.Z)(function*(n,e,t){const r=Ze(n),o=r.qn.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",c,f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!Ml(f))throw f;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}r.qn=r.qn.remove(e),r.Kn.delete(o.target)}),tg.apply(this,arguments)}function w_(n,e,t){const r=Ze(n);let o=rt.min(),c=un();return r.persistence.runTransaction("Execute query","readonly",f=>function(_,C,T){const R=Ze(_),O=R.Kn.get(T);return void 0!==O?Ae.resolve(R.qn.get(O)):R.He.getTargetData(C,T)}(r,f,Ys(e)).next(_=>{if(_)return o=_.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(f,_.targetId).next(C=>{c=C})}).next(()=>r.Un.getDocumentsMatchingQuery(f,e,t?o:rt.min(),t?c:un())).next(_=>({documents:_,zn:c})))}function FE(n,e){const t=Ze(n),r=Ze(t.He),o=t.qn.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",c=>r.Et(c,e).next(f=>f?f.target:null))}function C_(n){const e=Ze(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,c){const f=Ze(r);let _=Ji(),C=Rh(c);const T=Cs(o),R=IDBKeyRange.lowerBound(C,!0);return T.jt({index:Hn.readTimeIndex,range:R},(O,q)=>{const z=c_(f.k,q);_=_.insert(z.key,z),C=q.readTime}).next(()=>({In:_,readTime:l_(C)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function E_(){return E_=(0,he.Z)(function*(n){const e=Ze(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=Cs(r);let c=rt.min();return o.jt({index:Hn.readTimeIndex,reverse:!0},(f,_,C)=>{_.readTime&&(c=l_(_.readTime)),C.done()}).next(()=>c)}(t)).then(t=>{e.jn=t})}),E_.apply(this,arguments)}function b_(){return b_=(0,he.Z)(function*(n,e,t,r){const o=Ze(n);let c=un(),f=Ji(),_=yE();for(const R of t){const O=e.Hn(R.metadata.name);R.document&&(c=c.add(O)),f=f.insert(O,e.Jn(R)),_=_.insert(O,e.Yn(R.metadata.readTime))}const C=o.Qn.newChangeBuffer({trackRemovals:!0}),T=yield qr(o,(R=r,Ys(gh(Xt.fromString(`__bundle__/docs/${R}`)))));var R;return o.persistence.runTransaction("Apply bundle documents","readwrite",R=>v_(R,C,f,rt.min(),_).next(O=>(C.apply(R),O)).next(O=>o.He.removeMatchingKeysForTargetId(R,T.targetId).next(()=>o.He.addMatchingKeys(R,c,T.targetId)).next(()=>o.Wn.Vn(R,O)).next(()=>O)))}),b_.apply(this,arguments)}function UE(n,e){return S0.apply(this,arguments)}function S0(){return S0=(0,he.Z)(function*(n,e,t=un()){const r=yield qr(n,Ys(d_(e.bundledQuery))),o=Ze(n);return o.persistence.runTransaction("Save named query","readwrite",c=>{const f=Br(e.readTime);if(r.snapshotVersion.compareTo(f)>=0)return o.Ye.saveNamedQuery(c,e);const _=r.withResumeToken(Ur.EMPTY_BYTE_STRING,f);return o.qn=o.qn.insert(_.targetId,_),o.He.updateTargetData(c,_).next(()=>o.He.removeMatchingKeysForTargetId(c,r.targetId)).next(()=>o.He.addMatchingKeys(c,t,r.targetId)).next(()=>o.Ye.saveNamedQuery(c,e))})}),S0.apply(this,arguments)}class ND{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Ae.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:Br(r.createTime)}),Ae.resolve()}getNamedQuery(e,t){return Ae.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:d_(r.bundledQuery),readTime:Br(r.readTime)}),Ae.resolve();var r}}class ng{constructor(){this.ts=new $n(yn.es),this.ns=new $n(yn.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new yn(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new yn(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new nt(new Xt([])),r=new yn(t,e),o=new yn(t,e+1),c=[];return this.ns.forEachInRange([r,o],f=>{this.os(f),c.push(f.key)}),c}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new nt(new Xt([])),r=new yn(t,e),o=new yn(t,e+1);let c=un();return this.ns.forEachInRange([r,o],f=>{c=c.add(f.key)}),c}containsKey(e){const t=new yn(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class yn{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return nt.comparator(e.key,t.key)||Nt(e.fs,t.fs)}static ss(e,t){return Nt(e.fs,t.fs)||nt.comparator(e.key,t.key)}}class FD{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new $n(yn.es)}checkEmpty(e){return Ae.resolve(0===this.An.length)}addMutationBatch(e,t,r,o){const c=this.ds;this.ds++;const f=new a_(c,t,r,o);this.An.push(f);for(const _ of o)this.ws=this.ws.add(new yn(_.key,c)),this.Jt.addToCollectionParentIndex(e,_.key.path.popLast());return Ae.resolve(f)}lookupMutationBatch(e,t){return Ae.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.gs(t+1),c=o<0?0:o;return Ae.resolve(this.An.length>c?this.An[c]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Ae.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new yn(t,0),o=new yn(t,Number.POSITIVE_INFINITY),c=[];return this.ws.forEachInRange([r,o],f=>{const _=this._s(f.fs);c.push(_)}),Ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(Nt);return t.forEach(o=>{const c=new yn(o,0),f=new yn(o,Number.POSITIVE_INFINITY);this.ws.forEachInRange([c,f],_=>{r=r.add(_.fs)})}),Ae.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;nt.isDocumentKey(c)||(c=c.child(""));const f=new yn(new nt(c),0);let _=new $n(Nt);return this.ws.forEachWhile(C=>{const T=C.key.path;return!!r.isPrefixOf(T)&&(T.length===o&&(_=_.add(C.fs)),!0)},f),Ae.resolve(this.ys(_))}ys(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){vt(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return Ae.forEach(t.mutations,o=>{const c=new yn(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new yn(t,0),o=this.ws.firstAfterOrEqual(r);return Ae.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return Ae.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class LD{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new br(nt.comparator),this.size=0}addEntry(e,t,r){const o=t.key,c=this.docs.get(o),f=c?c.size:0,_=this.Ts(t);return this.docs=this.docs.insert(o,{document:t.clone(),size:_,readTime:r}),this.size+=_-f,this.Jt.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ae.resolve(r?r.document.clone():Cn.newInvalidDocument(t))}getEntries(e,t){let r=Ji();return t.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.clone():Cn.newInvalidDocument(o))}),Ae.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=Ji();const c=new nt(t.path.child("")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:_,value:{document:C,readTime:T}}=f.getNext();if(!t.path.isPrefixOf(_.path))break;T.compareTo(r)<=0||Fp(t,C)&&(o=o.insert(C.key,C.clone()))}return Ae.resolve(o)}Es(e,t){return Ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new UD(this)}getSize(e){return Ae.resolve(this.size)}}class UD extends TD{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.De.addEntry(e,o.document,this.getReadTime(r))):this.De.removeEntry(r)}),Ae.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class VE{constructor(e){this.persistence=e,this.Is=new Kp(t=>hh(t),Wm),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.As=0,this.Rs=new ng,this.targetCount=0,this.Ps=fc.ie()}forEachTarget(e,t){return this.Is.forEach((r,o)=>t(o)),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),Ae.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new fc(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Ae.resolve()}updateTargetData(e,t){return this.ce(t),Ae.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.Is.forEach((f,_)=>{_.sequenceNumber<=t&&null===r.get(_.targetId)&&(this.Is.delete(f),c.push(this.removeMatchingKeysForTargetId(e,_.targetId)),o++)}),Ae.waitFor(c).next(()=>o)}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return Ae.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),Ae.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(f=>{c.push(o.markPotentiallyOrphaned(e,f))}),Ae.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return Ae.resolve(r)}containsKey(e,t){return Ae.resolve(this.Rs.containsKey(t))}}class VD{constructor(e,t){this.bs={},this.Be=new vs(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new VE(this),this.Jt=new ID,this.Je=new LD(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new u_(t),this.Ye=new ND(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new FD(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new BD(this.Be.next());return this.referenceDelegate.Vs(),r(o).next(c=>this.referenceDelegate.Ss(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ds(e,t){return Ae.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class BD extends _0{constructor(e){super(),this.currentSequenceNumber=e}}class I_{constructor(e){this.persistence=e,this.Cs=new ng,this.Ns=null}static ks(e){return new I_(e)}get xs(){if(this.Ns)return this.Ns;throw st()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),Ae.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),Ae.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Ae.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.xs.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.xs,r=>{const o=nt.fromPath(r);return this.$s(e,o).next(c=>{c||t.removeEntry(o)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Ae.or([()=>Ae.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function BE(n,e){return`firestore_clients_${n}_${e}`}function jD(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function D_(n,e){return`firestore_targets_${n}_${e}`}class rg{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Fs(e,t,r){const o=JSON.parse(r);let c,f="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return f&&o.error&&(f="string"==typeof o.error.message&&"string"==typeof o.error.code,f&&(c=new De(o.error.code,o.error.message))),f?new rg(e,t,o.state,c):(Jn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ig{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Fs(e,t){const r=JSON.parse(t);let o,c="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(o=new De(r.error.code,r.error.message))),c?new ig(e,r.state,o):(Jn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class T_{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,c=t0();for(let f=0;o&&f<r.activeTargetIds.length;++f)o=YC(r.activeTargetIds[f]),c=c.add(r.activeTargetIds[f]);return o?new T_(e,c):(Jn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class A_{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new A_(t.clientId,t.onlineState):(Jn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class kl{constructor(){this.activeTargetIds=t0()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sg{constructor(e,t,r,o,c){this.window=e,this.Oe=t,this.persistenceKey=r,this.Bs=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new br(Nt),this.started=!1,this.js=[];const f=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.Qs=BE(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new kl),this.Gs=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(_){return`firestore_bundle_loaded_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.Tn();for(const o of t){if(o===e.Bs)continue;const c=e.getItem(BE(e.persistenceKey,o));if(c){const f=T_.Fs(o,c);f&&(e.Ks=e.Ks.insert(f.clientId,f))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const o=e.Zs(r);o&&e.ti(o)}for(const o of e.js)e.qs(o);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(D_(this.persistenceKey,e));if(r){const o=ig.Fs(e,r);o&&(t=o.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(D_(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.si(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void Jn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const o=t.ci(r.key);return t.ui(o,null)}{const o=t.hi(r.key,r.newValue);if(o)return t.ui(o.clientId,o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.li(r.key,r.newValue);if(o)return t.fi(o)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const o=t.di(r.key,r.newValue);if(o)return t.wi(o)}}else if(r.key===t.Js){if(null!==r.newValue){const o=t.Zs(r.newValue);if(o)return t.ti(o)}}else if(r.key===t.Ws){const o=function(c){let f=vs.I;if(null!=c)try{const _=JSON.parse(c);vt("number"==typeof _),f=_}catch(_){Jn("SharedClientState","Failed to read sequence number from WebStorage",_)}return f}(r.newValue);o!==vs.I&&t.sequenceNumberHandler(o)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,r){const o=new rg(this.currentUser,e,t,r),c=jD(this.persistenceKey,this.currentUser,e);this.setItem(c,o.Os())}si(e){const t=jD(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const o=D_(this.persistenceKey,e),c=new ig(e,t,r);this.setItem(o,c.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ci(e);return T_.Fs(r,t)}li(e,t){const r=this.zs.exec(e),o=Number(r[1]);return rg.Fs(new ei(void 0!==r[2]?r[2]:null),o,t)}di(e,t){const r=this.Hs.exec(e),o=Number(r[1]);return ig.Fs(o,t)}Zs(e){return A_.Fs(e)}fi(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),o=this.ei(this.Ks),c=this.ei(r),f=[],_=[];return c.forEach(C=>{o.has(C)||f.push(C)}),o.forEach(C=>{c.has(C)||_.push(C)}),this.syncEngine.yi(f,_).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=t0();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class x0{constructor(){this.pi=new kl,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new kl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class ZD{Ei(e){}shutdown(){}}class M0{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const jE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class qD{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class $D extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,o,c){const f=this.Ui(e,t);Ne("RestConnection","Sending: ",f,r);const _={};return this.qi(_,o,c),this.Ki(e,f,_,r).then(C=>(Ne("RestConnection","Received: ",C),C),C=>{throw oh("RestConnection",`${e} failed with error: `,C,"url: ",f,"request:",r),C})}ji(e,t,r,o,c){return this.Bi(e,t,r,o,c)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+sh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}Ui(e,t){return`${this.Mi}/v1/${t}:${jE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,o){return new Promise((c,f)=>{const _=new qI;_.listenOnce(BI.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Vv.NO_ERROR:const T=_.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(T)),c(T);break;case Vv.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),f(new De(le.DEADLINE_EXCEEDED,"Request time out"));break;case Vv.HTTP_ERROR:const R=_.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',R,"response text:",_.getResponseText()),R>0){const O=_.getResponseJson().error;if(O&&O.status&&O.message){const q=function(z){const ie=z.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(ie)>=0?ie:le.UNKNOWN}(O.status);f(new De(q,O.message))}else f(new De(le.UNKNOWN,"Server responded with status "+_.getStatus()))}else f(new De(le.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const C=JSON.stringify(o);_.send(t,"POST",C,r,15)})}Qi(e,t,r){const o=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=UI(),f=VI(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new ZI({})),this.qi(_.initMessageHeaders,t,r),(0,ft.uI)()||(0,ft.b$)()||(0,ft.d)()||(0,ft.w1)()||(0,ft.Mn)()||(0,ft.ru)()||(_.httpHeadersOverwriteParam="$httpHeaders");const C=o.join("");Ne("Connection","Creating WebChannel: "+C,_);const T=c.createWebChannel(C,_);let R=!1,O=!1;const q=new qD({Vi:ie=>{O?Ne("Connection","Not sending because WebChannel is closed:",ie):(R||(Ne("Connection","Opening WebChannel transport."),T.open(),R=!0),Ne("Connection","WebChannel sending:",ie),T.send(ie))},Si:()=>T.close()}),z=(ie,Pe,Me)=>{ie.listen(Pe,Tt=>{try{Me(Tt)}catch(xt){setTimeout(()=>{throw xt},0)}})};return z(T,Bm.EventType.OPEN,()=>{O||Ne("Connection","WebChannel transport opened.")}),z(T,Bm.EventType.CLOSE,()=>{O||(O=!0,Ne("Connection","WebChannel transport closed"),q.Fi())}),z(T,Bm.EventType.ERROR,ie=>{O||(O=!0,oh("Connection","WebChannel transport errored:",ie),q.Fi(new De(le.UNAVAILABLE,"The operation could not be completed")))}),z(T,Bm.EventType.MESSAGE,ie=>{var Pe;if(!O){const Me=ie.data[0];vt(!!Me);const Tt=Me,xt=Tt.error||(null===(Pe=Tt[0])||void 0===Pe?void 0:Pe.error);if(xt){Ne("Connection","WebChannel received error:",xt);const Lt=xt.status;let lt=function(fi){const Xh=er[fi];if(void 0!==Xh)return wh(Xh)}(Lt),ln=xt.message;void 0===lt&&(lt=le.INTERNAL,ln="Unknown error status: "+Lt+" with message "+xt.message),O=!0,q.Fi(new De(lt,ln)),T.close()}else Ne("Connection","WebChannel received:",Me),q.Oi(Me)}}),z(f,jI.STAT_EVENT,ie=>{ie.stat===jC.PROXY?Ne("Connection","Detected buffering proxy"):ie.stat===jC.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{q.$i()},0),q}}function HD(){return"undefined"!=typeof window?window:null}function R0(){return"undefined"!=typeof document?document:null}function Lh(n){return new wE(n,!0)}class O0{constructor(e,t,r=1e3,o=1.5,c=6e4){this.Oe=e,this.timerId=t,this.Wi=r,this.Gi=o,this.zi=c,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,o,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class ZE{constructor(e,t,r,o,c,f,_,C){this.Oe=e,this.nr=r,this.sr=o,this.ir=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=_,this.listener=C,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new O0(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,he.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,he.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var r=this;return(0,he.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Jn(t.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.rr===t&&this.Ir(r,o)},r=>{e(()=>{const o=new De(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(o)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(o=>{r(()=>this.Ar(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}dr(){var e=this;this.state=5,this.ur.Zi((0,he.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget(()=>this.rr===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class GD extends ZE{constructor(e,t,r,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,f),this.k=c}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(C=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===C?1:"REMOVE"===C?2:"CURRENT"===C?3:"RESET"===C?4:st(),o=e.targetChange.targetIds||[],c=function(C,T){return C.C?(vt(void 0===T||"string"==typeof T),Ur.fromBase64String(T||"")):(vt(void 0===T||T instanceof Uint8Array),Ur.fromUint8Array(T||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,_=f&&function(C){const T=void 0===C.code?le.UNKNOWN:wh(C.code);return new De(T,C.message||"")}(f);t=new lD(r,o,c,_||null)}else if("documentChange"in e){const r=e.documentChange,o=Do(n,r.document.name),c=Br(r.document.updateTime),f=new Si({mapValue:{fields:r.document.fields}}),_=Cn.newFoundDocument(o,c,f);t=new n0(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,o=Do(n,r.document),c=r.readTime?Br(r.readTime):rt.min(),f=Cn.newNoDocument(o,c);t=new n0([],r.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const r=e.documentRemove,o=Do(n,r.document);t=new n0([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return st();{const r=e.filter,c=new gE(r.count||0);t=new r0(r.targetId,c)}}var C;return t}(this.k,e),r=function(o){if(!("targetChange"in o))return rt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?rt.min():c.readTime?Br(c.readTime):rt.min()}(e);return this.listener.Pr(t,r)}br(e){const t={};t.database=Ah(this.k),t.addTarget=function(o,c){let f;const _=c.target;return f=Km(_)?{documents:bE(o,_)}:{query:i_(o,_)},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?f.resumeToken=CE(o,c.resumeToken):c.snapshotVersion.compareTo(rt.min())>0&&(f.readTime=Ih(o,c.snapshotVersion.toTimestamp())),f}(this.k,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=Ah(this.k),t.removeTarget=e,this.gr(t)}}class rS extends ZE{constructor(e,t,r,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,f),this.k=c,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(n,e){return n&&n.length>0?(vt(void 0!==e),n.map(t=>function(r,o){let c=Br(r.updateTime?r.updateTime:o);return c.isEqual(rt.min())&&(c=Br(o)),new hE(c,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.Cr(r,t)}return vt(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Ah(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>r_(this.k,r))};this.gr(t)}}class iS extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=o,this.$r=!1}Fr(){if(this.$r)throw new De(le.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.ir.Bi(e,t,r,o,c)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new De(le.UNKNOWN,o.toString())})}ji(e,t,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.ir.ji(e,t,r,o,c)).catch(o=>{throw"FirebaseError"===o.name?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new De(le.UNKNOWN,o.toString())})}terminate(){this.$r=!0}}class sS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Jn(t),this.Lr=!1):Ne("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class oS{constructor(e,t,r,o,c){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=c,this.Hr.Ei(_=>{r.enqueueAndForget((0,he.Z)(function*(){var C;gc(f)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(C=(0,he.Z)(function*(T){const R=Ze(T);R.Gr.add(4),yield du(R),R.Jr.set("Unknown"),R.Gr.delete(4),yield S_(R)}),function(T){return C.apply(this,arguments)})(f))}))}),this.Jr=new sS(r,o)}}function S_(n){return P0.apply(this,arguments)}function P0(){return P0=(0,he.Z)(function*(n){if(gc(n))for(const e of n.zr)yield e(!0)}),P0.apply(this,arguments)}function du(n){return k0.apply(this,arguments)}function k0(){return k0=(0,he.Z)(function*(n){for(const e of n.zr)yield e(!1)}),k0.apply(this,arguments)}function x_(n,e){const t=Ze(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),ag(t)?og(t):Bh(t).lr()&&hu(t,e))}function Uh(n,e){const t=Ze(n),r=Bh(t);t.Wr.delete(e),r.lr()&&N0(t,e),0===t.Wr.size&&(r.lr()?r._r():gc(t)&&t.Jr.set("Unknown"))}function hu(n,e){n.Yr.X(e.targetId),Bh(n).br(e)}function N0(n,e){n.Yr.X(e),Bh(n).vr(e)}function og(n){n.Yr=new o0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),Bh(n).start(),n.Jr.Br()}function ag(n){return gc(n)&&!Bh(n).hr()&&n.Wr.size>0}function gc(n){return 0===Ze(n).Gr.size}function M_(n){n.Yr=void 0}function F0(n){return R_.apply(this,arguments)}function R_(){return R_=(0,he.Z)(function*(n){n.Wr.forEach((e,t)=>{hu(n,e)})}),R_.apply(this,arguments)}function qE(n,e){return $E.apply(this,arguments)}function $E(){return $E=(0,he.Z)(function*(n,e){M_(n),ag(n)?(n.Jr.Kr(e),og(n)):n.Jr.set("Unknown")}),$E.apply(this,arguments)}function aS(n,e,t){return HE.apply(this,arguments)}function HE(){return HE=(0,he.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof lD&&2===e.state&&e.cause)try{yield(r=(0,he.Z)(function*(o,c){const f=c.cause;for(const _ of c.targetIds)o.Wr.has(_)&&(yield o.remoteSyncer.rejectListen(_,f),o.Wr.delete(_),o.Yr.removeTarget(_))}),function(o,c){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield L0(n,r)}else if(e instanceof n0?n.Yr.ot(e):e instanceof r0?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(rt.min()))try{const r=yield RD(n.localStore);t.compareTo(r)>=0&&(yield function(o,c){const f=o.Yr.gt(c);return f.targetChanges.forEach((_,C)=>{if(_.resumeToken.approximateByteSize()>0){const T=o.Wr.get(C);T&&o.Wr.set(C,T.withResumeToken(_.resumeToken,c))}}),f.targetMismatches.forEach(_=>{const C=o.Wr.get(_);if(!C)return;o.Wr.set(_,C.withResumeToken(Ur.EMPTY_BYTE_STRING,C.snapshotVersion)),N0(o,_);const T=new hc(C.target,_,1,C.sequenceNumber);hu(o,T)}),o.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield L0(n,r)}var r}),HE.apply(this,arguments)}function L0(n,e,t){return GE.apply(this,arguments)}function GE(){return GE=(0,he.Z)(function*(n,e,t){if(!Ml(e))throw e;n.Gr.add(1),yield du(n),n.Jr.set("Offline"),t||(t=()=>RD(n.localStore)),n.asyncQueue.enqueueRetryable((0,he.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield S_(n)}))}),GE.apply(this,arguments)}function zD(n,e){return e().catch(t=>L0(n,t,e))}function ug(n){return O_.apply(this,arguments)}function O_(){return O_=(0,he.Z)(function*(n){const e=Ze(n),t=mc(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;WD(e);)try{const o=yield PD(e.localStore,r);if(null===o){0===e.Qr.length&&t._r();break}r=o.batchId,KD(e,o)}catch(o){yield L0(e,o)}zE(e)&&WE(e)}),O_.apply(this,arguments)}function WD(n){return gc(n)&&n.Qr.length<10}function KD(n,e){n.Qr.push(e);const t=mc(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function zE(n){return gc(n)&&!mc(n).hr()&&n.Qr.length>0}function WE(n){mc(n).start()}function KE(n){return P_.apply(this,arguments)}function P_(){return P_=(0,he.Z)(function*(n){mc(n).kr()}),P_.apply(this,arguments)}function YE(n){return U0.apply(this,arguments)}function U0(){return U0=(0,he.Z)(function*(n){const e=mc(n);for(const t of n.Qr)e.Dr(t.mutations)}),U0.apply(this,arguments)}function YD(n,e,t){return k_.apply(this,arguments)}function k_(){return k_=(0,he.Z)(function*(n,e,t){const r=n.Qr.shift(),o=v0.from(r,e,t);yield zD(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield ug(n)}),k_.apply(this,arguments)}function N_(n,e){return V0.apply(this,arguments)}function V0(){return V0=(0,he.Z)(function*(n,e){var t;e&&mc(n).Sr&&(yield(t=(0,he.Z)(function*(r,o){if(jp(c=o.code)&&c!==le.ABORTED){const f=r.Qr.shift();mc(r).wr(),yield zD(r,()=>r.remoteSyncer.rejectFailedWrite(f.batchId,o)),yield ug(r)}var c}),function(r,o){return t.apply(this,arguments)})(n,e)),zE(n)&&WE(n)}),V0.apply(this,arguments)}function F_(n,e){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,he.Z)(function*(n,e){const t=Ze(n);e?(t.Gr.delete(2),yield S_(t)):e||(t.Gr.add(2),yield du(t),t.Jr.set("Unknown"))}),Vh.apply(this,arguments)}function Bh(n){return n.Xr||(n.Xr=function(e,t,r){const o=Ze(e);return o.Fr(),new GD(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:F0.bind(null,n),Ni:qE.bind(null,n),Pr:aS.bind(null,n)}),n.zr.push(function(){var e=(0,he.Z)(function*(t){t?(n.Xr.wr(),ag(n)?og(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),M_(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function mc(n){return n.Zr||(n.Zr=function(e,t,r){const o=Ze(e);return o.Fr(),new rS(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:KE.bind(null,n),Ni:N_.bind(null,n),Nr:YE.bind(null,n),Cr:YD.bind(null,n)}),n.zr.push(function(){var e=(0,he.Z)(function*(t){t?(n.Zr.wr(),yield ug(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class B0{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,r,o,c){const f=Date.now()+r,_=new B0(e,t,f,o,c);return _.start(r),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jh(n,e){if(Jn("AsyncQueue",`${e}: ${n}`),Ml(n))return new De(le.UNAVAILABLE,`${e}: ${n}`);throw n}class cg{constructor(e){this.comparator=e?(t,r)=>e(t,r)||nt.comparator(t.key,r.key):(t,r)=>nt.comparator(t.key,r.key),this.keyedMap=_E(),this.sortedSet=new br(this.comparator)}static emptySet(e){return new cg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new cg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class QE{constructor(){this.eo=new br(nt.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):st():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class Zh{constructor(e,t,r,o,c,f,_,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=_,this.excludesMetadataChanges=C}static fromInitialDocuments(e,t,r,o){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Zh(e,t,cg.emptySet(t),c,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class QD{constructor(){this.so=void 0,this.listeners=[]}}class JD{constructor(){this.queries=new Kp(e=>iE(e),Np),this.onlineState="Unknown",this.io=new Set}}function j0(n,e){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,he.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1,c=t.queries.get(r);if(c||(o=!0,c=new QD),o)try{c.so=yield t.onListen(r)}catch(f){const _=jh(f,`Initialization of query '${Kv(e.query)}' failed`);return void e.onError(_)}t.queries.set(r,c),c.listeners.push(e),e.ro(t.onlineState),c.so&&e.oo(c.so)&&JE(t)}),Z0.apply(this,arguments)}function q0(n,e){return $0.apply(this,arguments)}function $0(){return $0=(0,he.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1;const c=t.queries.get(r);if(c){const f=c.listeners.indexOf(e);f>=0&&(c.listeners.splice(f,1),o=0===c.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),$0.apply(this,arguments)}function uS(n,e){const t=Ze(n);let r=!1;for(const o of e){const f=t.queries.get(o.query);if(f){for(const _ of f.listeners)_.oo(o)&&(r=!0);f.so=o}}r&&JE(t)}function cS(n,e,t){const r=Ze(n),o=r.queries.get(e);if(o)for(const c of o.listeners)c.onError(t);r.queries.delete(e)}function JE(n){n.io.forEach(e=>{e.next()})}class XE{constructor(e,t,r){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Zh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=Zh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class lS{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class eb{constructor(e){this.k=e}Hn(e){return Do(this.k,e)}Jn(e){return e.metadata.exists?h0(this.k,e.document,!1):Cn.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return Br(e)}}class dS{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=XD(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new eb(this.k);for(const o of e)if(o.metadata.queries){const c=r.Hn(o.metadata.name);for(const f of o.metadata.queries){const _=(t.get(f)||un()).add(c);t.set(f,_)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function(n,e,t,r){return b_.apply(this,arguments)}(e.localStore,new eb(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const o of e.queries)yield UE(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new kE(Object.assign({},e.progress),t)})()}}function XD(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class eT{constructor(e){this.key=e}}class tT{constructor(e){this.key=e}}class i{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=un(),this.mutatedKeys=un(),this.Ao=sE(e),this.Ro=new cg(this.Ao)}get Po(){return this.To}bo(e,t){const r=t?t.vo:new QE,o=t?t.Ro:this.Ro;let c=t?t.mutatedKeys:this.mutatedKeys,f=o,_=!1;const C=Jm(this.query)&&o.size===this.query.limit?o.last():null,T=Xm(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((R,O)=>{const q=o.get(R),z=Fp(this.query,O)?O:null,ie=!!q&&this.mutatedKeys.has(q.key),Pe=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let Me=!1;q&&z?q.data.isEqual(z.data)?ie!==Pe&&(r.track({type:3,doc:z}),Me=!0):this.Vo(q,z)||(r.track({type:2,doc:z}),Me=!0,(C&&this.Ao(z,C)>0||T&&this.Ao(z,T)<0)&&(_=!0)):!q&&z?(r.track({type:0,doc:z}),Me=!0):q&&!z&&(r.track({type:1,doc:q}),Me=!0,(C||T)&&(_=!0)),Me&&(z?(f=f.add(z),c=Pe?c.add(R):c.delete(R)):(f=f.delete(R),c=c.delete(R)))}),Jm(this.query)||Xm(this.query))for(;f.size>this.query.limit;){const R=Jm(this.query)?f.last():f.first();f=f.delete(R.key),c=c.delete(R.key),r.track({type:1,doc:R})}return{Ro:f,vo:r,Bn:_,mutatedKeys:c}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const c=e.vo.no();c.sort((T,R)=>function(O,q){const z=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return z(O)-z(q)}(T.type,R.type)||this.Ao(T.doc,R.doc)),this.So(r);const f=t?this.Do():[],_=0===this.Io.size&&this.current?1:0,C=_!==this.Eo;return this.Eo=_,0!==c.length||C?{snapshot:new Zh(this.query,e.Ro,o,c,e.mutatedKeys,0===_,C,!1),Co:f}:{Co:f}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new QE,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=un(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new tT(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new eT(r))}),t}ko(e){this.To=e.zn,this.Io=un();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return Zh.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class s{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class a{constructor(e){this.key=e,this.$o=!1}}class l{constructor(e,t,r,o,c,f){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Fo={},this.Oo=new Kp(_=>iE(_),Np),this.Mo=new Map,this.Lo=new Set,this.Bo=new br(nt.comparator),this.Uo=new Map,this.qo=new ng,this.Ko={},this.jo=new Map,this.Qo=fc.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function d(n,e){return g.apply(this,arguments)}function g(){return g=(0,he.Z)(function*(n,e){const t=lT(n);let r,o;const c=t.Oo.get(e);if(c)r=c.targetId,t.sharedClientState.addLocalQueryTarget(r),o=c.view.xo();else{const f=yield qr(t.localStore,Ys(e)),_=t.sharedClientState.addLocalQueryTarget(f.targetId);r=f.targetId,o=yield y(t,e,r,"current"===_),t.isPrimaryClient&&x_(t.remoteStore,f)}return o}),g.apply(this,arguments)}function y(n,e,t,r){return w.apply(this,arguments)}function w(){return w=(0,he.Z)(function*(n,e,t,r){n.Go=(R,O,q)=>{return(z=(0,he.Z)(function*(ie,Pe,Me,Tt){let xt=Pe.view.bo(Me);xt.Bn&&(xt=yield w_(ie.localStore,Pe.query,!1).then(({documents:ln})=>Pe.view.bo(ln,xt)));const Lt=Tt&&Tt.targetChanges.get(Pe.targetId),lt=Pe.view.applyChanges(xt,ie.isPrimaryClient,Lt);return dg(ie,Pe.targetId,lt.Co),lt.snapshot}),function(ie,Pe,Me,Tt){return z.apply(this,arguments)})(n,R,O,q);var z};const o=yield w_(n.localStore,e,!0),c=new i(e,o.zn),f=c.bo(o.documents),_=qp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),C=c.applyChanges(f,n.isPrimaryClient,_);dg(n,t,C.Co);const T=new s(e,t,c);return n.Oo.set(e,T),n.Mo.has(t)?n.Mo.get(t).push(e):n.Mo.set(t,[e]),C.snapshot}),w.apply(this,arguments)}function E(n,e){return A.apply(this,arguments)}function A(){return A=(0,he.Z)(function*(n,e){const t=Ze(n),r=t.Oo.get(e),o=t.Mo.get(r.targetId);if(o.length>1)return t.Mo.set(r.targetId,o.filter(c=>!Np(c,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Fh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Uh(t.remoteStore,r.targetId),_c(t,r.targetId)}).catch(Pl))):(_c(t,r.targetId),yield Fh(t.localStore,r.targetId,!0))}),A.apply(this,arguments)}function N(){return N=(0,he.Z)(function*(n,e,t){const r=dT(n);try{const o=yield function(c,f){const _=Ze(c),C=Xn.now(),T=f.reduce((O,q)=>O.add(q.key),un());let R;return _.persistence.runTransaction("Locally write mutations","readwrite",O=>_.Wn.vn(O,T).next(q=>{R=q;const z=[];for(const ie of f){const Pe=oD(ie,R.get(ie.key));null!=Pe&&z.push(new Al(ie.key,Pe,Gv(Pe.value.mapValue),pr.exists(!0)))}return _.An.addMutationBatch(O,C,z,f)})).then(O=>(O.applyToLocalDocumentSet(R),{batchId:O.batchId,changes:R}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(c,f,_){let C=c.Ko[c.currentUser.toKey()];C||(C=new br(Nt)),C=C.insert(f,_),c.Ko[c.currentUser.toKey()]=C}(r,o.batchId,t),yield So(r,o.changes),yield ug(r.remoteStore)}catch(o){const c=jh(o,"Failed to persist write");t.reject(c)}}),N.apply(this,arguments)}function j(n,e){return K.apply(this,arguments)}function K(){return K=(0,he.Z)(function*(n,e){const t=Ze(n);try{const r=yield OD(t.localStore,e);e.targetChanges.forEach((o,c)=>{const f=t.Uo.get(c);f&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.$o=!0:o.modifiedDocuments.size>0?vt(f.$o):o.removedDocuments.size>0&&(vt(f.$o),f.$o=!1))}),yield So(t,r,e)}catch(r){yield Pl(r)}}),K.apply(this,arguments)}function pe(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Oo.forEach((c,f)=>{const _=f.view.ro(e);_.snapshot&&o.push(_.snapshot)}),function(c,f){const _=Ze(c);_.onlineState=f;let C=!1;_.queries.forEach((T,R)=>{for(const O of R.listeners)O.ro(f)&&(C=!0)}),C&&JE(_)}(r.eventManager,e),o.length&&r.Fo.Pr(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ke(n,e,t){return Be.apply(this,arguments)}function Be(){return Be=(0,he.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Uo.get(e),c=o&&o.key;if(c){let f=new br(nt.comparator);f=f.insert(c,Cn.newNoDocument(c,rt.min()));const _=un().add(c),C=new bh(rt.min(),new Map,new $n(Nt),f,_);yield j(r,C),r.Bo=r.Bo.remove(c),r.Uo.delete(e),hg(r)}else yield Fh(r.localStore,e,!1).then(()=>_c(r,e,t)).catch(Pl)}),Be.apply(this,arguments)}function tt(n,e){return we.apply(this,arguments)}function we(){return we=(0,he.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const o=yield MD(t.localStore,e);lg(t,r,null),fu(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield So(t,o)}catch(o){yield Pl(o)}}),we.apply(this,arguments)}function pt(n,e,t){return Ft.apply(this,arguments)}function Ft(){return Ft=(0,he.Z)(function*(n,e,t){const r=Ze(n);try{const o=yield function(c,f){const _=Ze(c);return _.persistence.runTransaction("Reject batch","readwrite-primary",C=>{let T;return _.An.lookupMutationBatch(C,f).next(R=>(vt(null!==R),T=R.keys(),_.An.removeMutationBatch(C,R))).next(()=>_.An.performConsistencyCheck(C)).next(()=>_.Wn.vn(C,T))})}(r.localStore,e);lg(r,e,t),fu(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield So(r,o)}catch(o){yield Pl(o)}}),Ft.apply(this,arguments)}function Pi(){return Pi=(0,he.Z)(function*(n,e){const t=Ze(n);gc(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(c){const f=Ze(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>f.An.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===r)return void e.resolve();const o=t.jo.get(r)||[];o.push(e),t.jo.set(r,o)}catch(r){const o=jh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),Pi.apply(this,arguments)}function fu(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function lg(n,e,t){const r=Ze(n);let o=r.Ko[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.Ko[r.currentUser.toKey()]=o}}function _c(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Mo.get(e))n.Oo.delete(r),t&&n.Fo.zo(r,t);n.Mo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||L_(n,r)})}function L_(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(Uh(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),hg(n))}function dg(n,e,t){for(const r of t)r instanceof eT?(n.qo.addReference(r.key,e),H0(n,r)):r instanceof tT?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||L_(n,r.key)):st()}function H0(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.Lo.add(r),hg(n))}function hg(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new nt(Xt.fromString(e)),r=n.Qo.next();n.Uo.set(r,new a(t)),n.Bo=n.Bo.insert(t,r),x_(n.remoteStore,new hc(Ys(gh(t.path)),r,2,vs.I))}}function So(n,e,t){return fg.apply(this,arguments)}function fg(){return fg=(0,he.Z)(function*(n,e,t){const r=Ze(n),o=[],c=[],f=[];var _;r.Oo.isEmpty()||(r.Oo.forEach((_,C)=>{f.push(r.Go(C,e,t).then(T=>{if(T){r.isPrimaryClient&&r.sharedClientState.updateQueryState(C.targetId,T.fromCache?"not-current":"current"),o.push(T);const R=y_.$n(C.targetId,T);c.push(R)}}))}),yield Promise.all(f),r.Fo.Pr(o),yield(_=(0,he.Z)(function*(C,T){const R=Ze(C);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>Ae.forEach(T,q=>Ae.forEach(q.kn,z=>R.persistence.referenceDelegate.addReference(O,q.targetId,z)).next(()=>Ae.forEach(q.xn,z=>R.persistence.referenceDelegate.removeReference(O,q.targetId,z)))))}catch(O){if(!Ml(O))throw O;Ne("LocalStore","Failed to update sequence numbers: "+O)}for(const O of T){const q=O.targetId;if(!O.fromCache){const z=R.qn.get(q),Pe=z.withLastLimboFreeSnapshotVersion(z.snapshotVersion);R.qn=R.qn.insert(q,Pe)}}}),function(C,T){return _.apply(this,arguments)})(r.localStore,c))}),fg.apply(this,arguments)}function G0(n,e){return nT.apply(this,arguments)}function nT(){return nT=(0,he.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield NE(t.localStore,e);t.currentUser=e,(o=t).jo.forEach(f=>{f.forEach(_=>{_.reject(new De(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield So(t,r.Gn)}var o}),nT.apply(this,arguments)}function eM(n,e){const t=Ze(n),r=t.Uo.get(e);if(r&&r.$o)return un().add(r.key);{let o=un();const c=t.Mo.get(e);if(!c)return o;for(const f of c){const _=t.Oo.get(f);o=o.unionWith(_.view.Po)}return o}}function tM(n,e){return rT.apply(this,arguments)}function rT(){return rT=(0,he.Z)(function*(n,e){const t=Ze(n),r=yield w_(t.localStore,e.query,!0),o=e.view.ko(r);return t.isPrimaryClient&&dg(t,e.targetId,o.Co),o}),rT.apply(this,arguments)}function nM(n){return iT.apply(this,arguments)}function iT(){return iT=(0,he.Z)(function*(n){const e=Ze(n);return C_(e.localStore).then(t=>So(e,t))}),iT.apply(this,arguments)}function rM(n,e,t,r){return sT.apply(this,arguments)}function sT(){return sT=(0,he.Z)(function*(n,e,t,r){const o=Ze(n),c=yield function(f,_){const C=Ze(f),T=Ze(C.An);return C.persistence.runTransaction("Lookup mutation documents","readonly",R=>T.Zt(R,_).next(O=>O?C.Wn.vn(R,O):Ae.resolve(null)))}(o.localStore,e);var _;null!==c?("pending"===t?yield ug(o.remoteStore):"acknowledged"===t||"rejected"===t?(lg(o,e,r||null),fu(o,e),_=e,Ze(Ze(o.localStore).An).ee(_)):st(),yield So(o,c)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),sT.apply(this,arguments)}function oT(){return oT=(0,he.Z)(function*(n,e){const t=Ze(n);if(lT(t),dT(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield hS(t,r.toArray());t.Wo=!0,yield F_(t.remoteStore,!0);for(const c of o)x_(t.remoteStore,c)}else if(!1===e&&!1!==t.Wo){const r=[];let o=Promise.resolve();t.Mo.forEach((c,f)=>{t.sharedClientState.isLocalQueryTarget(f)?r.push(f):o=o.then(()=>(_c(t,f),Fh(t.localStore,f,!0))),Uh(t.remoteStore,f)}),yield o,yield hS(t,r),function(c){const f=Ze(c);f.Uo.forEach((_,C)=>{Uh(f.remoteStore,C)}),f.qo.hs(),f.Uo=new Map,f.Bo=new br(nt.comparator)}(t),t.Wo=!1,yield F_(t.remoteStore,!1)}}),oT.apply(this,arguments)}function hS(n,e,t){return aT.apply(this,arguments)}function aT(){return aT=(0,he.Z)(function*(n,e,t){const r=Ze(n),o=[],c=[];for(const f of e){let _;const C=r.Mo.get(f);if(C&&0!==C.length){_=yield qr(r.localStore,Ys(C[0]));for(const T of C){const R=r.Oo.get(T),O=yield tM(r,R);O.snapshot&&c.push(O.snapshot)}}else{const T=yield FE(r.localStore,f);_=yield qr(r.localStore,T),yield y(r,fS(T),f,!1)}o.push(_)}return r.Fo.Pr(c),o}),aT.apply(this,arguments)}function fS(n){return zv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function sM(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Tn()}function oM(n,e,t,r){return uT.apply(this,arguments)}function uT(){return uT=(0,he.Z)(function*(n,e,t,r){const o=Ze(n);if(o.Wo)Ne("SyncEngine","Ignoring unexpected query state notification.");else if(o.Mo.has(e))switch(t){case"current":case"not-current":{const c=yield C_(o.localStore),f=bh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield So(o,c,f);break}case"rejected":yield Fh(o.localStore,e,!0),_c(o,e,r);break;default:st()}}),uT.apply(this,arguments)}function aM(n,e,t){return cT.apply(this,arguments)}function cT(){return cT=(0,he.Z)(function*(n,e,t){const r=lT(n);if(r.Wo){for(const o of e){if(r.Mo.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const c=yield FE(r.localStore,o),f=yield qr(r.localStore,c);yield y(r,fS(c),f.targetId,!1),x_(r.remoteStore,f)}for(const o of t)r.Mo.has(o)&&(yield Fh(r.localStore,o,!1).then(()=>{Uh(r.remoteStore,o),_c(r,o)}).catch(Pl))}}),cT.apply(this,arguments)}function lT(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=j.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ke.bind(null,e),e.Fo.Pr=uS.bind(null,e.eventManager),e.Fo.zo=cS.bind(null,e.eventManager),e}function dT(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tt.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pt.bind(null,e),e}class pS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.k=Lh(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return xD(this.persistence,new SD,e.initialUser,this.k)}Yo(e){return new VD(I_.ks,this.k)}Jo(e){return new x0}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class gS extends pS{constructor(e,t,r){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e),yield function(n){return E_.apply(this,arguments)}(r.localStore),yield r.ta.initialize(r,e),yield dT(r.ta.syncEngine),yield ug(r.ta.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return xD(this.persistence,new SD,e.initialUser,this.k)}Xo(e){return new JA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=PE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new __(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,HD(),R0(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new x0}}class cM extends gS{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e);const o=r.ta.syncEngine;r.sharedClientState instanceof sg&&(r.sharedClientState.syncEngine={mi:rM.bind(null,o),gi:oM.bind(null,o),yi:aM.bind(null,o),Tn:sM.bind(null,o),_i:nM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var c=(0,he.Z)(function*(f){yield function(n,e){return oT.apply(this,arguments)}(r.ta.syncEngine,f),r.gcScheduler&&(f&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):f||r.gcScheduler.stop())});return function(f){return c.apply(this,arguments)}}())})()}Jo(e){const t=HD();if(!sg.bt(t))throw new De(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=PE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class hT{initialize(e,t){var r=this;return(0,he.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>pe(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=G0.bind(null,r.syncEngine),yield F_(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new JD}createDatastore(e){const t=Lh(e.databaseInfo.databaseId),r=new $D(e.databaseInfo);return new iS(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,c=_=>pe(this.syncEngine,_,0),f=M0.bt()?new M0:new ZD,new oS(t,r,o,c,f);var t,r,o,c,f}createSyncEngine(e,t){return function(r,o,c,f,_,C,T){const R=new l(r,o,c,f,_,C);return T&&(R.Wo=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const r=Ze(t);Ne("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield du(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function mS(n,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class tb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class lM{constructor(e,t){this.sa=e,this.k=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,he.Z)(function*(){const t=yield e.oa();if(null===t)return null;const r=e.ia.decode(t),o=Number(r);isNaN(o)&&e.aa(`length string (${r}) is not valid number`);const c=yield e.ca(o);return new lS(JSON.parse(c),t.length+o)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,he.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const t=e.ua();t<0&&e.aa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ca(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.ha())&&t.aa("Reached the end of bundle when more is expected.");const r=t.ia.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,he.Z)(function*(){const t=yield e.sa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class dM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,he.Z)(function*(c,f){const _=Ze(c),C=Ah(_.k)+"/documents",T={documents:f.map(z=>Th(_.k,z))},R=yield _.ji("BatchGetDocuments",C,T),O=new Map;R.forEach(z=>{const ie=function(n,e){return"found"in e?function(t,r){vt(!!r.found);const o=Do(t,r.found.name),c=Br(r.found.updateTime),f=new Si({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(o,c,f)}(n,e):"missing"in e?function(t,r){vt(!!r.missing),vt(!!r.readTime);const o=Do(t,r.missing),c=Br(r.readTime);return Cn.newNoDocument(o,c)}(n,e):st()}(_.k,z);O.set(ie.key.toString(),ie)});const q=[];return f.forEach(z=>{const ie=O.get(z.toString());vt(!!ie),q.push(ie)}),q}),function(c,f){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const c=nt.fromPath(o);e.mutations.push(new e0(c,e.precondition(c)))}),yield(r=(0,he.Z)(function*(o,c){const f=Ze(o),_=Ah(f.k)+"/documents",C={writes:c.map(T=>r_(f.k,T))};yield f.Bi("Commit",_,C)}),function(o,c){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new De(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?pr.updateTime(t):pr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rt.min()))throw new De(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pr.updateTime(t)}return pr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hM{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.la=5,this.ur=new O0(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,he.Z)(function*(){const t=new dM(e.datastore),r=e.da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(c=>{e.wa(c)}))}).catch(o=>{e.wa(o)})}))}da(e){try{const t=this.updateFunction(e);return!cc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!jp(t)}return!1}}class fM{constructor(e,t,r,o){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ei.UNAUTHENTICATED,this.clientId=zC.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var f=(0,he.Z)(function*(_){Ne("FirestoreClient","Received user=",_.uid),yield c.authCredentialListener(_),c.user=_});return function(_){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(r,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=jh(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function _S(n,e){return fT.apply(this,arguments)}function fT(){return fT=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,he.Z)(function*(c){r.isEqual(c)||(yield NE(e.localStore,c),r=c)});return function(c){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),fT.apply(this,arguments)}function yS(n,e){return pT.apply(this,arguments)}function pT(){return pT=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield gT(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>{return(c=(0,he.Z)(function*(f,_){const C=Ze(f);C.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const T=gc(C);C.Gr.add(3),yield du(C),T&&C.Jr.set("Unknown"),yield C.remoteSyncer.handleCredentialChange(_),C.Gr.delete(3),yield S_(C)}),function(f,_){return c.apply(this,arguments)})(e.remoteStore,o);var c}),n.onlineComponents=e}),pT.apply(this,arguments)}function gT(n){return mT.apply(this,arguments)}function mT(){return mT=(0,he.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield _S(n,new pS)),n.offlineComponents}),mT.apply(this,arguments)}function nb(n){return _T.apply(this,arguments)}function _T(){return _T=(0,he.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield yS(n,new hT)),n.onlineComponents}),_T.apply(this,arguments)}function vS(n){return gT(n).then(e=>e.persistence)}function yT(n){return gT(n).then(e=>e.localStore)}function wS(n){return nb(n).then(e=>e.remoteStore)}function vT(n){return nb(n).then(e=>e.syncEngine)}function U_(n){return wT.apply(this,arguments)}function wT(){return wT=(0,he.Z)(function*(n){const e=yield nb(n),t=e.eventManager;return t.onListen=d.bind(null,e.syncEngine),t.onUnlisten=E.bind(null,e.syncEngine),t}),wT.apply(this,arguments)}function CS(n,e,t={}){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(o,c,f,_,C){const T=new tb({next:O=>{c.enqueueAndForget(()=>q0(o,R));const q=O.docs.has(f);!q&&O.fromCache?C.reject(new De(le.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&O.fromCache&&_&&"server"===_.source?C.reject(new De(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):C.resolve(O)},error:O=>C.reject(O)}),R=new XE(gh(f.path),T,{includeMetadataChanges:!0,wo:!0});return j0(o,R)}(yield U_(n),n.asyncQueue,e,t,r)})),r.promise}function ES(n,e,t={}){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(o,c,f,_,C){const T=new tb({next:O=>{c.enqueueAndForget(()=>q0(o,R)),O.fromCache&&"server"===_.source?C.reject(new De(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):C.resolve(O)},error:O=>C.reject(O)}),R=new XE(f,T,{includeMetadataChanges:!0,wo:!0});return j0(o,R)}(yield U_(n),n.asyncQueue,e,t,r)})),r.promise}class EM{constructor(e,t,r,o,c,f,_,C){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=_,this.useFetchStreams=C}}class V_{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof V_&&e.projectId===this.projectId&&e.database===this.database}}const bS=new Map;function CT(n,e,t){if(!t)throw new De(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IS(n,e,t,r){if(!0===e&&!0===r)throw new De(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DS(n){if(!nt.isDocumentKey(n))throw new De(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function TS(n){if(nt.isDocumentKey(n))throw new De(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rb(n);throw new De(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AS(n,e){if(e<=0)throw new De(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class SS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new De(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,IS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class z0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SS({}),this._settingsFrozen=!1,e instanceof V_?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new De(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new V_(o.options.projectId)}(e))}get app(){if(!this._app)throw new De(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ah;switch(t.type){case"gapi":const r=t.client;return vt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new GC(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new De(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bS.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),bS.delete(e),t.terminate())}(this),Promise.resolve()}}class Un{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class yc extends ns{constructor(e,t,r){super(e,t,gh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new nt(e))}withConverter(e){return new yc(this.firestore,e,this._path)}}function xS(n,e,...t){if(n=(0,ft.m9)(n),CT("collection","path",e),n instanceof z0){const r=Xt.fromString(e,...t);return TS(r),new yc(n,null,r)}{if(!(n instanceof Un||n instanceof yc))throw new De(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return TS(r),new yc(n.firestore,null,r)}}function ib(n,e,...t){if(n=(0,ft.m9)(n),1===arguments.length&&(e=zC.A()),CT("doc","path",e),n instanceof z0){const r=Xt.fromString(e,...t);return DS(r),new Un(n,null,new nt(r))}{if(!(n instanceof Un||n instanceof yc))throw new De(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return DS(r),new Un(n.firestore,n instanceof yc?n.converter:null,new nt(r))}}function MS(n,e){return n=(0,ft.m9)(n),e=(0,ft.m9)(e),(n instanceof Un||n instanceof yc)&&(e instanceof Un||e instanceof yc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function RS(n,e){return n=(0,ft.m9)(n),e=(0,ft.m9)(e),n instanceof ns&&e instanceof ns&&n.firestore===e.firestore&&Np(n._query,e._query)&&n.converter===e.converter}class DM{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new O0(this,"async_queue_retry"),this.Ra=()=>{const t=R0();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=R0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=R0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const t=new Fr;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,he.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(t){if(!Ml(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(r=>{throw this.Ta=r,this.Ea=!1,Jn("INTERNAL UNHANDLED ERROR: ",function(c){let f=c.message||"";return c.stack&&(f=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),f}(r)),r}).then(r=>(this.Ea=!1,r))));return this.ma=t,t}enqueueAfterDelay(e,t,r){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const o=B0.createAndSchedule(this,e,t,r,c=>this.Va(c));return this.pa.push(o),o}Pa(){this.Ta&&st()}verifyOperationInProgress(){}Sa(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.ma,yield t}while(t!==e.ma)})()}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function ET(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class TM{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class tr extends z0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new DM,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||OS(this),this._firestoreClient.terminate()}}function ti(n){return n._firestoreClient||OS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function OS(n){var e;const t=n._freezeSettings(),r=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new EM(n._databaseId,c,n._persistenceKey,(_=t).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var c,_;n._firestoreClient=new fM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function PS(n,e,t){const r=new Fr;return n.asyncQueue.enqueue((0,he.Z)(function*(){try{yield _S(n,t),yield yS(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(c=o).name?c.code===le.FAILED_PRECONDITION||c.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var c})).then(()=>r.promise)}function kS(n){if(n._initialized||n._terminated)throw new De(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Nl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vc(Ur.fromBase64String(e))}catch(t){throw new De(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vc(Ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pg{constructor(e){this._methodName=e}}class sb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const FM=/^__.*__$/;class LM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Al(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vp(e,this.data,t,this.fieldTransforms)}}class NS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Al(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function FS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class ob{constructor(e,t,r,o,c,f){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=o,void 0===c&&this.ka(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new ob(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$a({path:r,Oa:!1});return o.Ma(e),o}La(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$a({path:r,Oa:!1});return o.ka(),o}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return ub(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(FS(this.xa)&&FM.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class UM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||Lh(e)}ja(e,t,r,o=!1){return new ob({xa:e,methodName:t,Ka:r,path:Lr.emptyPath(),Oa:!1,qa:o},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function gg(n){const e=n._freezeSettings(),t=Lh(n._databaseId);return new UM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ab(n,e,t,r,o,c={}){const f=n.ja(c.merge||c.mergeFields?2:0,e,t,o);TT("Data must be an object, but it was:",f,r);const _=VS(r,f);let C,T;if(c.merge)C=new bl(f.fieldMask),T=f.fieldTransforms;else if(c.mergeFields){const R=[];for(const O of c.mergeFields){const q=AT(e,O,t);if(!f.contains(q))throw new De(le.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);jS(R,q)||R.push(q)}C=new bl(R),T=f.fieldTransforms.filter(O=>C.covers(O.field))}else C=null,T=f.fieldTransforms;return new LM(new Si(_),C,T)}class W0 extends pg{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof W0}}function LS(n,e,t){return new ob({xa:3,Ka:e.settings.Ka,methodName:n._methodName,Oa:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class bT extends pg{_toFieldTransform(e){return new yh(e.path,new lc)}isEqual(e){return e instanceof bT}}class VM extends pg{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=LS(this,e,!0),r=this.Qa.map(c=>mg(c,t)),o=new iu(r);return new yh(e.path,o)}isEqual(e){return this===e}}class BM extends pg{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=LS(this,e,!0),r=this.Qa.map(c=>mg(c,t)),o=new su(r);return new yh(e.path,o)}isEqual(e){return this===e}}class jM extends pg{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new _h(e.k,uE(e.k,this.Wa));return new yh(e.path,t)}isEqual(e){return this===e}}function IT(n,e,t,r){const o=n.ja(1,e,t);TT("Data must be an object, but it was:",o,r);const c=[],f=Si.empty();uc(r,(C,T)=>{const R=ST(e,C,t);T=(0,ft.m9)(T);const O=o.La(R);if(T instanceof W0)c.push(R);else{const q=mg(T,O);null!=q&&(c.push(R),f.set(R,q))}});const _=new bl(c);return new NS(f,_,o.fieldTransforms)}function DT(n,e,t,r,o,c){const f=n.ja(1,e,t),_=[AT(e,r,t)],C=[o];if(c.length%2!=0)throw new De(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<c.length;q+=2)_.push(AT(e,c[q])),C.push(c[q+1]);const T=[],R=Si.empty();for(let q=_.length-1;q>=0;--q)if(!jS(T,_[q])){const z=_[q];let ie=C[q];ie=(0,ft.m9)(ie);const Pe=f.La(z);if(ie instanceof W0)T.push(z);else{const Me=mg(ie,Pe);null!=Me&&(T.push(z),R.set(z,Me))}}const O=new bl(T);return new NS(R,O,f.fieldTransforms)}function US(n,e,t,r=!1){return mg(t,n.ja(r?4:3,e))}function mg(n,e){if(BS(n=(0,ft.m9)(n)))return TT("Unsupported field value:",e,n),VS(n,e);if(n instanceof pg)return function(t,r){if(!FS(r.xa))throw r.Ua(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ua(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,r){const o=[];let c=0;for(const f of t){let _=mg(f,r.Ba(c));null==_&&(_={nullValue:"NULL_VALUE"}),o.push(_),c++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,ft.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return uE(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Xn.fromDate(t);return{timestampValue:Ih(r.k,o)}}if(t instanceof Xn){const o=new Xn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ih(r.k,o)}}if(t instanceof sb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vc)return{bytesValue:CE(r.k,t._byteString)};if(t instanceof Un){const o=r.databaseId,c=t.firestore._databaseId;if(!c.isEqual(o))throw r.Ua(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:c0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ua(`Unsupported field value: ${rb(t)}`)}(n,e)}function VS(n,e){const t={};return WC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uc(n,(r,o)=>{const c=mg(o,e.Fa(r));null!=c&&(t[r]=c)}),{mapValue:{fields:t}}}function BS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xn||n instanceof sb||n instanceof vc||n instanceof Un||n instanceof pg)}function TT(n,e,t){if(!BS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=rb(t);throw e.Ua("an object"===r?n+" a custom object":n+" "+r)}var r}function AT(n,e,t){if((e=(0,ft.m9)(e))instanceof Nl)return e._internalPath;if("string"==typeof e)return ST(n,e);throw ub("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const ZM=new RegExp("[~\\*/\\[\\]]");function ST(n,e,t){if(e.search(ZM)>=0)throw ub(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nl(...e.split("."))._internalPath}catch(r){throw ub(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ub(n,e,t,r,o){const c=r&&!r.isEmpty(),f=void 0!==o;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let C="";return(c||f)&&(C+=" (found",c&&(C+=` in field ${r}`),f&&(C+=` in document ${o}`),C+=")"),new De(le.INVALID_ARGUMENT,_+n+C)}function jS(n,e){return n.some(t=>t.isEqual(e))}class K0{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class qM extends K0{data(){return super.data()}}function cb(n,e){return"string"==typeof e?ST(n,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}class _g{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fl extends K0{constructor(e,t,r,o,c,f){super(e,t,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Y0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(cb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Y0 extends Fl{data(e={}){return super.data(e)}}class qh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new _g(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Y0(this._firestore,this._userDataWriter,r.key,r,new _g(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map(f=>({type:"added",doc:new Y0(r._firestore,r._userDataWriter,f.doc.key,f.doc,new _g(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:c++}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(f=>o||3!==f.type).map(f=>{const _=new Y0(r._firestore,r._userDataWriter,f.doc.key,f.doc,new _g(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let C=-1,T=-1;return 0!==f.type&&(C=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),1!==f.type&&(c=c.add(f.doc),T=c.indexOf(f.doc.key)),{type:$M(f.type),doc:_,oldIndex:C,newIndex:T}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $M(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function ZS(n,e){return n instanceof Fl&&e instanceof Fl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof qh&&e instanceof qh&&n._firestore===e._firestore&&RS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function qS(n){if(Xm(n)&&0===n.explicitOrderBy.length)throw new De(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q0{}function $h(n,...e){for(const t of e)n=t._apply(n);return n}class HM extends Q0{constructor(e,t,r){super(),this.Ga=e,this.za=t,this.Ha=r,this.type="where"}_apply(e){const t=gg(e.firestore),r=function(o,c,f,_,C,T,R){let O;if(C.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new De(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on FieldPath.documentId().`);if("in"===T||"not-in"===T){KS(R,T);const z=[];for(const ie of R)z.push(WS(_,o,ie));O={arrayValue:{values:z}}}else O=WS(_,o,R)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||KS(R,T),O=US(f,"where",R,"in"===T||"not-in"===T);const q=xi.create(C,T,O);return function(z,ie){if(ie.V()){const Me=Wv(z);if(null!==Me&&!Me.isEqual(ie.field))throw new De(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Me.toString()}' and '${ie.field.toString()}'`);const Tt=kp(z);null!==Tt&&YS(0,ie.field,Tt)}const Pe=function(Me,Tt){for(const xt of Me.filters)if(Tt.indexOf(xt.op)>=0)return xt.op;return null}(z,function(Me){switch(Me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ie.op));if(null!==Pe)throw new De(le.INVALID_ARGUMENT,Pe===ie.op?`Invalid query. You cannot use more than one '${ie.op.toString()}' filter.`:`Invalid query. You cannot use '${ie.op.toString()}' filters with '${Pe.toString()}' filters.`)}(o,q),q}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new ns(e.firestore,e.converter,function(o,c){const f=o.filters.concat([c]);return new Qo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),f,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class zM extends Q0{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(r,o,c){if(null!==r.startAt)throw new De(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new De(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new Il(o,c);return function(_,C){if(null===kp(_)){const T=Wv(_);null!==T&&YS(0,T,C.field)}}(r,f),f}(e._query,this.Ga,this.Ja);return new ns(e.firestore,e.converter,function(r,o){const c=r.explicitOrderBy.concat([o]);return new Qo(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class $S extends Q0{constructor(e,t,r){super(),this.type=e,this.Ya=t,this.Xa=r}_apply(e){return new ns(e.firestore,e.converter,rE(e._query,this.Ya,this.Xa))}}class HS extends Q0{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=zS(e,this.type,this.Za,this.tc);return new ns(e.firestore,e.converter,(o=t,new Qo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class GS extends Q0{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=zS(e,this.type,this.Za,this.tc);return new ns(e.firestore,e.converter,(o=t,new Qo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function zS(n,e,t,r){if(t[0]=(0,ft.m9)(t[0]),t[0]instanceof K0)return function(o,c,f,_,C){if(!_)throw new De(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const T=[];for(const R of mh(o))if(R.field.isKeyField())T.push(Hm(c,_.key));else{const O=_.data.field(R.field);if(Zv(O))throw new De(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const q=R.field.canonicalString();throw new De(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}T.push(O)}return new ph(T,C)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=gg(n.firestore);return function(c,f,_,C,T,R){const O=c.explicitOrderBy;if(T.length>O.length)throw new De(le.INVALID_ARGUMENT,`Too many arguments provided to ${C}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let z=0;z<T.length;z++){const ie=T[z];if(O[z].field.isKeyField()){if("string"!=typeof ie)throw new De(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${C}(), but got a ${typeof ie}`);if(!e_(c)&&-1!==ie.indexOf("/"))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${C}() must be a plain document ID, but '${ie}' contains a slash.`);const Pe=c.path.child(Xt.fromString(ie));if(!nt.isDocumentKey(Pe))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${C}() must result in a valid document path, but '${Pe}' is not because it contains an odd number of segments.`);const Me=new nt(Pe);q.push(Hm(f,Me))}else{const Pe=US(_,C,ie);q.push(Pe)}}return new ph(q,R)}(n._query,n.firestore._databaseId,o,e,t,r)}}function WS(n,e,t){if("string"==typeof(t=(0,ft.m9)(t))){if(""===t)throw new De(le.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!e_(e)&&-1!==t.indexOf("/"))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!nt.isDocumentKey(r))throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hm(n,new nt(r))}if(t instanceof Un)return Hm(n,t._key);throw new De(le.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${rb(t)}.`)}function KS(n,e){if(!Array.isArray(n)||0===n.length)throw new De(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new De(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function YS(n,e,t){if(!t.isEqual(e))throw new De(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class xT{convertValue(e,t="none"){switch(Io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ch(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return uc(e.fields,(o,c)=>{r[o]=this.convertValue(c,t)}),r}convertGeoPoint(e){return new sb(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Mp(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lh(e));default:return null}}convertTimestamp(e){const t=Ks(e);return new Xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);vt(p0(r));const o=new V_(r.get(1),r.get(3)),c=new nt(r.popFirst(5));return o.isEqual(t)||Jn(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function lb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class tR extends xT{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}class QS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gg(e)}set(e,t,r){this._verifyNotCommitted();const o=Hh(e,this._firestore),c=lb(o.converter,t,r),f=ab(this._dataReader,"WriteBatch.set",o._key,c,null!==o.converter,r);return this._mutations.push(f.toMutation(o._key,pr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const c=Hh(e,this._firestore);let f;return f="string"==typeof(t=(0,ft.m9)(t))||t instanceof Nl?DT(this._dataReader,"WriteBatch.update",c._key,t,r,o):IT(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(f.toMutation(c._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hh(e,this._firestore);return this._mutations=this._mutations.concat(new Bp(t._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hh(n,e){if((n=(0,ft.m9)(n)).firestore!==e)throw new De(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class yg extends xT{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,t)}}function JS(n,e,t){n=en(n,Un);const r=en(n.firestore,tr),o=lb(n.converter,e,t);return B_(r,[ab(gg(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,pr.none())])}function XS(n,e,t,...r){n=en(n,Un);const o=en(n.firestore,tr),c=gg(o);let f;return f="string"==typeof(e=(0,ft.m9)(e))||e instanceof Nl?DT(c,"updateDoc",n._key,e,t,r):IT(c,"updateDoc",n._key,e),B_(o,[f.toMutation(n._key,pr.exists(!0))])}function e1(n,...e){var t,r,o;n=(0,ft.m9)(n);let c={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||ET(e[f])||(c=e[f],f++);const _={includeMetadataChanges:c.includeMetadataChanges};if(ET(e[f])){const O=e[f];e[f]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[f+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[f+2]=null===(o=O.complete)||void 0===o?void 0:o.bind(O)}let C,T,R;if(n instanceof Un)T=en(n.firestore,tr),R=gh(n._key.path),C={next:O=>{e[f]&&e[f](MT(T,n,O))},error:e[f+1],complete:e[f+2]};else{const O=en(n,ns);T=en(O.firestore,tr),R=O._query;const q=new yg(T);C={next:z=>{e[f]&&e[f](new qh(T,q,O,z))},error:e[f+1],complete:e[f+2]},qS(n._query)}return function(O,q,z,ie){const Pe=new tb(ie),Me=new XE(q,Pe,z);return O.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return j0(yield U_(O),Me)})),()=>{Pe.na(),O.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return q0(yield U_(O),Me)}))}}(ti(T),R,_,C)}function B_(n,e){return function(t,r){const o=new Fr;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(n,e,t){return N.apply(this,arguments)}(yield vT(t),r,o)})),o.promise}(ti(n),e)}function MT(n,e,t){const r=t.docs.get(e._key),o=new yg(n);return new Fl(n,o,e._key,r,new _g(t.hasPendingWrites,t.fromCache),e.converter)}class dR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=gg(e)}get(e){const t=Hh(e,this._firestore),r=new tR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return st();const c=o[0];if(c.isFoundDocument())return new K0(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new K0(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const o=Hh(e,this._firestore),c=lb(o.converter,t,r),f=ab(this._dataReader,"Transaction.set",o._key,c,null!==o.converter,r);return this._transaction.set(o._key,f),this}update(e,t,r,...o){const c=Hh(e,this._firestore);let f;return f="string"==typeof(t=(0,ft.m9)(t))||t instanceof Nl?DT(this._dataReader,"Transaction.update",c._key,t,r,o):IT(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,f),this}delete(e){const t=Hh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hh(e,this._firestore),r=new yg(this._firestore);return super.get(e).then(o=>new Fl(this._firestore,r,t._key,o._document,new _g(!1,!1),t.converter))}}function RT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function t1(){if("undefined"==typeof Uint8Array)throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function n1(){if("undefined"==typeof atob)throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){sh=wo.SDK_VERSION,(0,wo._registerComponent)(new Yu.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),c=new tr(o,new Bv(t.getProvider("auth-internal")),new KA(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),c._setSettings(r),c},"PUBLIC")),(0,wo.registerVersion)(ZC,"3.4.1",n),(0,wo.registerVersion)(ZC,"3.4.1","esm2017")}();class J0{constructor(e){this._delegate=e}static fromBase64String(e){return n1(),new J0(vc.fromBase64String(e))}static fromUint8Array(e){return t1(),new J0(vc.fromUint8Array(e))}toBase64(){return n1(),this._delegate.toBase64()}toUint8Array(){return t1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function OT(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class CR{enableIndexedDbPersistence(e,t){return function(n,e){kS(n=en(n,tr));const t=ti(n),r=n._freezeSettings(),o=new hT;return PS(t,o,new gS(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){kS(n=en(n,tr));const e=ti(n),t=n._freezeSettings(),r=new hT;return PS(e,r,new cM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new De(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(r){if(!Ao.bt())return Promise.resolve();const o=r+"main";yield Ao.delete(o)}),function(r){return t.apply(this,arguments)})(PE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class r1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof V_||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&oh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const c=(n=en(n,z0))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&oh("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let f,_;if("string"==typeof r.mockUserToken)f=r.mockUserToken,_=ei.MOCK_USER;else{f=(0,ft.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new De(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ei(C)}n._authCredentials=new zA(new HC(f,_))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield vS(n),t=yield wS(n);return e.setNetworkEnabled(!0),function(r){const o=Ze(r);return o.Gr.delete(0),S_(o)}(t)}))}(ti(n=en(n,tr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield vS(n),t=yield wS(n);return e.setNetworkEnabled(!1),(r=(0,he.Z)(function*(o){const c=Ze(o);c.Gr.add(0),yield du(c),c.Jr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(ti(n=en(n,tr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,IS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Fr;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(n,e){return Pi.apply(this,arguments)}(yield vT(e),t)})),t.promise}(ti(n=en(n,tr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new tb(e);return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield U_(n),o=t,Ze(r).io.add(o),void o.next();var r,o})),()=>{t.na(),n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield U_(n),o=t,void Ze(r).io.delete(o);var r,o}))}}(ti(n=en(n,tr)),ET(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new j_(this,xS(this._delegate,e))}catch(t){throw Es(t,"collection()","Firestore.collection()")}}doc(e){try{return new ta(this,ib(this._delegate,e))}catch(t){throw Es(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new bs(this,function(n,e){if(n=en(n,z0),CT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ns(n,null,(t=e,new Qo(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Es(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const r=yield(o=n,nb(o).then(c=>c.datastore));var o;new hM(n.asyncQueue,r,e,t).run()})),t.promise}(ti(n=en(n,tr)),t=>e(new dR(n,t)))}(this._delegate,t=>e(new i1(this,t)))}batch(){return ti(this._delegate),new s1(new QS(this._delegate,e=>B_(this._delegate,e)))}loadBundle(e){return function(n,e){const t=ti(n=en(n,tr)),r=new TM;return function(n,e,t,r){const o=function(c,f){let _;return _="string"==typeof c?(new TextEncoder).encode(c):c,C=function(C,T){if(C instanceof Uint8Array)return mS(C,T);if(C instanceof ArrayBuffer)return mS(new Uint8Array(C),T);if(C instanceof ReadableStream)return C.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new lM(C,f);var C}(t,Lh(e));n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function(n,e,t){const r=Ze(n);var o;(o=(0,he.Z)(function*(c,f,_){try{const C=yield f.getMetadata();if(yield function(q,z){const ie=Ze(q),Pe=Br(z.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",Me=>ie.Ye.getBundleMetadata(Me,z.id)).then(Me=>!!Me&&Me.createTime.compareTo(Pe)>=0)}(c.localStore,C))return yield f.close(),void _._completeWith((q=C,{taskState:"Success",documentsLoaded:q.totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}));_._updateProgress(XD(C));const T=new dS(C,c.localStore,f.k);let R=yield f.Ho();for(;R;){const q=yield T.yo(R);q&&_._updateProgress(q),R=yield f.Ho()}const O=yield T.complete();yield So(c,O.In,void 0),yield function(q,z){const ie=Ze(q);return ie.persistence.runTransaction("Save bundle","readwrite",Pe=>ie.Ye.saveBundleMetadata(Pe,z))}(c.localStore,C),_._completeWith(O.progress)}catch(C){oh("SyncEngine",`Loading bundle failed with ${C}`),_._failWith(C)}var q}),function(c,f,_){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield vT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,r){const o=Ze(t);return o.persistence.runTransaction("Get named query","readonly",c=>o.Ye.getNamedQuery(c,r))}(yield yT(n),e)}))}(ti(n=en(n,tr)),e).then(t=>t?new ns(n,null,t.query):null)}(this._delegate,e).then(t=>t?new bs(this,t):null)}}class db extends xT{constructor(e){super(),this.firestore=e}convertBytes(e){return new J0(new vc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ta.forKey(t,this.firestore,null)}}class i1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new db(e)}get(e){const t=wg(e);return this._delegate.get(t).then(r=>new X0(this._firestore,new Fl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=wg(e);return r?(RT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=wg(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=wg(e);return this._delegate.delete(t),this}}class s1{constructor(e){this._delegate=e}set(e,t,r){const o=wg(e);return r?(RT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const c=wg(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,r,...o),this}delete(e){const t=wg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Y0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ew(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=vg.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let c=o.get(t);return c||(c=new vg(e,new db(e),t),o.set(t,c)),c}}vg.INSTANCES=new WeakMap;class ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new db(e)}static forPath(e,t,r){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ta(t,new Un(t._delegate,r,new nt(e)))}static forKey(e,t,r){return new ta(t,new Un(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new j_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new j_(this.firestore,xS(this._delegate,e))}catch(t){throw Es(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ft.m9)(e))instanceof Un&&MS(this._delegate,e)}set(e,t){t=RT("DocumentReference.set",t);try{return t?JS(this._delegate,e,t):JS(this._delegate,e)}catch(r){throw Es(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?XS(this._delegate,e):XS(this._delegate,e,t,...r)}catch(o){throw Es(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return B_(en(n.firestore,tr),[new Bp(n._key,pr.none())])}(this._delegate)}onSnapshot(...e){const t=o1(e),r=a1(e,o=>new X0(this.firestore,new Fl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return e1(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=en(n,Un);const e=en(n.firestore,tr),t=ti(e),r=new yg(e);return function(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(o,c,f){try{const _=yield function(C,T){const R=Ze(C);return R.persistence.runTransaction("read document","readonly",O=>R.Wn.Rn(O,T))}(o,c);_.isFoundDocument()?f.resolve(_):_.isNoDocument()?f.resolve(null):f.reject(new De(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const C=jh(_,`Failed to get document '${c} from cache`);f.reject(C)}}),function(o,c,f){return r.apply(this,arguments)})(yield yT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Fl(e,r,n._key,o,new _g(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=en(n,Un);const e=en(n.firestore,tr);return CS(ti(e),n._key,{source:"server"}).then(t=>MT(e,n,t))}(this._delegate):function(n){n=en(n,Un);const e=en(n.firestore,tr);return CS(ti(e),n._key).then(t=>MT(e,n,t))}(this._delegate),t.then(r=>new X0(this.firestore,new Fl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ta(this.firestore,this._delegate.withConverter(e?vg.getInstance(this.firestore,e):null))}}function Es(n,e,t){return n.message=n.message.replace(e,t),n}function o1(n){for(const e of n)if("object"==typeof e&&!OT(e))return e;return{}}function a1(n,e){var t,r;let o;return o=OT(n[0])?n[0]:OT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{o.next&&o.next(e(c))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class X0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ZS(this._delegate,e._delegate)}}class ew extends X0{data(e){const t=this._delegate.data(e);return function(n,e){n||st()}(void 0!==t),t}}class bs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new db(e)}where(e,t,r){try{return new bs(this.firestore,$h(this._delegate,function(n,e,t){const r=e,o=cb("where",n);return new HM(o,r,t)}(e,t,r)))}catch(o){throw Es(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new bs(this.firestore,$h(this._delegate,function(n,e="asc"){const t=e,r=cb("orderBy",n);return new zM(r,t)}(e,t)))}catch(r){throw Es(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new bs(this.firestore,$h(this._delegate,function(n){return AS("limit",n),new $S("limit",n,"F")}(e)))}catch(t){throw Es(t,"limit()","Query.limit()")}}limitToLast(e){try{return new bs(this.firestore,$h(this._delegate,function(n){return AS("limitToLast",n),new $S("limitToLast",n,"L")}(e)))}catch(t){throw Es(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new bs(this.firestore,$h(this._delegate,function(...n){return new HS("startAt",n,!0)}(...e)))}catch(t){throw Es(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new bs(this.firestore,$h(this._delegate,function(...n){return new HS("startAfter",n,!1)}(...e)))}catch(t){throw Es(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new bs(this.firestore,$h(this._delegate,function(...n){return new GS("endBefore",n,!0)}(...e)))}catch(t){throw Es(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new bs(this.firestore,$h(this._delegate,function(...n){return new GS("endAt",n,!1)}(...e)))}catch(t){throw Es(t,"endAt()","Query.endAt()")}}isEqual(e){return RS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=en(n,ns);const e=en(n.firestore,tr),t=ti(e),r=new yg(e);return function(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(o,c,f){try{const _=yield w_(o,c,!0),C=new i(c,_.zn),T=C.bo(_.documents),R=C.applyChanges(T,!1);f.resolve(R.snapshot)}catch(_){const C=jh(_,`Failed to execute query '${c} against cache`);f.reject(C)}}),function(o,c,f){return r.apply(this,arguments)})(yield yT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new qh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=en(n,ns);const e=en(n.firestore,tr),t=ti(e),r=new yg(e);return ES(t,n._query,{source:"server"}).then(o=>new qh(e,r,n,o))}(this._delegate):function(n){n=en(n,ns);const e=en(n.firestore,tr),t=ti(e),r=new yg(e);return qS(n._query),ES(t,n._query).then(o=>new qh(e,r,n,o))}(this._delegate),t.then(r=>new PT(this.firestore,new qh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=o1(e),r=a1(e,o=>new PT(this.firestore,new qh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return e1(this._delegate,t,r)}withConverter(e){return new bs(this.firestore,this._delegate.withConverter(e?vg.getInstance(this.firestore,e):null))}}class bR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ew(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new bs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ew(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ew(this._firestore,r))})}isEqual(e){return ZS(this._delegate,e._delegate)}}class j_ extends bs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ta(this.firestore,e):null}doc(e){try{return new ta(this.firestore,void 0===e?ib(this._delegate):ib(this._delegate,e))}catch(t){throw Es(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=en(n.firestore,tr),r=ib(n),o=lb(n.converter,e);return B_(t,[ab(gg(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,pr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ta(this.firestore,t))}isEqual(e){return MS(this._delegate,e._delegate)}withConverter(e){return new j_(this.firestore,this._delegate.withConverter(e?vg.getInstance(this.firestore,e):null))}}function wg(n){return en(n,Un)}class kT{constructor(...e){this._delegate=new Nl(...e)}static documentId(){return new kT(Lr.keyField().canonicalString())}isEqual(e){return(e=(0,ft.m9)(e))instanceof Nl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Cg{constructor(e){this._delegate=e}static serverTimestamp(){const e=new bT("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Cg(e)}static delete(){const e=new W0("deleteField");return e._methodName="FieldValue.delete",new Cg(e)}static arrayUnion(...e){const t=function(...n){return new VM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Cg(t)}static arrayRemove(...e){const t=function(...n){return new BM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Cg(t)}static increment(e){const t=function(n){return new jM("increment",n)}(e);return t._methodName="FieldValue.increment",new Cg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const IR={Firestore:r1,GeoPoint:sb,Timestamp:Xn,Blob:J0,Transaction:i1,WriteBatch:s1,DocumentReference:ta,DocumentSnapshot:X0,Query:bs,QueryDocumentSnapshot:ew,QuerySnapshot:PT,CollectionReference:j_,FieldPath:kT,FieldValue:Cg,setLogLevel:function(n){!function(n){ac.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function u1(n,e){return function(n,e=Go.z){return new Yr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function NT(n,e){return u1(n,e).pipe((0,it.U)(t=>({payload:t,type:"query"})))}function hb(n,e){return NT(n,e).pipe(Di(void 0),kd(),(0,it.U)(([t,r])=>{const o=r.payload.docChanges(),c=o.map(f=>({type:f.type,payload:f}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((f,_)=>{const C=o.find(R=>R.doc.ref.isEqual(f.ref)),T=null==t?void 0:t.payload.docs.find(R=>R.ref.isEqual(f.ref));C&&JSON.stringify(C.doc.metadata)===JSON.stringify(f.metadata)||!C&&T&&JSON.stringify(T.metadata)===JSON.stringify(f.metadata)||c.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:f}})}),c}))}function c1(n,e,t){return hb(n,t).pipe(Bi((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(c=>c.payload),e),[]),function(n,e=cs.y){return n=null!=n?n:dI,(0,vr.e)((t,r)=>{let o,c=!0;t.subscribe(new xn.Q(r,f=>{const _=e(f);(c||!n(o,_))&&(c=!1,o=_,r.next(f))}))})}(),(0,it.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function FT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function l1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new Yu.wA("firestore-compat",t=>((e,t)=>new r1(e,t,new CR))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},IR)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.10")}(hI.Z);class d1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=hb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,it.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Di(void 0),kd(),ur(([r,o])=>o.length>0||!r),(0,it.U)(([r,o])=>o),Fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=l1(e);return c1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return NT(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Fn.iC)}get(e){return(0,Wt.D)(this.query.get(e)).pipe(Fn.iC)}add(e){return this.ref.add(e)}doc(e){return new h1(this.ref.doc(e),this.afs)}}class h1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:c}=f1(r,t);return new d1(o,c,this.afs)}snapshotChanges(){return function(n,e){return u1(n,e).pipe(Di(void 0),kd(),(0,it.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,it.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Wt.D)(this.ref.get(e)).pipe(Fn.iC)}}class RR{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?hb(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ur(t=>t.length>0),Fn.iC):hb(this.query,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=l1(e);return c1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(e={}){return NT(this.query,this.afs.schedulers.outsideAngular).pipe((0,it.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Fn.iC)}get(e){return(0,Wt.D)(this.query.get(e)).pipe(Fn.iC)}}const OR=new u.OlP("angularfire2.enableFirestorePersistence"),PR=new u.OlP("angularfire2.firestore.persistenceSettings"),kR=new u.OlP("angularfire2.firestore.settings"),NR=new u.OlP("angularfire2.firestore.use-emulator");function f1(n,e=(t=>t)){return{query:e(n),ref:n}}let LT=(()=>{class n{constructor(t,r,o,c,f,_,C,T,R,O,q,z,ie,Pe,Me,Tt,xt){this.schedulers=C;const Lt=(0,Ai.on)(t,_,r),lt=R;O&&Ky(Lt,_,q,ie,Pe,Me,z,Tt),[this.firestore,this.persistenceEnabled$]=(0,Ai.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const ln=_.runOutsideAngular(()=>Lt.firestore());if(c&&ln.settings(c),lt&&ln.useEmulator(...lt),o&&!yr(f)){const fi=()=>{try{return(0,Wt.D)(ln.enablePersistence(T||void 0).then(()=>!0,()=>!1))}catch(Xh){return"undefined"!=typeof console&&console.warn(Xh),Je(!1)}};return[ln,_.runOutsideAngular(fi)]}return[ln,Je(!1)]},[c,lt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:f}=f1(o,r),_=this.schedulers.ngZone.run(()=>c);return new d1(_,f,this)}collectionGroup(t,r){const o=r||(f=>f),c=this.firestore.collectionGroup(t);return new RR(o(c),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new h1(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ai.Dh),u.LFG(Ai.xv,8),u.LFG(OR,8),u.LFG(kR,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Fn.HU),u.LFG(PR,8),u.LFG(NR,8),u.LFG(np,8),u.LFG($w,8),u.LFG(gm,8),u.LFG(cI,8),u.LFG(Hw,8),u.LFG(zy,8),u.LFG(Wy,8),u.LFG(fm,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Z_=(()=>{class n{constructor(t){this.db=t,this.userID="",this.userRef=t.collection("users")}getUser(t){return this.userID=t,this.userRef.doc(t).valueChanges()}getCurrentUserID(){return this.userID}save(t,r){this.userRef.doc(t).set({key:t,email:r,admin:!1,manager:!1,isDisabled:!1})}setAdmin(t){this.userRef.doc(t.key).update({admin:!0})}setManager(t){this.userRef.doc(t.key).update({manager:!0})}unsetManager(t){this.userRef.doc(t.key).update({manager:!1})}unsetAdmin(t){this.userRef.doc(t.key).update({admin:!1})}getRegisteredUsers(){return this.userRef}ban(t){this.userRef.doc(t.key).update({isDisabled:!0})}unban(t){this.userRef.doc(t.key).update({isDisabled:!1})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(LT))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),wc=(()=>{class n{constructor(t,r){this.fireAuth=t,this.userService=r,this.authState$=this.fireAuth.authState,this.isLoggedIn=!1,this.isAdmin=!1,this.isManager=!1,this.userData=t.authState,this.userData.subscribe(o=>{null===o?(this.currentUser=null,this.isLoggedIn=!1):(this.currentUser=o,this.isLoggedIn=!0,this.isUserAdmin(),this.isUserManager())})}ngOnInit(){}setPersistence(t){switch(t){case"local":return this.fireAuth.setPersistence(Ku.Z.auth.Auth.Persistence.LOCAL);case"none":return this.fireAuth.setPersistence(Ku.Z.auth.Auth.Persistence.NONE);case"session":return this.fireAuth.setPersistence(Ku.Z.auth.Auth.Persistence.SESSION)}return null}getIsLoggedIn(){return this.isLoggedIn}getAppUser(){return this.userData.pipe(mn(t=>this.userService.getUser(null==t?void 0:t.uid)))}isUserAdmin(){return this.getAppUser().pipe((0,it.U)(t=>t.admin)).subscribe(t=>this.isAdmin=t)}isUserManager(){return this.getAppUser().pipe((0,it.U)(t=>t.manager)).subscribe(t=>this.isManager=t)}register(t,r){return this.fireAuth.createUserWithEmailAndPassword(t,r).then(o=>{console.log("You are signed up!",o),this.userService.save(o.user.uid,o.user.email)}).catch(o=>{console.log("Something is wrong: ",o.message)})}login(t,r){return this.fireAuth.signInWithEmailAndPassword(t,r).then(o=>{console.log("You are logged in!")}).catch(o=>{console.log("Something went wrong: ",o.message)})}logout(){return this.fireAuth.signOut().then(t=>{console.log("You logged out!"),localStorage.clear()}).catch(t=>{console.log("Something went wrong: ",t.message)})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(np),u.LFG(Z_))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Eg=(()=>{class n{constructor(t,r){this.authService=t,this.db=r,this.items=[],this.itemsSource=new jn(this.items),this.currentItems=this.itemsSource.asObservable(),this.userID="",this.cartsRef=r.collection("carts"),this.authService.userData.subscribe(o=>{this.userID=o.uid,localStorage.getItem("cartID")||(localStorage.setItem("cartID",this.userID),this.cartsRef.doc(this.userID).set({}))})}ngOnInit(){}getItems(){var t=this;return(0,he.Z)(function*(){let r=t.getCartID();return t.db.collection("carts").doc(r).collection("items")})()}getCartID(){return localStorage.getItem("cartID")}addToCart(t){const r=this.getCartID(),o=this.db.collection("carts").doc(r).collection("items");o.doc(t.key).get().pipe((0,it.U)(c=>c.exists)).subscribe(c=>{c?o.doc(t.key).update({item:t,quantity:Ku.Z.firestore.FieldValue.increment(1)}):o.doc(t.key).set({item:t,quantity:1})})}removeFromCart(t){const r=this.getCartID(),o=this.db.collection("carts").doc(r).collection("items");o.doc(t.key).get().pipe((0,it.U)(c=>c.data())).subscribe(c=>{null!=c&&(c.quantity>1?o.doc(t.key).update({item:t,quantity:Ku.Z.firestore.FieldValue.increment(-1)}):o.doc(t.key).delete())})}isDishInCart(t){var r=this;return(0,he.Z)(function*(){const o=r.getCartID(),c=r.db.collection("carts").doc(o).collection("items");let f=!1;return yield c.doc(t.key).get().pipe((0,it.U)(_=>_.exists)).forEach(_=>f=_),f})()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wc),u.LFG(LT))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),tw=(()=>{class n{constructor(){this.counterSource=new jn(0),this.currentCounter=this.counterSource.asObservable()}changeCounter(t){this.counterSource.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function FR(n,e){if(1&n&&(u.TgZ(0,"div",6),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.TgZ(3,"span"),u._uU(4),u.qZA(),u.qZA()),2&n){const t=e.$implicit,r=u.oxw();u.xp6(2),u.AsE("",t.quantity," x ",t.item.name," "),u.xp6(2),u.AsE("",t.item.price*r.currency.converter,"",r.currency.symbol,"")}}let LR=(()=>{class n{constructor(t,r,o){this.currencyService=t,this.cartService=r,this.counterService=o}ngOnInit(){var t=this;return(0,he.Z)(function*(){t.currencyService.currentCurrency.subscribe(r=>t.currency=r),t.subscription=(yield t.cartService.getItems()).snapshotChanges().pipe((0,it.U)(r=>r.map(o=>Object.assign({key:o.payload.doc.id},o.payload.doc.data())))).subscribe(r=>{t.items=r,t.totalPrice=t.calculateTotalPrice(t.items)})})()}ngOnDestroy(){this.subscription.unsubscribe()}calculateTotalPrice(t){let r=0;return t.forEach(o=>{r+=o.quantity*o.item.price}),Math.round(1e3*r)/1e3}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Wf),u.Y36(Eg),u.Y36(tw))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-cart"]],decls:11,vars:3,consts:[[1,"container"],[1,"cart"],[1,"items"],["class","cart-item",4,"ngFor","ngForOf"],[1,"total"],["type","submit",1,"purchase"],[1,"cart-item"]],template:function(t,r){1&t&&(u.TgZ(0,"main",0),u.TgZ(1,"div",1),u.TgZ(2,"h2"),u._uU(3,"Tw\xf3j koszyk"),u.qZA(),u.TgZ(4,"section",2),u.YNc(5,FR,5,4,"div",3),u.qZA(),u.TgZ(6,"footer"),u.TgZ(7,"div",4),u._uU(8),u.qZA(),u.TgZ(9,"button",5),u._uU(10,"Purchase"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(5),u.Q6J("ngForOf",r.items),u.xp6(3),u.AsE("Total: ",r.totalPrice*r.currency.converter,"",r.currency.symbol,""))},directives:[Tr],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;height:-moz-fit-content;height:fit-content;font-family:"Roboto",sans-serif}h2[_ngcontent-%COMP%]{text-align:center;padding:10px;margin-bottom:0;font-weight:400}.cart[_ngcontent-%COMP%]{margin-top:1rem;display:flex;flex-flow:column nowrap;justify-content:space-around;background-color:#fff;width:60%;min-height:80vh;box-shadow:1px 0 2px #d3d3d3}.items[_ngcontent-%COMP%]{min-height:60vh;max-height:65vh;border-top:grey 1px solid;border-bottom:grey 1px solid;padding:0 2rem;overflow:auto;box-shadow:inset 1px 0 5px #d3d3d3}.cart-item[_ngcontent-%COMP%]{padding:5px;font-size:2.5rem;font-weight:300}footer[_ngcontent-%COMP%]{display:flex;justify-self:center;align-items:center;justify-content:space-around;padding:0 2rem}.purchase[_ngcontent-%COMP%]{align-self:flex-end;margin:10px;font-size:1.5rem;border-style:none}.purchase[_ngcontent-%COMP%]:hover{background-color:#dbdbdb}.purchase[_ngcontent-%COMP%]:active{background-color:#c4c4c4}.total[_ngcontent-%COMP%]{font-size:2rem;font-weight:bold;align-self:flex-start;margin:10px auto 10px 10px;width:-moz-fit-content;width:fit-content;font-weight:400}@media (max-width: 1200px){.cart[_ngcontent-%COMP%]{width:70%}}@media (max-width: 1000px){.cart[_ngcontent-%COMP%]{width:90%}.cart-item[_ngcontent-%COMP%]{font-size:1.8rem}}@media (max-width: 600px){.cart[_ngcontent-%COMP%]{width:95%}.cart-item[_ngcontent-%COMP%]{font-size:5vw}.total[_ngcontent-%COMP%]{font-size:6vw}.purchase[_ngcontent-%COMP%]{font-size:5vw}}']}),n})(),Cc=(()=>{class n{constructor(t){this.dishRef=t.collection("dishes")}setCurrentDish(t){this.dish=t}getCurrentDish(){return this.dish}createDish(t){return this.dishRef.doc().set(Object.assign({},t))}getDishesList(){return this.dishRef}updateDish(t,r){return this.dishRef.doc(t).set(r)}deleteDish(t){return this.dishRef.doc(t).delete()}getDishDoc(t){return this.dishRef.doc(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(LT))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),fb=(()=>{class n{constructor(t,r){this.dishService=t,this.authService=r,this.ratingSource=new jn(0),this.currentDishRating=this.ratingSource.asObservable(),this.currentReviewRating=0,this.authService.userData.subscribe(o=>{this.userID=o.uid})}setCurrentDishReviews(t){this.ratingSource.next(t.rating),this.reviewsRef=this.dishService.getDishDoc(t.key).collection("reviews")}getReviews(){return this.reviewsRef}addReview(t,r,o){return this.reviewsRef.doc(this.userID).get().pipe((0,it.U)(c=>c.exists)).subscribe(c=>{if(c)console.log("You've already created a review");else{this.reviewsRef.doc(this.userID).set(Object.assign({},t));let f=r;f.rating=(r.rating*(o-1)+t.rating)/o,this.ratingSource.next(f.rating),this.dishService.updateDish(r.key,f)}})}setReviewsRating(t){this.currentReviewRating=t}getRating(){return this.currentReviewRating}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Cc),u.LFG(wc))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const UR=function(n){return{disabled:n}};let p1=(()=>{class n{constructor(t,r,o){this.counterService=t,this.dishService=r,this.cartService=o}ngOnInit(){this.counterService.currentCounter.subscribe(t=>this.counter=t)}addItemToCart(t){t.amount-t.ordered>0&&(this.cartService.addToCart(t),t.ordered+=1,this.dishService.updateDish(t.key,t))}removeItemFromCart(t){t.ordered>0&&(this.cartService.removeFromCart(t),this.cartService.isDishInCart(t).then(r=>{r&&(t.ordered-=1,this.dishService.updateDish(t.key,t))}))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(tw),u.Y36(Cc),u.Y36(Eg))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-items"]],inputs:{currentDish:"currentDish"},decls:5,vars:3,consts:[[1,"container"],["type","submit",1,"toCart","add",3,"ngClass","click"],["type","submit",1,"toCart","remove",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"button",1),u.NdJ("click",function(){return r.addItemToCart(r.currentDish)}),u._uU(2,"+"),u.qZA(),u.TgZ(3,"button",2),u.NdJ("click",function(){return r.removeItemFromCart(r.currentDish)}),u._uU(4,"-"),u.qZA(),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngClass",u.VKq(1,UR,r.currentDish.amount-r.currentDish.ordered==0)))},directives:[zn],styles:[".container[_ngcontent-%COMP%]{display:flex;grid-gap:10px;gap:10px}.toCart[_ngcontent-%COMP%]{background-color:#cb9367;color:#fff;border:none;width:2rem;display:block}.toCart[_ngcontent-%COMP%]:hover{background-color:#db9a69}.toCart[_ngcontent-%COMP%]:active{background-color:#e49051}"]}),n})(),UT=(()=>{class n{constructor(t){this.reviewService=t}setRating(t){this.reviewService.setReviewsRating(t)}getCurrentDishRating(){return this.reviewService.currentDishRating}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fb))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const VR=function(n){return{checked:n}};let g1=(()=>{class n{constructor(){this.starClicked=new u.vpe}ngOnInit(){}onStarClicked(){this.starClicked.emit(this.starID)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-star"]],inputs:{starID:"starID",rating:"rating"},outputs:{starClicked:"starClicked"},decls:1,vars:3,consts:[[1,"fa","fa-star",3,"ngClass","click"]],template:function(t,r){1&t&&(u.TgZ(0,"span",0),u.NdJ("click",function(){return r.onStarClicked()}),u.qZA()),2&t&&u.Q6J("ngClass",u.VKq(1,VR,r.rating>=r.starID))},directives:[zn],styles:[".checked[_ngcontent-%COMP%]{color:gold}"]}),n})();function BR(n,e){if(1&n&&u._UZ(0,"app-star",2),2&n){const t=e.$implicit,r=u.oxw();u.Q6J("rating",r.ratingNum)("starID",t)}}let jR=(()=>{class n{constructor(t){this.ratingService=t,this.stars=[1,2,3,4,5],this.ratingNum=0}ngOnInit(){this.ratingService.getCurrentDishRating().subscribe(t=>this.ratingNum=t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(UT))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-show-rating"]],inputs:{currentDish:"currentDish"},decls:2,vars:1,consts:[[1,"rate"],[3,"rating","starID",4,"ngFor","ngForOf"],[3,"rating","starID"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,BR,1,2,"app-star",1),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngForOf",r.stars))},directives:[Tr,g1],styles:[".rate[_ngcontent-%COMP%]{z-index:2;font-size:2.5vw}@media (max-width: 600px){.rate[_ngcontent-%COMP%]{font-size:4vw}}"]}),n})(),m1=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),bg=(()=>{class n extends m1{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Ec=new u.OlP("NgValueAccessor"),$R={provide:Ec,useExisting:(0,u.Gpc)(()=>Gh),multi:!0},GR=new u.OlP("CompositionEventMode");let Gh=(()=>{class n extends m1{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(GR,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(c){return r._handleInput(c.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(c){return r._compositionEnd(c.target.value)})},features:[u._Bn([$R]),u.qOj]}),n})();function zh(n){return null==n||0===n.length}function y1(n){return null!=n&&"number"==typeof n.length}const rs=new u.OlP("NgValidators"),Wh=new u.OlP("NgAsyncValidators"),zR=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $t{static min(e){return function(n){return e=>{if(zh(e.value)||zh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function(n){return e=>{if(zh(e.value)||zh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function(n){return zh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function(n){return zh(n.value)||zR.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function(n){return e=>zh(e.value)||!y1(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function(n){return e=>y1(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function(n){if(!n)return nw;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(zh(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return O1(e)}static composeAsync(e){return P1(e)}}function nw(n){return null}function A1(n){return null!=n}function S1(n){const e=(0,u.QGY)(n)?(0,Wt.D)(n):n;return(0,u.CqO)(e),e}function x1(n){let e={};return n.forEach(t=>{e=null!=t?_t(_t({},e),t):e}),0===Object.keys(e).length?null:e}function M1(n,e){return e.map(t=>t(n))}function R1(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function O1(n){if(!n)return null;const e=n.filter(A1);return 0==e.length?null:function(t){return x1(M1(t,e))}}function VT(n){return null!=n?O1(R1(n)):null}function P1(n){if(!n)return null;const e=n.filter(A1);return 0==e.length?null:function(t){return function(...n){const e=(0,co.jO)(n),{args:t,keys:r}=lo(n),o=new Yr.y(c=>{const{length:f}=t;if(!f)return void c.complete();const _=new Array(f);let C=f,T=f;for(let R=0;R<f;R++){let O=!1;(0,Zn.Xf)(t[R]).subscribe(new xn.Q(c,q=>{O||(O=!0,T--),_[R]=q},()=>C--,void 0,()=>{(!C||!O)&&(T||c.next(r?Uo(r,_):_),c.complete())}))}});return e?o.pipe(Lo(e)):o}(M1(t,e).map(S1)).pipe((0,it.U)(x1))}}function BT(n){return null!=n?P1(R1(n)):null}function k1(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function N1(n){return n._rawValidators}function F1(n){return n._rawAsyncValidators}function jT(n){return n?Array.isArray(n)?n:[n]:[]}function pb(n,e){return Array.isArray(n)?n.includes(e):n===e}function L1(n,e){const t=jT(e);return jT(n).forEach(o=>{pb(t,o)||t.push(o)}),t}function U1(n,e){return jT(e).filter(t=>!pb(n,t))}class V1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=VT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=BT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Is extends V1{get formDirective(){return null}get path(){return null}}class Kh extends V1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class B1{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(o=null==(r=this._cd)?void 0:r.control)?void 0:o[e])}}let Yh=(()=>{class n extends B1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Kh,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})(),q_=(()=>{class n extends B1{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Is,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[u.qOj]}),n})();function mb(n,e){return[...e.path,n]}function rw(n,e){$T(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&j1(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&j1(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function _b(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),vb(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function yb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function $T(n,e){const t=N1(n);null!==e.validator?n.setValidators(k1(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=F1(n);null!==e.asyncValidator?n.setAsyncValidators(k1(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();yb(e._rawValidators,o),yb(e._rawAsyncValidators,o)}function vb(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=N1(n);if(Array.isArray(o)&&o.length>0){const c=o.filter(f=>f!==e.validator);c.length!==o.length&&(t=!0,n.setValidators(c))}}if(null!==e.asyncValidator){const o=F1(n);if(Array.isArray(o)&&o.length>0){const c=o.filter(f=>f!==e.asyncValidator);c.length!==o.length&&(t=!0,n.setAsyncValidators(c))}}}const r=()=>{};return yb(e._rawValidators,r),yb(e._rawAsyncValidators,r),t}function j1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function HT(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function GT(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(c=>{c.constructor===Gh?t=c:function(n){return Object.getPrototypeOf(n.constructor)===bg}(c)?r=c:o=c}),o||r||t||null}function wb(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const iw="VALID",Cb="INVALID",$_="PENDING",sw="DISABLED";function zT(n){return(KT(n)?n.validators:n)||null}function $1(n){return Array.isArray(n)?VT(n):n||null}function WT(n,e){return(KT(e)?e.asyncValidators:n)||null}function H1(n){return Array.isArray(n)?BT(n):n||null}function KT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class YT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=$1(this._rawValidators),this._composedAsyncValidatorFn=H1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===iw}get invalid(){return this.status===Cb}get pending(){return this.status==$_}get disabled(){return this.status===sw}get enabled(){return this.status!==sw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=$1(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=H1(e)}addValidators(e){this.setValidators(L1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(L1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(U1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(U1(e,this._rawAsyncValidators))}hasValidator(e){return pb(this._rawValidators,e)}hasAsyncValidator(e){return pb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=sw,this.errors=null,this._forEachChild(r=>{r.disable(pi(_t({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pi(_t({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=iw,this._forEachChild(r=>{r.enable(pi(_t({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(pi(_t({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===iw||this.status===$_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sw:iw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$_,this._hasOwnPendingAsyncValidator=!0;const t=S1(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof Ig?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof QT&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?sw:this.errors?Cb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($_)?$_:this._anyControlsHaveStatus(Cb)?Cb:iw}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){KT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class gr extends YT{constructor(e=null,t,r){super(zT(t),WT(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ig extends YT{constructor(e,t,r){super(zT(t),WT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof gr?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,c)=>{r=t(r,o,c)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class QT extends YT{constructor(e,t,r){super(zT(t),WT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof gr?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const uO={provide:Kh,useExisting:(0,u.Gpc)(()=>Eb)},W1=(()=>Promise.resolve(null))();let Eb=(()=>{class n extends Kh{constructor(t,r,o,c){super(),this.control=new gr,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=GT(0,c)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),HT(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?mb(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){rw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){W1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;W1.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Is,9),u.Y36(rs,10),u.Y36(Wh,10),u.Y36(Ec,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([uO]),u.qOj,u.TTD]}),n})(),H_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const cO={provide:Ec,useExisting:(0,u.Gpc)(()=>bb),multi:!0};let bb=(()=>{class n extends bg{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(c){return r.onChange(c.target.value)})("blur",function(){return r.onTouched()})},features:[u._Bn([cO]),u.qOj]}),n})(),K1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const XT=new u.OlP("NgModelWithFormControlWarning"),pO={provide:Is,useExisting:(0,u.Gpc)(()=>Qh)};let Qh=(()=>{class n extends Is{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(vb(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return rw(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){_b(t.control||null,t,!1),wb(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(_b(r||null,t),o instanceof gr&&(rw(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function(n,e){$T(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return vb(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$T(this.form,this),this._oldForm&&vb(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(rs,10),u.Y36(Wh,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(c){return r.onSubmit(c)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([pO]),u.qOj,u.TTD]}),n})();const _O={provide:Kh,useExisting:(0,u.Gpc)(()=>Dg)};let Dg=(()=>{class n extends Kh{constructor(t,r,o,c,f){super(),this._ngModelWarningConfig=f,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=GT(0,c)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),HT(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return mb(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(Is,13),u.Y36(rs,10),u.Y36(Wh,10),u.Y36(Ec,10),u.Y36(XT,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([_O]),u.qOj,u.TTD]}),n})();const yO={provide:Ec,useExisting:(0,u.Gpc)(()=>aw),multi:!0};function ex(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let aw=(()=>{class n extends bg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const o=ex(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(c){return r.onChange(c.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([yO]),u.qOj]}),n})(),nA=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(ex(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(aw,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const wO={provide:Ec,useExisting:(0,u.Gpc)(()=>rA),multi:!0};function tx(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let rA=(()=>{class n extends bg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(c=>this._getOptionId(c));r=(c,f)=>{c._setSelected(o.indexOf(f.toString())>-1)}}else r=(o,c)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[],c=r.selectedOptions;if(void 0!==c){const f=c;for(let _=0;_<f.length;_++){const T=this._getOptionValue(f[_].value);o.push(T)}}else{const f=r.options;for(let _=0;_<f.length;_++){const C=f[_];if(C.selected){const T=this._getOptionValue(C.value);o.push(T)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(c){return r.onChange(c.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([wO]),u.qOj]}),n})(),iA=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(tx(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(tx(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(rA,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),dx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[K1]]}),n})(),MO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[dx]}),n})(),hx=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:XT,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[dx]}),n})(),oA=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let _,c=null,f=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(c=null!=r.validators?r.validators:null,f=null!=r.asyncValidators?r.asyncValidators:null,_=null!=r.updateOn?r.updateOn:void 0):(c=null!=r.validator?r.validator:null,f=null!=r.asyncValidator?r.asyncValidator:null)),new Ig(o,{asyncValidators:f,updateOn:_,validators:c})}control(t,r,o){return new gr(t,r,o)}array(t,r,o){const c=t.map(f=>this._createControl(f));return new QT(c,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof gr||t instanceof Ig||t instanceof QT?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:hx}),n})();function OO(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"app-star",2),u.NdJ("starClicked",function(o){return u.CHM(t),u.oxw().onStarClicked(o)}),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw();u.Q6J("starID",t)("rating",r.ratingNum)}}let PO=(()=>{class n{constructor(t){this.ratingService=t,this.stars=[1,2,3,4,5],this.ratingNum=0}ngOnInit(){}onStarClicked(t){this.ratingNum=t,this.ratingService.setRating(this.ratingNum)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(UT))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-rate"]],decls:2,vars:1,consts:[[1,"rate"],[3,"starID","rating","starClicked",4,"ngFor","ngForOf"],[3,"starID","rating","starClicked"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,OO,1,2,"app-star",1),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngForOf",r.stars))},directives:[Tr,g1],styles:[".rate[_ngcontent-%COMP%]{z-index:2;font-size:1rem}"]}),n})();function kO(n,e){1&n&&(u.TgZ(0,"div",14),u._uU(1," Wprowad\u017a sw\xf3j nick "),u.qZA())}function NO(n,e){1&n&&(u.TgZ(0,"div",14),u._uU(1," Wprowad\u017a tytu\u0142 "),u.qZA())}function FO(n,e){1&n&&(u.TgZ(0,"div",14),u._uU(1," Wprowad\u017a tre\u015b\u0107 "),u.qZA())}function LO(n,e){1&n&&(u.TgZ(0,"div",14),u._uU(1," Tre\u015b\u0107 powinna zawiera\u0107 co najmniej 50 znak\xf3w "),u.qZA())}function UO(n,e){1&n&&(u.TgZ(0,"div",14),u._uU(1," Tre\u015b\u0107 nie mo\u017ce przekracza\u0107 500 znak\xf3w "),u.qZA())}function VO(n,e){1&n&&(u.TgZ(0,"div",14),u._uU(1," Wprowad\u017a dat\u0119 zakupu "),u.qZA())}function BO(n,e){if(1&n&&(u.TgZ(0,"li",15),u.TgZ(1,"header",16),u.TgZ(2,"span",17),u._uU(3),u.ALo(4,"titlecase"),u.qZA(),u.TgZ(5,"span",18),u._uU(6),u.qZA(),u.qZA(),u.TgZ(7,"h6",19),u._uU(8),u.qZA(),u.TgZ(9,"section",20),u._uU(10),u.qZA(),u.qZA()),2&n){const t=e.$implicit;u.xp6(3),u.Oqu(u.lcZ(4,4,t.name)),u.xp6(3),u.Oqu(t.date),u.xp6(2),u.Oqu(t.title),u.xp6(2),u.Oqu(t.content)}}let jO=(()=>{class n{constructor(t,r,o){this.reviewService=t,this.dishService=r,this.cartService=o,this.reviews=[],this.counterChange=new u.vpe,this.addReviewForm=new Ig({rating:new gr(0,$t.required),name:new gr("",[$t.required,this.notOnlyWhitespaceValidator]),title:new gr("",[$t.required,this.notOnlyWhitespaceValidator]),content:new gr("",[$t.required,$t.minLength(50),$t.maxLength(500),this.notOnlyWhitespaceValidator]),date:new gr})}ngOnInit(){this.dish=this.dishService.dish,this.reviewService.setCurrentDishReviews(this.dish),this.subscription=this.reviewService.getReviews().valueChanges().subscribe(t=>{this.reviews=t,this.counterChange.emit(this.reviews.length)})}onSubmit(){this.cartService.isDishInCart(this.dish).then(t=>{t?(this.addReviewForm.patchValue({rating:this.reviewService.getRating()}),this.reviewService.addReview(this.addReviewForm.value,this.dish,this.reviews.length+1),this.addReviewForm.reset()):alert("Nie mo\u017cna doda\u0107 opinii o daniu, kt\xf3rego nie zarezerwowano!")})}notOnlyWhitespaceValidator(t){return 0!==(t.value||"").trim().length?null:{whitespace:!0}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(fb),u.Y36(Cc),u.Y36(Eg))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-reviews"]],outputs:{counterChange:"counterChange"},decls:32,vars:9,consts:[[1,"form-container"],["id","reviewform",3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","name","placeholder","Nick",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","text","formControlName","title","placeholder","Tytu\u0142",1,"form-control"],["form","reviewform","formControlName","content","placeholder","Tre\u015b\u0107",1,"form-control"],["for",""],["type","date","formControlName","date","placeholder","Data zakupu",1,"form-control"],["type","submit",1,"add",3,"disabled"],[1,"reviews-container"],[1,"reviews"],[1,"reviews","list"],["class","reviews list-item",4,"ngFor","ngForOf"],[1,"alert","alert-danger"],[1,"reviews","list-item"],[1,"reviewhead"],[1,"name"],[1,"date"],[1,"title"],[1,"content"]],template:function(t,r){1&t&&(u.TgZ(0,"main",0),u.TgZ(1,"h4"),u._uU(2,"Dodaj recenzj\u0119"),u.qZA(),u.TgZ(3,"form",1),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(4,"div",2),u._UZ(5,"input",3),u.YNc(6,kO,2,0,"div",4),u.qZA(),u.TgZ(7,"div",2),u._UZ(8,"input",5),u.YNc(9,NO,2,0,"div",4),u.qZA(),u.TgZ(10,"div",2),u._UZ(11,"textarea",6),u.YNc(12,FO,2,0,"div",4),u.YNc(13,LO,2,0,"div",4),u.YNc(14,UO,2,0,"div",4),u.qZA(),u.TgZ(15,"div",2),u.TgZ(16,"span"),u._uU(17,"Ocena: "),u.qZA(),u._UZ(18,"app-rate"),u.qZA(),u.TgZ(19,"div",2),u.TgZ(20,"label",7),u._uU(21," Data zakupu "),u._UZ(22,"input",8),u.qZA(),u.YNc(23,VO,2,0,"div",4),u.qZA(),u.TgZ(24,"button",9),u._uU(25,"Dodaj"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"main",10),u.TgZ(27,"h4"),u._uU(28,"Recenzje"),u.qZA(),u.TgZ(29,"div",11),u.TgZ(30,"ul",12),u.YNc(31,BO,11,6,"li",13),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(3),u.Q6J("formGroup",r.addReviewForm),u.xp6(3),u.Q6J("ngIf",r.addReviewForm.controls.name.hasError("required")),u.xp6(3),u.Q6J("ngIf",r.addReviewForm.controls.title.hasError("required")),u.xp6(3),u.Q6J("ngIf",r.addReviewForm.controls.content.hasError("required")),u.xp6(1),u.Q6J("ngIf",r.addReviewForm.controls.content.hasError("minlength")),u.xp6(1),u.Q6J("ngIf",r.addReviewForm.controls.content.hasError("maxlength")),u.xp6(9),u.Q6J("ngIf",r.addReviewForm.controls.date.hasError("required")),u.xp6(1),u.Q6J("disabled",!r.addReviewForm.valid),u.xp6(7),u.Q6J("ngForOf",r.reviews))},directives:[H_,q_,Qh,Gh,Yh,Dg,sr,PO,Tr],pipes:[eo],styles:[".form-container[_ngcontent-%COMP%]{border-top:lightgrey 1px solid;padding:2rem}textarea[_ngcontent-%COMP%]{width:100%;resize:none;height:100px;padding:5px 5px 5px 12px}.form-group[_ngcontent-%COMP%]{display:block;margin:1rem 0}input.ng-invalid[_ngcontent-%COMP%], textarea.ng-invalid[_ngcontent-%COMP%]{border-left:solid red 5px}input.ng-valid[_ngcontent-%COMP%], textarea.ng-valid[_ngcontent-%COMP%]{border-left:solid green 5px}.alert-danger[_ngcontent-%COMP%]{padding:5px}.list[_ngcontent-%COMP%]{padding:0}.list-item[_ngcontent-%COMP%]{list-style-type:none;padding:1rem;border-bottom:rgb(196,196,196) solid 1px}.add[_ngcontent-%COMP%]{border-style:none}.add[_ngcontent-%COMP%]:hover{background-color:#dbdbdb}.add[_ngcontent-%COMP%]:active{background-color:#c4c4c4}.reviewhead[_ngcontent-%COMP%]{display:flex;position:relative;flex-flow:column;align-items:flex-start}.name[_ngcontent-%COMP%]{font-size:1.5rem}.date[_ngcontent-%COMP%]{position:absolute;right:0;top:0;color:gray;font-size:1rem}.title[_ngcontent-%COMP%]{font-size:1rem}.rating[_ngcontent-%COMP%]{width:130px;height:30px}.content[_ngcontent-%COMP%]{font-size:.8rem;word-wrap:break-word}@media (max-width: 768px){.name[_ngcontent-%COMP%]{font-size:4vw}.title[_ngcontent-%COMP%]{font-size:3vw}.date[_ngcontent-%COMP%]{font-size:2vw}.content[_ngcontent-%COMP%]{font-size:2.5vw}}@media (max-width: 600px){.name[_ngcontent-%COMP%]{font-size:5vw}.title[_ngcontent-%COMP%]{font-size:4vw}.date[_ngcontent-%COMP%]{font-size:3vw}.content[_ngcontent-%COMP%]{font-size:3.5vw}}@media (max-width: 400px){input[type=date][_ngcontent-%COMP%]{width:50vw}}"]}),n})();function ZO(n,e){if(1&n&&(u.TgZ(0,"div",25),u._UZ(1,"img",4),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.MGl("src","assets/img/",t,"",u.LSH)}}function qO(n,e){if(1&n&&(u.TgZ(0,"li"),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.hij(" ",t," ")}}let $O=(()=>{class n{constructor(t,r,o){this.dishService=t,this.currencyService=r,this.reviewService=o,this.counter=0}ngOnInit(){this.dish=this.dishService.getCurrentDish(),this.currencyService.currentCurrency.subscribe(t=>this.currency=t),this.reviewService.setCurrentDishReviews(this.dish)}setReviewCounter(t){this.counter=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(Wf),u.Y36(fb))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-dishdetails"]],decls:48,vars:18,consts:[[1,"container"],["id","carouselExampleControls","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active"],["alt","",1,"d-block","w-100",3,"src"],["class","carousel-item",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"content"],[1,"items"],[3,"currentDish"],[1,"price"],[1,"left"],[1,"rating"],[1,"ratingcount"],[1,"details"],[1,"description"],[1,"ingredients"],[4,"ngFor","ngForOf"],[1,"flex-footer"],["routerLink","../../dishes/1"],[3,"counterChange"],[1,"carousel-item"]],template:function(t,r){1&t&&(u.TgZ(0,"main",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u._UZ(4,"img",4),u.qZA(),u.YNc(5,ZO,2,1,"div",5),u.qZA(),u.TgZ(6,"button",6),u._UZ(7,"span",7),u.TgZ(8,"span",8),u._uU(9,"Previous"),u.qZA(),u.qZA(),u.TgZ(10,"button",9),u._UZ(11,"span",10),u.TgZ(12,"span",8),u._uU(13,"Next"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(14,"div",11),u.TgZ(15,"header"),u.TgZ(16,"h3"),u._uU(17),u.ALo(18,"uppercase"),u.qZA(),u.TgZ(19,"h4"),u._uU(20),u.ALo(21,"uppercase"),u.qZA(),u.TgZ(22,"div",12),u._UZ(23,"app-items",13),u.qZA(),u.qZA(),u.TgZ(24,"h5"),u._uU(25),u.qZA(),u.TgZ(26,"div",14),u._uU(27),u.qZA(),u.TgZ(28,"div",15),u._uU(29),u.qZA(),u.TgZ(30,"div",16),u._UZ(31,"app-show-rating",13),u.TgZ(32,"span",17),u._uU(33),u.qZA(),u.qZA(),u.TgZ(34,"section",18),u.TgZ(35,"p",19),u._uU(36),u.qZA(),u.TgZ(37,"ul",20),u.YNc(38,qO,2,1,"li",21),u.qZA(),u._UZ(39,"aside"),u.qZA(),u.TgZ(40,"footer"),u._UZ(41,"br"),u.TgZ(42,"section",22),u.TgZ(43,"div"),u.TgZ(44,"a",23),u._uU(45,"Wr\xf3\u0107 do listy da\u0144"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u._UZ(46,"br"),u.TgZ(47,"app-reviews",24),u.NdJ("counterChange",function(c){return r.setReviewCounter(c)}),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(4),u.MGl("src","assets/img/",r.dish.pictures.split(",")[0],"",u.LSH),u.xp6(1),u.Q6J("ngForOf",r.dish.pictures.split(",").slice(1)),u.xp6(12),u.hij("",u.lcZ(18,14,r.dish.name)," "),u.xp6(3),u.hij("KUCHNIA ",u.lcZ(21,16,r.dish.cuisine),""),u.xp6(3),u.Q6J("currentDish",r.dish),u.xp6(2),u.AsE("",r.dish.type," | ",r.dish.time,""),u.xp6(2),u.AsE("Cena: ",r.dish.price*r.currency.converter,"",r.currency.symbol,""),u.xp6(2),u.hij("Pozosta\u0142o: ",r.dish.amount-r.dish.ordered,""),u.xp6(2),u.Q6J("currentDish",r.dish),u.xp6(2),u.Oqu(r.counter),u.xp6(3),u.Oqu(r.dish.description),u.xp6(2),u.Q6J("ngForOf",r.dish.ingredients.split(",")))},directives:[Tr,p1,jR,v,jO],pipes:[yu],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;align-items:center;height:-moz-fit-content;height:fit-content;max-width:90%;background-color:#fff}.carousel[_ngcontent-%COMP%]{max-width:1000px;max-height:500px;min-width:800px}.carousel-item[_ngcontent-%COMP%]{max-height:500px;min-width:800px;max-width:1000px}img[_ngcontent-%COMP%]{width:100%;object-fit:cover;object-position:top}.content[_ngcontent-%COMP%]{padding:20px;width:90%;height:-moz-fit-content;height:fit-content}img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;object-position:center}.stock-out[_ngcontent-%COMP%]{mix-blend-mode:darken}.lowOrders[_ngcontent-%COMP%]{background-color:#ffcc6d}.highOrders[_ngcontent-%COMP%]{background-color:#97d6fd}.subheader[_ngcontent-%COMP%]{display:flex;position:relative;justify-content:space-around;align-content:center;margin-bottom:2rem;padding:2rem 0;border-bottom:solid 2px lightgrey}.counter[_ngcontent-%COMP%]{display:block;text-align:center;width:-moz-fit-content;width:fit-content;padding:0 3rem;font-size:2rem;box-shadow:inset gray 0 2px 5px;justify-self:center;margin:auto}header[_ngcontent-%COMP%]{position:relative;display:flex;flex-flow:row nowrap;align-items:baseline;grid-gap:3vw;gap:3vw}h3[_ngcontent-%COMP%]{margin-bottom:0;color:#545353;font-size:5vw;max-width:30vw;width:-moz-fit-content;width:fit-content}h4[_ngcontent-%COMP%]{margin-top:5px;color:#737373;margin-bottom:0;font-size:2.5vw;width:-moz-fit-content;width:fit-content}h5[_ngcontent-%COMP%]{color:#8e8e8e;margin-top:5px;font-size:2vw;width:-moz-fit-content;width:fit-content}.left[_ngcontent-%COMP%]{display:block;font-size:1.5vw}.items[_ngcontent-%COMP%]{position:absolute;right:-3rem}.price[_ngcontent-%COMP%]{display:block;font-size:2vw}.rating[_ngcontent-%COMP%]{display:flex;align-items:baseline;grid-gap:10px;gap:10px}.ratingcount[_ngcontent-%COMP%]{font-size:3vw}.details[_ngcontent-%COMP%]{padding-top:1rem;display:flex;flex-flow:row wrap;justify-content:space-between;align-content:space-around;height:-moz-fit-content;height:fit-content}.ingredients[_ngcontent-%COMP%]{align-self:flex-start;padding:5px;margin:0}.ingredients[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:1.5vw;list-style-type:none;margin-left:10px}.description[_ngcontent-%COMP%]{align-self:flex-end;color:gray;font-size:1.7vw;padding:15px 0;margin:0;width:100%}.flex-footer[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:space-between;align-items:center;padding-top:6px}@media (max-width: 1000px){.main[_ngcontent-%COMP%]{margin:0}.carousel[_ngcontent-%COMP%]{max-width:600px;max-height:400px;min-width:200px}.carousel-item[_ngcontent-%COMP%]{max-height:400px;min-width:200px;max-width:600px}}@media (max-width: 768px){header[_ngcontent-%COMP%]{flex-flow:column nowrap;grid-gap:1vh;gap:1vh}h3[_ngcontent-%COMP%]{font-size:5vw}h4[_ngcontent-%COMP%]{font-size:4vw}h5[_ngcontent-%COMP%]{font-size:3vw}.description[_ngcontent-%COMP%]{font-size:3vw}.ingredients[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:2.5vw}.price[_ngcontent-%COMP%]{font-size:3vw}.left[_ngcontent-%COMP%]{font-size:2.5vw}}@media (max-width: 600px){h3[_ngcontent-%COMP%]{font-size:7vw}h4[_ngcontent-%COMP%]{font-size:6vw}h5[_ngcontent-%COMP%]{font-size:5vw}.description[_ngcontent-%COMP%]{font-size:4.5vw}.ingredients[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:4vw}.price[_ngcontent-%COMP%]{font-size:4.5vw}.left[_ngcontent-%COMP%]{font-size:4.5vw}.ratingcount[_ngcontent-%COMP%]{font-size:5vw}}"]}),n})(),aA=(()=>{class n{constructor(){this.lengthSource=new jn(12),this.elementsLength=this.lengthSource.asObservable(),this.pageSource=new jn(1),this.currentPage=this.pageSource.asObservable(),this.elementSource=new jn(12),this.elementsCount=this.elementSource.asObservable()}setPageNum(t){this.pageSource.next(t)}setElementsCount(t){this.elementSource.next(t)}setElementsLength(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const HO=function(n,e){return{highOrders:n,lowOrders:e}};let GO=(()=>{class n{constructor(t,r){this.counterService=t,this.cartService=r,this.counter=0}ngOnInit(){var t=this;return(0,he.Z)(function*(){t.subscription=(yield t.cartService.getItems()).snapshotChanges().pipe((0,it.U)(r=>r.map(o=>Object.assign({key:o.payload.doc.id},o.payload.doc.data())))).subscribe(r=>{t.counter=t.calculateTotalQuantity(r)}),t.counterService.currentCounter.subscribe(r=>t.counter=r)})()}calculateTotalQuantity(t){let r=0;return t.forEach(o=>{r+=o.quantity}),r}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(tw),u.Y36(Eg))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-counter"]],decls:2,vars:5,consts:[[1,"counter",3,"ngClass"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u._uU(1),u.qZA()),2&t&&(u.Q6J("ngClass",u.WLB(2,HO,r.counter>=10,r.counter<10)),u.xp6(1),u.Oqu(r.counter))},directives:[zn],styles:[".counter[_ngcontent-%COMP%]{display:block;text-align:center;width:-moz-fit-content;width:fit-content;padding:0 3rem;font-size:2rem;box-shadow:inset gray 0 1px 2px;margin:auto;border-radius:50px;color:#fff}.lowOrders[_ngcontent-%COMP%]{background-color:#e9a572}.highOrders[_ngcontent-%COMP%]{background-color:#5ea4d0}"]}),n})();const zO=["polska","japo\u0144ska","meksyka\u0144ska","grecka","w\u0142oska","ameryka\u0144ska","francuska","bliskowschodnia"],WO=["obiad","\u015bniadanie","deser","przystawka"],KO=["zupa","wegetaria\u0144skie","mi\u0119sne","ciastka","sa\u0142atka","makaron","ciasto","chleb"];function YO(n,e){if(1&n&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t)}}function QO(n,e){if(1&n&&(u.TgZ(0,"option",7),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("ngValue",t),u.xp6(1),u.Oqu(t)}}function JO(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"select",5),u.NdJ("ngModelChange",function(o){return u.CHM(t),u.oxw().onCuisineChange(o)}),u.YNc(1,QO,2,2,"option",6),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("ngModel",t.selectedCuisine),u.xp6(1),u.Q6J("ngForOf",t.cuisines)}}function XO(n,e){if(1&n&&(u.TgZ(0,"option",7),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("ngValue",t),u.xp6(1),u.Oqu(t)}}function eP(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"select",5),u.NdJ("ngModelChange",function(o){return u.CHM(t),u.oxw().onTypeChange(o)}),u.YNc(1,XO,2,2,"option",6),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("ngModel",t.selectedType),u.xp6(1),u.Q6J("ngForOf",t.types)}}function tP(n,e){if(1&n&&(u.TgZ(0,"option",7),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("ngValue",t),u.xp6(1),u.Oqu(t)}}function nP(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"select",5),u.NdJ("ngModelChange",function(o){return u.CHM(t),u.oxw().onTimeChange(o)}),u.YNc(1,tP,2,2,"option",6),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("ngModel",t.selectedTime),u.xp6(1),u.Q6J("ngForOf",t.times)}}function rP(n,e){if(1&n&&(u.TgZ(0,"option",7),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.Q6J("ngValue",t),u.xp6(1),u.Oqu(t)}}const iP=function(){return[1,2,3,4,5]};function sP(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"select",5),u.NdJ("ngModelChange",function(o){return u.CHM(t),u.oxw().onRatingChange(o)}),u.YNc(1,rP,2,2,"option",6),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("ngModel",t.selectedRating),u.xp6(1),u.Q6J("ngForOf",u.DdM(2,iP))}}let oP=(()=>{class n{constructor(){this.cuisines=zO,this.selectedCuisine="",this.cuisineChange=new u.vpe,this.selectedType="",this.types=KO,this.typeChange=new u.vpe,this.selectedTime="",this.times=WO,this.timeChange=new u.vpe,this.selectedRating=0,this.rating=[0,1,2,3,4,5],this.ratingChange=new u.vpe,this.filters=["typ kuchni","typ dania","kategoria dania","ocena"],this.selectedFilter="",this.filterReset=new u.vpe}ngOnInit(){}selectFilter(t){this.selectedFilter=t}onCuisineChange(t){this.cuisineChange.emit(t)}onTypeChange(t){this.typeChange.emit(t)}onTimeChange(t){this.timeChange.emit(t)}onRatingChange(t){this.ratingChange.emit(t)}resetFilter(){this.selectedFilter="",this.filterReset.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-filter"]],outputs:{cuisineChange:"cuisineChange",typeChange:"typeChange",timeChange:"timeChange",ratingChange:"ratingChange",filterReset:"filterReset"},decls:11,vars:6,consts:[[1,"filter"],["type","button",1,"all",3,"click"],[1,"filter-category",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["class","filter-type",3,"ngModel","ngModelChange",4,"ngIf"],[1,"filter-type",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,r){1&t&&(u.TgZ(0,"main",0),u.TgZ(1,"h6"),u._uU(2,"Filtruj dania"),u.qZA(),u.TgZ(3,"button",1),u.NdJ("click",function(){return r.resetFilter()}),u._uU(4,"All"),u.qZA(),u.TgZ(5,"select",2),u.NdJ("ngModelChange",function(c){return r.selectFilter(c)}),u.YNc(6,YO,2,1,"option",3),u.qZA(),u.YNc(7,JO,2,2,"select",4),u.YNc(8,eP,2,2,"select",4),u.YNc(9,nP,2,2,"select",4),u.YNc(10,sP,2,3,"select",4),u.qZA()),2&t&&(u.xp6(5),u.Q6J("ngModel",r.selectedFilter),u.xp6(1),u.Q6J("ngForOf",r.filters),u.xp6(1),u.Q6J("ngIf","typ kuchni"==r.selectedFilter),u.xp6(1),u.Q6J("ngIf","typ dania"==r.selectedFilter),u.xp6(1),u.Q6J("ngIf","kategoria dania"==r.selectedFilter),u.xp6(1),u.Q6J("ngIf","ocena"==r.selectedFilter))},directives:[aw,Yh,Eb,Tr,sr,nA,iA],styles:[".filter[_ngcontent-%COMP%]{height:4rem;margin-left:1rem;width:-moz-fit-content;width:fit-content}.all[_ngcontent-%COMP%]{border-style:none;background-color:#fff}.all[_ngcontent-%COMP%]:hover{background-color:#e7e7e7}.all[_ngcontent-%COMP%]:active{background-color:#dbdbdb}@media (max-width: 400px){.filter-category[_ngcontent-%COMP%]{width:30vw;font-size:.8rem}.filter-type[_ngcontent-%COMP%]{width:35vw;font-size:.8rem}}"]}),n})();function aP(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",3),u.TgZ(1,"a",4),u.NdJ("click",function(){const c=u.CHM(t).$implicit;return u.oxw().setPageNum(c)}),u._uU(2),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(2),u.Oqu(t)}}let uP=(()=>{class n{constructor(t,r,o){this.paginationService=t,this.router=r,this.activeroute=o,this.length=0,this.currentPageNum=0,this.elementsOnPage=0,this.numberOfPages=1}ngOnInit(){this.paginationService.elementsCount.subscribe(t=>this.elementsOnPage=t),this.paginationService.currentPage.subscribe(t=>this.currentPageNum=t),this.paginationService.elementsLength.subscribe(t=>this.length=t),this.activeroute.paramMap.subscribe(t=>{if(null!=t.get("page")){let r=+t.get("page");this.paginationService.setPageNum(r)}})}getArray(){return Array.from(Array(this.length),(t,r)=>r)}setElements(t){this.paginationService.setElementsCount(t),this.numberOfPages=Math.ceil(this.length/this.elementsOnPage+1),this.paginationService.setPageNum(1),this.router.navigate(["/dishes",1])}setPageNum(t){t>0&&t<Math.ceil(this.length/this.elementsOnPage+1)&&(this.router.navigate(["/dishes",t]),this.paginationService.setPageNum(t))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(aA),u.Y36(dr),u.Y36(Ba))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-pagination"]],decls:18,vars:6,consts:[[1,"elementsOnPage",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(u.TgZ(0,"nav"),u.TgZ(1,"select",0),u.NdJ("ngModelChange",function(c){return r.setElements(c)}),u.TgZ(2,"option",1),u._uU(3,"ALL"),u.qZA(),u.TgZ(4,"option",1),u._uU(5,"3"),u.qZA(),u.TgZ(6,"option",1),u._uU(7,"6"),u.qZA(),u.TgZ(8,"option",1),u._uU(9,"9"),u.qZA(),u.qZA(),u.TgZ(10,"ul",2),u.TgZ(11,"li",3),u.TgZ(12,"a",4),u.NdJ("click",function(){return r.setPageNum(r.currentPageNum-1)}),u._uU(13,"<"),u.qZA(),u.qZA(),u.YNc(14,aP,3,1,"li",5),u.TgZ(15,"li",3),u.TgZ(16,"a",4),u.NdJ("click",function(){return r.setPageNum(r.currentPageNum+1)}),u._uU(17,">"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngModel",r.elementsOnPage),u.xp6(1),u.Q6J("ngValue",r.length),u.xp6(2),u.Q6J("ngValue",3),u.xp6(2),u.Q6J("ngValue",6),u.xp6(2),u.Q6J("ngValue",9),u.xp6(6),u.Q6J("ngForOf",r.getArray().slice(1,r.numberOfPages)))},directives:[aw,Yh,Eb,nA,iA,Tr],styles:["nav[_ngcontent-%COMP%]{display:flex}.elementsOnPage[_ngcontent-%COMP%]{height:38px}"]}),n})(),cP=(()=>{class n{transform(t,r,o,c,f){return t.filter(_=>!(r!=_.cuisine&&""!=r||o!=_.type&&""!=o||c!=_.time&&""!=c||f!=_.rating&&0!=f))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"filterdishes",type:n,pure:!1}),n})();const lP=function(n,e,t,r){return{shortage:n,nomore:e,max:t,min:r}},dP=function(n){return["/dish",n]},hP=function(n){return{"stock-out":n}};function fP(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",5),u.TgZ(1,"div",6),u.TgZ(2,"a",7),u.NdJ("click",function(){const c=u.CHM(t).$implicit;return u.oxw().setCurrentDish(c)}),u._UZ(3,"img",8),u.qZA(),u.qZA(),u.TgZ(4,"div",9),u.TgZ(5,"header",10),u.TgZ(6,"h3"),u._uU(7),u.ALo(8,"uppercase"),u.qZA(),u.TgZ(9,"div",11),u._uU(10),u.qZA(),u.TgZ(11,"div",12),u._uU(12),u.qZA(),u._UZ(13,"app-items",13),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw();u.Q6J("ngClass",u.l5B(11,lP,t.amount-t.ordered<=3,t.amount-t.ordered==0,t.key==r.maxPriceDish.key,t.key==r.minPriceDish.key)),u.xp6(2),u.Q6J("routerLink",u.VKq(16,dP,t.name)),u.xp6(1),u.MGl("src","assets/img/",t.pictures.split(",")[0],"",u.LSH),u.Q6J("ngClass",u.VKq(18,hP,t.amount-t.ordered==0)),u.xp6(4),u.Oqu(u.lcZ(8,9,t.name)),u.xp6(3),u.AsE("",t.price*r.currency.converter,"",r.currency.symbol,""),u.xp6(2),u.hij("Pozosta\u0142o: ",t.amount-t.ordered,""),u.xp6(1),u.Q6J("currentDish",t)}}const pP=function(n,e,t,r,o){return[n,e,t,r,o]};let gP=(()=>{class n{constructor(t,r,o,c){this.currencyService=t,this.cartService=r,this.dishService=o,this.paginationService=c,this.dishes=[],this.elementsOnPage=6,this.pageNum=2,this.selectedCuisine="",this.selectedType="",this.selectedTime="",this.selectedRating=0,this.getDishesList()}ngOnInit(){this.currencyService.currentCurrency.subscribe(t=>this.currency=t),this.paginationService.currentPage.subscribe(t=>this.pageNum=t),this.paginationService.elementsCount.subscribe(t=>this.elementsOnPage=t)}getDishesList(){this.dishService.getDishesList().snapshotChanges().pipe((0,it.U)(t=>t.map(r=>Object.assign({key:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.dishes=t,this.minPriceDish=this.getMinPriceDish(this.dishes),this.maxPriceDish=this.getMaxPriceDish(this.dishes)})}getMinPriceDish(t){return t.sort((r,o)=>r.price-o.price)[0]}getMaxPriceDish(t){return t.sort((r,o)=>r.price-o.price)[this.dishes.length-1]}setCurrentDish(t){this.dishService.setCurrentDish(t)}changeType(t){this.selectedType=t,this.selectedCuisine="",this.selectedTime="",this.selectedRating=0}changeCuisine(t){this.selectedCuisine=t,this.selectedType="",this.selectedTime="",this.selectedRating=0}changeTime(t){this.selectedTime=t,this.selectedType="",this.selectedCuisine="",this.selectedRating=0}changeRating(t){this.selectedRating=t,this.selectedType="",this.selectedCuisine="",this.selectedTime=""}changeFiltering(){this.selectedType="",this.selectedCuisine="",this.selectedTime="",this.selectedRating=0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Wf),u.Y36(Eg),u.Y36(Cc),u.Y36(aA))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-dishes"]],decls:8,vars:13,consts:[[1,"counter"],[3,"cuisineChange","typeChange","timeChange","ratingChange","filterReset"],[1,"pagination"],[1,"container"],["class","card",3,"ngClass",4,"ngFor","ngForOf"],[1,"card",3,"ngClass"],[1,"dishImage"],[3,"routerLink","click"],["alt","Image",3,"src","ngClass"],[1,"content"],[1,"dishHeader"],[1,"price"],[1,"left"],[1,"toCartItems",3,"currentDish"]],template:function(t,r){1&t&&(u.TgZ(0,"header",0),u._UZ(1,"app-counter"),u.qZA(),u.TgZ(2,"app-filter",1),u.NdJ("cuisineChange",function(c){return r.changeCuisine(c)})("typeChange",function(c){return r.changeType(c)})("timeChange",function(c){return r.changeTime(c)})("ratingChange",function(c){return r.changeRating(c)})("filterReset",function(){return r.changeFiltering()}),u.qZA(),u.TgZ(3,"div",2),u._UZ(4,"app-pagination"),u.qZA(),u.TgZ(5,"div",3),u.YNc(6,fP,14,20,"div",4),u.ALo(7,"filterdishes"),u.qZA()),2&t&&(u.xp6(6),u.Q6J("ngForOf",u.G7q(7,1,u.qbA(7,pP,r.dishes,r.selectedCuisine,r.selectedType,r.selectedTime,r.selectedRating)).slice(0+(r.pageNum-1)*r.elementsOnPage,r.elementsOnPage+(r.pageNum-1)*r.elementsOnPage)))},directives:[GO,oP,uP,Tr,zn,v,p1],pipes:[cP,yu],styles:['*[_ngcontent-%COMP%]{font-family:"Roboto",sans-serif}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;justify-items:center;grid-gap:1rem}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.card[_ngcontent-%COMP%]{display:flex;position:relative;flex-flow:column nowrap;max-width:400px;min-width:300px;min-height:350px;box-shadow:0 2px 10px #6f6f6f;border-radius:4px;margin-bottom:50px;padding:3px}.min[_ngcontent-%COMP%]{box-shadow:0 2px 25px #ff3b3b}.max[_ngcontent-%COMP%]{box-shadow:0 2px 25px #35ff90}.shortage[_ngcontent-%COMP%]{outline:solid 5px rgb(255,145,0)}.nomore[_ngcontent-%COMP%]{outline:solid 5px red}.content[_ngcontent-%COMP%]{padding:20px}.counter[_ngcontent-%COMP%]{padding-top:2rem;margin-bottom:0}.toCartItems[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.dishImage[_ngcontent-%COMP%]{width:100%;height:300px;background-position:top;background-size:cover;background-image:url(outofstock.48327ffc6b4ddf25.jpg);border-top-left-radius:5px;border-top-right-radius:5px}img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;object-position:center;border-top-left-radius:3px;border-top-right-radius:3px}.stock-out[_ngcontent-%COMP%]{mix-blend-mode:darken}.subheader[_ngcontent-%COMP%]{display:flex;position:relative;justify-content:space-around;align-content:center;margin-bottom:2rem;padding:2rem 0;border-bottom:solid 2px lightgrey}.dishHeader[_ngcontent-%COMP%]{position:relative}h3[_ngcontent-%COMP%]{margin-bottom:0;color:#545353;font-size:1.3rem;width:70%}h4[_ngcontent-%COMP%]{margin-top:5px;color:#737373;margin-bottom:0;font-size:1rem}h5[_ngcontent-%COMP%]{color:#8e8e8e;margin-top:5px;font-size:.9rem}.details[_ngcontent-%COMP%]{padding-top:1rem;display:flex;flex-flow:row wrap;justify-content:space-between;height:11rem}aside[_ngcontent-%COMP%]{display:block;align-self:flex-start;background-color:#ffecec;padding:5px;width:7rem;text-align:center;height:-moz-fit-content;height:fit-content}.ingredients[_ngcontent-%COMP%]{align-self:flex-start;padding:5px;margin:0}.ingredients[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px;list-style-type:none;margin-left:10px}.description[_ngcontent-%COMP%]{align-self:flex-end;color:gray;font-size:13px;padding:15px 0;margin:0;width:100%}.flex-footer[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:space-between;align-items:center;border-top:lightgrey 1px solid;padding-top:6px}.left[_ngcontent-%COMP%], .price[_ngcontent-%COMP%]{display:block}@media (max-width: 1000px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}@media (max-width: 768px){.container[_ngcontent-%COMP%]{grid-template-columns:1fr}}']}),n})(),mP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-home"]],decls:42,vars:0,consts:[[1,"contactcard"],[1,"contact"],[1,"address"],[1,"icon-map"],[1,"phone"],[1,"icon-phone"],[1,"mail"],[1,"icon-mail"],[1,"find"],[1,"map"],[1,"title"],[1,"name"],[1,"subname"],[1,"street"],[1,"postal"]],template:function(t,r){1&t&&(u.TgZ(0,"main"),u.TgZ(1,"div",0),u.TgZ(2,"div",1),u.TgZ(3,"h4"),u._uU(4,"Kontakt"),u.qZA(),u.TgZ(5,"div",2),u.TgZ(6,"p"),u._UZ(7,"span",3),u._uU(8," ul. Hufcowa 9"),u._UZ(9,"br"),u._uU(10," 30-394 Krak\xf3w "),u.qZA(),u.qZA(),u.TgZ(11,"div",4),u._UZ(12,"span",5),u._uU(13,"+48 12 410 45 70"),u.qZA(),u.TgZ(14,"div",6),u._UZ(15,"span",7),u._uU(16,"mojarestauracja@restauracja.com"),u.qZA(),u.qZA(),u.TgZ(17,"div",8),u.TgZ(18,"h4"),u._uU(19,"Gdzie nas znale\u017a\u0107?"),u.qZA(),u._UZ(20,"div",9),u.qZA(),u.qZA(),u.TgZ(21,"div",10),u.TgZ(22,"span"),u.TgZ(23,"h1",11),u.TgZ(24,"i"),u._uU(25,"Illiada"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"span"),u.TgZ(27,"h2",12),u.TgZ(28,"i"),u._uU(29,"Lorem ipsum dolor sit amet consectetur "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(30,"footer"),u.TgZ(31,"div",13),u._UZ(32,"span",3),u._uU(33," ul. Hufcowa 9 "),u.qZA(),u.TgZ(34,"div",14),u._uU(35,"30-394 Krak\xf3w"),u.qZA(),u.TgZ(36,"div",4),u._UZ(37,"span",5),u._uU(38,"+48 12 410 45 70"),u.qZA(),u.TgZ(39,"div",6),u._UZ(40,"span",7),u._uU(41,"mojarestauracja@restauracja.com"),u.qZA(),u.qZA(),u.qZA())},styles:['main[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center;background-image:url(inside1.97b94b0237d3e071.jpg);background-color:#918b80;background-blend-mode:darken;height:100%;width:100%;background-size:cover}.title[_ngcontent-%COMP%]{font-family:"Roboto",sans-serif;width:-moz-fit-content;width:fit-content;color:#fff;margin-right:auto;margin-top:-10rem}.name[_ngcontent-%COMP%]{display:block;border-bottom:solid 5px rgb(255,255,255);text-align:center;font-size:4.8vw}.subname[_ngcontent-%COMP%]{font-size:1.8vw;font-weight:300}.contactcard[_ngcontent-%COMP%]{margin-right:auto;background-color:#fff;display:flex;flex-flow:column nowrap;grid-gap:4rem;gap:4rem;opacity:.9;align-self:flex-start;width:520px;height:-moz-fit-content;height:fit-content;padding:2rem}.address[_ngcontent-%COMP%], .phone[_ngcontent-%COMP%], .mail[_ngcontent-%COMP%]{position:relative;padding:8px 8px 8px 2rem}.icon-map[_ngcontent-%COMP%], .icon-phone[_ngcontent-%COMP%], .icon-mail[_ngcontent-%COMP%]{position:absolute;padding:10px;background-repeat:no-repeat;background-size:contain;left:0}.icon-map[_ngcontent-%COMP%]{background-image:url(map.9ccb3c96b0d902f1.png)}.icon-phone[_ngcontent-%COMP%]{background-image:url(call.32715480c65281fb.png)}.icon-mail[_ngcontent-%COMP%]{background-image:url(mail.1f12539a259fd5fc.png)}.find[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.map[_ngcontent-%COMP%]{margin-top:2rem;background-image:url(mapa.330dc489108ab95a.jpg);width:450px;height:350px;background-repeat:no-repeat;background-size:contain}footer[_ngcontent-%COMP%]{display:none}@media (max-width: 1050px){main[_ngcontent-%COMP%]{flex-flow:column nowrap;height:94%}.contactcard[_ngcontent-%COMP%]{display:none}.title[_ngcontent-%COMP%]{margin:auto 0 0}.name[_ngcontent-%COMP%]{font-size:10vw}.subname[_ngcontent-%COMP%]{font-size:5vw}.postal[_ngcontent-%COMP%], .street[_ngcontent-%COMP%]{position:relative;padding:8px}.icon-map[_ngcontent-%COMP%]{position:absolute;left:-1rem}footer[_ngcontent-%COMP%]{margin-top:auto;display:flex;flex-flow:row wrap;justify-content:center;align-items:flex-start;background-color:#cb9367;width:100%;color:#fff;height:-moz-fit-content;height:fit-content;padding:1rem;font-size:2vw}}@media (max-width: 600px){footer[_ngcontent-%COMP%]{font-size:3vw}}']}),n})(),_P=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-notfound"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(u.TgZ(0,"main",0),u.TgZ(1,"h1"),u._uU(2,"PAGE NOT FOUND"),u.qZA(),u.qZA())},styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:20vh}"]}),n})();function yP(n,e){1&n&&(u.TgZ(0,"div",8),u._uU(1," Nale\u017cy wprowadzi\u0107 email "),u.qZA())}function vP(n,e){1&n&&(u.TgZ(0,"div",8),u._uU(1," Email nie jest poprawnego formatu "),u.qZA())}function wP(n,e){1&n&&(u.TgZ(0,"div",8),u._uU(1," Nale\u017cy wprowadzi\u0107 has\u0142o "),u.qZA())}let CP=(()=>{class n{constructor(t,r,o){this.authService=t,this.router=r,this.fb=o,this.email="",this.password=""}ngOnInit(){this.form=this.fb.group({email:["",[$t.required,$t.email]],password:["",$t.required]})}onSubmit(){var t,r;this.authService.login(null===(t=this.getEmail())||void 0===t?void 0:t.value,null===(r=this.getPassword())||void 0===r?void 0:r.value).then(()=>this.router.navigate([""])).catch(o=>console.log(o.message))}getEmail(){return this.form.get("email")}getPassword(){return this.form.get("password")}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wc),u.Y36(dr),u.Y36(oA))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login"]],decls:14,vars:5,consts:[[1,"container"],[1,"form-container"],["id","loginform",3,"formGroup","ngSubmit"],[1,"form-group"],["type","email","formControlName","email","placeholder","Email",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","formControlName","password","placeholder","Has\u0142o",1,"form-control"],["type","submit",1,"login",3,"disabled"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(u.TgZ(0,"main",0),u.TgZ(1,"section",1),u.TgZ(2,"h4"),u._uU(3,"Zaloguj si\u0119"),u.qZA(),u.TgZ(4,"form",2),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(5,"div",3),u._UZ(6,"input",4),u.YNc(7,yP,2,0,"div",5),u.YNc(8,vP,2,0,"div",5),u.qZA(),u.TgZ(9,"div",3),u._UZ(10,"input",6),u.YNc(11,wP,2,0,"div",5),u.qZA(),u.TgZ(12,"button",7),u._uU(13,"Zaloguj si\u0119"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(4),u.Q6J("formGroup",r.form),u.xp6(3),u.Q6J("ngIf",r.form.controls.email.hasError("required")),u.xp6(1),u.Q6J("ngIf",r.form.controls.email.hasError("email")),u.xp6(3),u.Q6J("ngIf",r.form.controls.password.hasError("required")),u.xp6(1),u.Q6J("disabled",!r.form.valid))},directives:[H_,q_,Qh,Gh,Yh,Dg,sr],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}.container[_ngcontent-%COMP%]{display:flex;justify-content:center}.form-container[_ngcontent-%COMP%]{margin-top:5rem;width:60%;padding:2rem;background-color:#fff;box-shadow:0 0 4px #d3d3d3}.form-group[_ngcontent-%COMP%]{display:block;margin:1rem 0}form[_ngcontent-%COMP%]{position:relative}input.ng-invalid[_ngcontent-%COMP%]{border-left:solid red 5px}input.ng-valid[_ngcontent-%COMP%]{border-left:solid green 5px}.alert-danger[_ngcontent-%COMP%]{padding:5px}.add[_ngcontent-%COMP%]{position:absolute;bottom:-2rem;right:1rem}@media (max-width: 760px){.form-container[_ngcontent-%COMP%]{width:80%}}"]}),n})();function EP(n,e){1&n&&(u.TgZ(0,"div",8),u._uU(1," Nale\u017cy wprowadzi\u0107 email "),u.qZA())}function bP(n,e){1&n&&(u.TgZ(0,"div",8),u._uU(1," Email nie jest poprawnego formatu "),u.qZA())}function IP(n,e){1&n&&(u.TgZ(0,"div",8),u._uU(1," Nale\u017cy wprowadzi\u0107 has\u0142o "),u.qZA())}let DP=(()=>{class n{constructor(t,r,o,c){this.authService=t,this.router=r,this.fb=o,this.userService=c,this.email="",this.password=""}ngOnInit(){this.form=this.fb.group({email:["",[$t.required,$t.email]],password:["",$t.required]})}getEmail(){return this.form.get("email")}getPassword(){return this.form.get("password")}onSubmit(){var t,r;this.authService.register(null===(t=this.getEmail())||void 0===t?void 0:t.value,null===(r=this.getPassword())||void 0===r?void 0:r.value).then(()=>this.router.navigate([""])).catch(o=>console.log(o.message))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wc),u.Y36(dr),u.Y36(oA),u.Y36(Z_))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-register"]],decls:14,vars:5,consts:[[1,"container"],[1,"form-container"],["id","registerform",3,"formGroup","ngSubmit"],[1,"form-group"],["type","email","formControlName","email","placeholder","Email",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","password","formControlName","password","placeholder","Has\u0142o",1,"form-control"],["type","submit",1,"register",3,"disabled"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(u.TgZ(0,"main",0),u.TgZ(1,"section",1),u.TgZ(2,"h4"),u._uU(3,"Zarejestruj si\u0119"),u.qZA(),u.TgZ(4,"form",2),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(5,"div",3),u._UZ(6,"input",4),u.YNc(7,EP,2,0,"div",5),u.YNc(8,bP,2,0,"div",5),u.qZA(),u.TgZ(9,"div",3),u._UZ(10,"input",6),u.YNc(11,IP,2,0,"div",5),u.qZA(),u.TgZ(12,"button",7),u._uU(13,"Zarejestruj si\u0119"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(4),u.Q6J("formGroup",r.form),u.xp6(3),u.Q6J("ngIf",r.form.controls.email.hasError("required")),u.xp6(1),u.Q6J("ngIf",r.form.controls.email.hasError("email")),u.xp6(3),u.Q6J("ngIf",r.form.controls.password.hasError("required")),u.xp6(1),u.Q6J("disabled",!r.form.valid))},directives:[H_,q_,Qh,Gh,Yh,Dg,sr],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}.container[_ngcontent-%COMP%]{display:flex;justify-content:center}.form-container[_ngcontent-%COMP%]{margin-top:5rem;width:60%;padding:2rem;background-color:#fff;box-shadow:0 0 4px #d3d3d3}.form-group[_ngcontent-%COMP%]{display:block;margin:1rem 0}form[_ngcontent-%COMP%]{position:relative}input.ng-invalid[_ngcontent-%COMP%]{border-left:solid red 5px}input.ng-valid[_ngcontent-%COMP%]{border-left:solid green 5px}.alert-danger[_ngcontent-%COMP%]{padding:5px}@media (max-width: 760px){.form-container[_ngcontent-%COMP%]{width:80%}}"]}),n})(),Db=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.authState$.pipe((0,it.U)(o=>null!==o||(this.router.navigate(["/login"]),!1)))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wc),u.LFG(dr))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TP=(()=>{class n{constructor(t,r){this.authService=t,this.userService=r}canActivate(t,r){return this.authService.userData.pipe(mn(o=>this.userService.getUser(null==o?void 0:o.uid))).pipe((0,it.U)(o=>o.admin))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wc),u.LFG(Z_))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AP=(()=>{class n{constructor(t,r){this.authService=t,this.userService=r}canActivate(t,r){return this.authService.userData.pipe(mn(o=>this.userService.getUser(null==o?void 0:o.uid))).pipe((0,it.U)(o=>o.manager||o.admin))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wc),u.LFG(Z_))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SP=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}setPersistence(t){return this.authService.setPersistence(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-persistence"]],decls:9,vars:0,consts:[[1,"persistence"],[3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"h6"),u._uU(2,"Set persistence"),u.qZA(),u.TgZ(3,"button",1),u.NdJ("click",function(){return r.setPersistence("local")}),u._uU(4,"Local"),u.qZA(),u.TgZ(5,"button",1),u.NdJ("click",function(){return r.setPersistence("session")}),u._uU(6,"Session"),u.qZA(),u.TgZ(7,"button",1),u.NdJ("click",function(){return r.setPersistence("none")}),u._uU(8,"None"),u.qZA(),u.qZA())},styles:[".persistence[_ngcontent-%COMP%]{background-color:#fff;padding:10px;width:-moz-fit-content;width:fit-content;margin:10px}.active[_ngcontent-%COMP%]{background-color:green}"]}),n})();function xP(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1,"manager "),u.qZA())}function MP(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1,"admin "),u.qZA())}function RP(n,e){1&n&&(u.TgZ(0,"span"),u._uU(1,"client "),u.qZA())}function OP(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",11),u.NdJ("click",function(){u.CHM(t);const o=u.oxw().$implicit;return u.oxw().ban(o)}),u._uU(1,"BAN"),u.qZA()}}function PP(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",11),u.NdJ("click",function(){u.CHM(t);const o=u.oxw().$implicit;return u.oxw().unban(o)}),u._uU(1,"UNBAN"),u.qZA()}}function kP(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",12),u.NdJ("click",function(){u.CHM(t);const o=u.oxw().$implicit;return u.oxw().setAdmin(o)}),u._uU(1,"SET ADMIN"),u.qZA()}}function NP(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",12),u.NdJ("click",function(){u.CHM(t);const o=u.oxw().$implicit;return u.oxw().unsetAdmin(o)}),u._uU(1,"UNSET ADMIN"),u.qZA()}}function FP(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",13),u.NdJ("click",function(){u.CHM(t);const o=u.oxw().$implicit;return u.oxw().setManager(o)}),u._uU(1,"SET MANAGER"),u.qZA()}}function LP(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",13),u.NdJ("click",function(){u.CHM(t);const o=u.oxw().$implicit;return u.oxw().unsetManager(o)}),u._uU(1,"UNSET MANAGER"),u.qZA()}}function UP(n,e){if(1&n&&(u.TgZ(0,"div",3),u.TgZ(1,"div",4),u.TgZ(2,"span",5),u._uU(3),u.qZA(),u.TgZ(4,"div",6),u.YNc(5,xP,2,0,"span",7),u.YNc(6,MP,2,0,"span",7),u.YNc(7,RP,2,0,"span",7),u.qZA(),u.qZA(),u.YNc(8,OP,2,0,"button",8),u.YNc(9,PP,2,0,"button",8),u.YNc(10,kP,2,0,"button",9),u.YNc(11,NP,2,0,"button",9),u.YNc(12,FP,2,0,"button",10),u.YNc(13,LP,2,0,"button",10),u.qZA()),2&n){const t=e.$implicit;u.xp6(3),u.Oqu(t.email),u.xp6(2),u.Q6J("ngIf",t.manager),u.xp6(1),u.Q6J("ngIf",t.admin),u.xp6(1),u.Q6J("ngIf",!t.admin&&!t.manager),u.xp6(1),u.Q6J("ngIf",!t.isDisabled),u.xp6(1),u.Q6J("ngIf",t.isDisabled),u.xp6(1),u.Q6J("ngIf",!t.admin),u.xp6(1),u.Q6J("ngIf",t.admin),u.xp6(1),u.Q6J("ngIf",!t.manager),u.xp6(1),u.Q6J("ngIf",t.manager)}}let VP=(()=>{class n{constructor(t){this.userService=t}ngOnInit(){this.userService.getRegisteredUsers().snapshotChanges().pipe((0,it.U)(t=>t.map(r=>Object.assign({key:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.users=t})}ban(t){this.userService.ban(t)}unban(t){this.userService.unban(t)}setAdmin(t){this.userService.setAdmin(t)}unsetAdmin(t){this.userService.unsetAdmin(t)}setManager(t){this.userService.setManager(t)}unsetManager(t){this.userService.unsetManager(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Z_))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-admin-view"]],decls:6,vars:1,consts:[[1,"container"],[1,"users"],["class","user",4,"ngFor","ngForOf"],[1,"user"],[1,"card"],[1,"email"],[1,"roles"],[4,"ngIf"],["class","ban",3,"click",4,"ngIf"],["class","admin",3,"click",4,"ngIf"],["class","manager",3,"click",4,"ngIf"],[1,"ban",3,"click"],[1,"admin",3,"click"],[1,"manager",3,"click"]],template:function(t,r){1&t&&(u._UZ(0,"app-persistence"),u.TgZ(1,"main",0),u.TgZ(2,"h3"),u._uU(3,"USERS"),u.qZA(),u.TgZ(4,"section",1),u.YNc(5,UP,14,10,"div",2),u.qZA(),u.qZA()),2&t&&(u.xp6(5),u.Q6J("ngForOf",r.users))},directives:[SP,Tr,sr],styles:['*[_ngcontent-%COMP%]{font-family:"Roboto",sans-serif}.container[_ngcontent-%COMP%]{background-color:#fff;padding:10px;margin-left:10px;width:100%}.users[_ngcontent-%COMP%]{overflow:auto;min-height:50vh;max-height:65vh;width:100%}.user[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr 1fr}.card[_ngcontent-%COMP%]{align-self:stretch;background-color:#fff;box-shadow:1px 1px 1px gray;padding:10px;width:40vw}.card[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.ban[_ngcontent-%COMP%], .manager[_ngcontent-%COMP%], .admin[_ngcontent-%COMP%]{border:1px solid lightgrey}.ban[_ngcontent-%COMP%]:hover, .manager[_ngcontent-%COMP%]:hover, .admin[_ngcontent-%COMP%]:hover{background-color:#ebebeb}.ban[_ngcontent-%COMP%]:active, .manager[_ngcontent-%COMP%]:active, .admin[_ngcontent-%COMP%]:active{background-color:#d6d6d6}@media (max-width: 600px){.email[_ngcontent-%COMP%], .roles[_ngcontent-%COMP%]{font-size:3.8vw}.ban[_ngcontent-%COMP%], .admin[_ngcontent-%COMP%], .manager[_ngcontent-%COMP%]{font-size:3vw}.container[_ngcontent-%COMP%]{margin-left:0}}']}),n})(),BP=(()=>{class n{constructor(t){this.dishService=t,this.itemRemoved=new u.vpe,this.counterChange=new u.vpe}ngOnInit(){}deleteDish(){this.dishService.deleteDish(this.currentDish.key).then(t=>{console.log("Dish successfully deleted")}),this.itemRemoved.emit(this.currentDish),this.counterChange.emit(this.currentDish.ordered)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-remove"]],inputs:{currentDish:"currentDish"},outputs:{itemRemoved:"itemRemoved",counterChange:"counterChange"},decls:2,vars:0,consts:[["type","submit",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u.NdJ("click",function(){return r.deleteDish()}),u._uU(1,"X"),u.qZA())},styles:["button[_ngcontent-%COMP%]{background-color:#cb9367;position:absolute;top:.5rem;right:.5rem;color:#fff;padding:0 8px;border:none}button[_ngcontent-%COMP%]:hover{background-color:#db9a69}button[_ngcontent-%COMP%]:active{background-color:#e49051}"]}),n})();function jP(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Wprowad\u017a nazw\u0119 pozycji "),u.qZA())}function ZP(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Nazwa powinna zawiera\u0107 co najmniej 2 znaki "),u.qZA())}function qP(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Nazwa nie mo\u017ce przekracza\u0107 15 znak\xf3w "),u.qZA())}function $P(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Wprowad\u017a typ kuchni "),u.qZA())}function HP(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Typ kuchni powinien zawiera\u0107 co najmniej 2 znaki "),u.qZA())}function GP(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Typ kuchni nie mo\u017ce przekracza\u0107 20 znak\xf3w "),u.qZA())}function zP(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Wprowad\u017a typ dania "),u.qZA())}function WP(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Typ dania powinien zawiera\u0107 co najmniej 2 znaki "),u.qZA())}function KP(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Typ dania nie mo\u017ce przekracza\u0107 15 znak\xf3w "),u.qZA())}function YP(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Wprowad\u017a kategori\u0119 "),u.qZA())}function QP(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Kategoria powinien zawiera\u0107 co najmniej 2 znaki "),u.qZA())}function JP(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Kategoria nie mo\u017ce przekracza\u0107 15 znak\xf3w "),u.qZA())}function XP(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Wprowad\u017a sk\u0142adniki "),u.qZA())}function ek(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Wprowad\u017a ilo\u015b\u0107 "),u.qZA())}function tk(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Wprowad\u017a cen\u0119 "),u.qZA())}function nk(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Wprowad\u017a nazwy zdj\u0119\u0107 "),u.qZA())}function rk(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Wprowad\u017a odpowiedni format pliku "),u.qZA())}const ik=function(n,e){return{hidden:n,show:e}};let sk=(()=>{class n{constructor(t){this.dishService=t,this.isHidden=!0,this.noWhitespaceRegex=/^(\w+\S+)$/,this.imageRegex=/([/|.|\w|\s|-])*\.(?:jpg|gif|png)/g,this.addDishForm=new Ig({name:new gr("",[$t.required,$t.minLength(2),$t.maxLength(20),this.notOnlyWhitespaceValidator]),cuisine:new gr("",[$t.required,$t.minLength(2),$t.maxLength(20),this.notOnlyWhitespaceValidator]),type:new gr("",[$t.required,$t.minLength(2),$t.maxLength(15),this.notOnlyWhitespaceValidator]),time:new gr("",[$t.required,$t.minLength(2),$t.maxLength(15),this.notOnlyWhitespaceValidator]),ingredients:new gr("",[$t.required,this.notOnlyWhitespaceValidator]),amount:new gr("",[$t.required]),ordered:new gr(0),price:new gr("",[$t.required]),description:new gr(""),pictures:new gr("",[$t.required,$t.pattern(this.noWhitespaceRegex),$t.pattern(this.imageRegex)]),link:new gr}),this.menuItems=[],this.counter=0}notOnlyWhitespaceValidator(t){return 0!==(t.value||"").trim().length?null:{whitespace:!0}}onSubmit(){console.log(this.addDishForm.value),this.dishService.createDish(this.addDishForm.value).then(()=>console.log("Dish successfully created")),this.addDishForm.reset()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-add"]],inputs:{isHidden:"isHidden"},decls:44,vars:23,consts:[[1,"container",3,"ngClass"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","name","placeholder","Nazwa pozycji",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","text","formControlName","cuisine","placeholder","Typ kuchni",1,"form-control"],["type","text","formControlName","type","placeholder","Typ dania",1,"form-control"],["type","text","formControlName","time","placeholder","Kategoria",1,"form-control"],["type","text","formControlName","ingredients","placeholder","Sk\u0142adniki",1,"form-control"],["type","number","formControlName","amount","placeholder","Ilo\u015b\u0107 w magazynie",1,"form-control"],["type","number","formControlName","price","placeholder","Cena",1,"form-control"],["type","textarea","formControlName","description","placeholder","Opis",1,"form-control"],["type","text","formControlName","pictures","placeholder","Zdj\u0119cia",1,"form-control"],["type","text","formControlName","link","placeholder","Linki do zdj\u0119\u0107",1,"form-control"],["type","submit",1,"add",3,"disabled"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(u.TgZ(0,"main",0),u.TgZ(1,"div",1),u.TgZ(2,"h5"),u._uU(3,"Add"),u.qZA(),u.TgZ(4,"form",2),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(5,"div",3),u._UZ(6,"input",4),u.YNc(7,jP,2,0,"div",5),u.YNc(8,ZP,2,0,"div",5),u.YNc(9,qP,2,0,"div",5),u.qZA(),u.TgZ(10,"div",3),u._UZ(11,"input",6),u.YNc(12,$P,2,0,"div",5),u.YNc(13,HP,2,0,"div",5),u.YNc(14,GP,2,0,"div",5),u.qZA(),u.TgZ(15,"div",3),u._UZ(16,"input",7),u.YNc(17,zP,2,0,"div",5),u.YNc(18,WP,2,0,"div",5),u.YNc(19,KP,2,0,"div",5),u.qZA(),u.TgZ(20,"div",3),u._UZ(21,"input",8),u.YNc(22,YP,2,0,"div",5),u.YNc(23,QP,2,0,"div",5),u.YNc(24,JP,2,0,"div",5),u.qZA(),u.TgZ(25,"div",3),u._UZ(26,"input",9),u.YNc(27,XP,2,0,"div",5),u.qZA(),u.TgZ(28,"div",3),u._UZ(29,"input",10),u.YNc(30,ek,2,0,"div",5),u.qZA(),u.TgZ(31,"div",3),u._UZ(32,"input",11),u.YNc(33,tk,2,0,"div",5),u.qZA(),u.TgZ(34,"div",3),u._UZ(35,"input",12),u.qZA(),u.TgZ(36,"div",3),u._UZ(37,"input",13),u.YNc(38,nk,2,0,"div",5),u.YNc(39,rk,2,0,"div",5),u.qZA(),u.TgZ(40,"div",3),u._UZ(41,"input",14),u.qZA(),u.TgZ(42,"button",15),u._uU(43,"Dodaj"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.Q6J("ngClass",u.WLB(20,ik,r.isHidden,!r.isHidden)),u.xp6(4),u.Q6J("formGroup",r.addDishForm),u.xp6(3),u.Q6J("ngIf",r.addDishForm.controls.name.hasError("required")),u.xp6(1),u.Q6J("ngIf",r.addDishForm.controls.name.hasError("minlength")),u.xp6(1),u.Q6J("ngIf",r.addDishForm.controls.name.hasError("maxlength")),u.xp6(3),u.Q6J("ngIf",r.addDishForm.controls.cuisine.hasError("required")),u.xp6(1),u.Q6J("ngIf",r.addDishForm.controls.cuisine.hasError("minlength")),u.xp6(1),u.Q6J("ngIf",r.addDishForm.controls.cuisine.hasError("maxlength")),u.xp6(3),u.Q6J("ngIf",r.addDishForm.controls.type.hasError("required")),u.xp6(1),u.Q6J("ngIf",r.addDishForm.controls.type.hasError("minlength")),u.xp6(1),u.Q6J("ngIf",r.addDishForm.controls.type.hasError("maxlength")),u.xp6(3),u.Q6J("ngIf",r.addDishForm.controls.time.hasError("required")),u.xp6(1),u.Q6J("ngIf",r.addDishForm.controls.time.hasError("minlength")),u.xp6(1),u.Q6J("ngIf",r.addDishForm.controls.time.hasError("maxlength")),u.xp6(3),u.Q6J("ngIf",r.addDishForm.controls.ingredients.hasError("required")),u.xp6(3),u.Q6J("ngIf",r.addDishForm.controls.amount.hasError("required")),u.xp6(3),u.Q6J("ngIf",r.addDishForm.controls.price.hasError("required")),u.xp6(5),u.Q6J("ngIf",r.addDishForm.controls.pictures.hasError("required")),u.xp6(1),u.Q6J("ngIf",r.addDishForm.controls.pictures.hasError("pattern")),u.xp6(3),u.Q6J("disabled",!r.addDishForm.valid))},directives:[zn,H_,q_,Qh,Gh,Yh,Dg,sr,bb],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}.container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;width:100vw}.form-container[_ngcontent-%COMP%]{margin-top:5rem;width:50%;height:600px;padding:2rem;background-color:#fff;overflow:auto;box-shadow:1px 0 10px #d3d3d3;z-index:1}.form-group[_ngcontent-%COMP%]{display:block;margin:1rem 0}form[_ngcontent-%COMP%]{position:relative}input.ng-invalid[_ngcontent-%COMP%]{border-left:solid red 5px}input.ng-valid[_ngcontent-%COMP%]{border-left:solid green 5px}.alert-danger[_ngcontent-%COMP%]{padding:5px}.add[_ngcontent-%COMP%]{position:absolute;bottom:-2rem;right:1rem}.hidden[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:flex}@media (max-width: 768px){.container[_ngcontent-%COMP%]{justify-content:center}.form-container[_ngcontent-%COMP%]{width:80%}}"]}),n})();function ok(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Nazwa powinna zawiera\u0107 co najmniej 2 znaki "),u.qZA())}function ak(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Nazwa nie mo\u017ce przekracza\u0107 15 znak\xf3w "),u.qZA())}function uk(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Typ kuchni powinien zawiera\u0107 co najmniej 2 znaki "),u.qZA())}function ck(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Typ kuchni nie mo\u017ce przekracza\u0107 20 znak\xf3w "),u.qZA())}function lk(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Typ dania powinien zawiera\u0107 co najmniej 2 znaki "),u.qZA())}function dk(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Typ dania nie mo\u017ce przekracza\u0107 15 znak\xf3w "),u.qZA())}function hk(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Kategoria powinien zawiera\u0107 co najmniej 2 znaki "),u.qZA())}function fk(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Kategoria nie mo\u017ce przekracza\u0107 15 znak\xf3w "),u.qZA())}function pk(n,e){1&n&&(u.TgZ(0,"div",16),u._uU(1," Wprowad\u017a odpowiedni format pliku "),u.qZA())}let gk=(()=>{class n{constructor(t,r){this.fb=t,this.dishService=r,this.noWhitespaceRegex=/^(\w+\S+)$/,this.imageRegex=/([/|.|\w|\s|-])*\.(?:jpg|gif|png)/g}ngOnInit(){this.editDishForm=this.fb.group({name:["",[$t.maxLength(20)]],cuisine:["",[$t.maxLength(20)]],type:["",[$t.maxLength(15)]],time:["",[$t.maxLength(15)]],ingredients:[""],amount:[],ordered:[],price:[],description:[""],pictures:["",[$t.pattern(this.noWhitespaceRegex),$t.pattern(this.imageRegex)]],link:[]})}onSubmit(){["name","cuisine","type","time","ingredients","amount","ordered","price","description","pictures","link"].forEach(r=>{var o,c,f,_,C,T,R,O,q,z,ie,Pe;if(null===(o=this.editDishForm.get(r))||void 0===o?void 0:o.value){let Me=this.currentDish;switch(r){case"name":Me.name=null===(c=this.editDishForm.get(r))||void 0===c?void 0:c.value;break;case"cuisine":Me.cuisine=null===(f=this.editDishForm.get(r))||void 0===f?void 0:f.value;break;case"type":Me.type=null===(_=this.editDishForm.get(r))||void 0===_?void 0:_.value;break;case"time":Me.time=null===(C=this.editDishForm.get(r))||void 0===C?void 0:C.value;break;case"ingredients":Me.ingredients=null===(T=this.editDishForm.get(r))||void 0===T?void 0:T.value;break;case"amount":Me.amount=null===(R=this.editDishForm.get(r))||void 0===R?void 0:R.value;break;case"ordered":Me.ordered=null===(O=this.editDishForm.get(r))||void 0===O?void 0:O.value;break;case"price":Me.price=null===(q=this.editDishForm.get(r))||void 0===q?void 0:q.value;break;case"description":Me.description=null===(z=this.editDishForm.get(r))||void 0===z?void 0:z.value;break;case"pictures":Me.pictures=null===(ie=this.editDishForm.get(r))||void 0===ie?void 0:ie.value;break;case"link":Me.link=null===(Pe=this.editDishForm.get(r))||void 0===Pe?void 0:Pe.value}this.dishService.updateDish(this.currentDish.key,Me).then(()=>console.log("Dish updated"))}})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(oA),u.Y36(Cc))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-edit-dish"]],inputs:{currentDish:"currentDish"},decls:36,vars:11,consts:[[1,"container"],[1,"form-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","name","placeholder","Nazwa pozycji",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["type","text","formControlName","cuisine","placeholder","Typ kuchni",1,"form-control"],["type","text","formControlName","type","placeholder","Typ dania",1,"form-control"],["type","text","formControlName","time","placeholder","Kategoria",1,"form-control"],["type","text","formControlName","ingredients","placeholder","Sk\u0142adniki",1,"form-control"],["type","number","formControlName","amount","placeholder","Ilo\u015b\u0107 w magazynie",1,"form-control"],["type","number","formControlName","price","placeholder","Cena",1,"form-control"],["type","textarea","formControlName","description","placeholder","Opis",1,"form-control"],["type","text","formControlName","pictures","placeholder","Zdj\u0119cia",1,"form-control"],["type","text","formControlName","link","placeholder","Linki do zdj\u0119\u0107",1,"form-control"],["type","submit",1,"edit",3,"disabled"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(u.TgZ(0,"main",0),u.TgZ(1,"div",1),u.TgZ(2,"h5"),u._uU(3,"Edit"),u.qZA(),u.TgZ(4,"form",2),u.NdJ("ngSubmit",function(){return r.onSubmit()}),u.TgZ(5,"div",3),u._UZ(6,"input",4),u.YNc(7,ok,2,0,"div",5),u.YNc(8,ak,2,0,"div",5),u.qZA(),u.TgZ(9,"div",3),u._UZ(10,"input",6),u.YNc(11,uk,2,0,"div",5),u.YNc(12,ck,2,0,"div",5),u.qZA(),u.TgZ(13,"div",3),u._UZ(14,"input",7),u.YNc(15,lk,2,0,"div",5),u.YNc(16,dk,2,0,"div",5),u.qZA(),u.TgZ(17,"div",3),u._UZ(18,"input",8),u.YNc(19,hk,2,0,"div",5),u.YNc(20,fk,2,0,"div",5),u.qZA(),u.TgZ(21,"div",3),u._UZ(22,"input",9),u.qZA(),u.TgZ(23,"div",3),u._UZ(24,"input",10),u.qZA(),u.TgZ(25,"div",3),u._UZ(26,"input",11),u.qZA(),u.TgZ(27,"div",3),u._UZ(28,"input",12),u.qZA(),u.TgZ(29,"div",3),u._UZ(30,"input",13),u.YNc(31,pk,2,0,"div",5),u.qZA(),u.TgZ(32,"div",3),u._UZ(33,"input",14),u.qZA(),u.TgZ(34,"button",15),u._uU(35,"Edytuj"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(4),u.Q6J("formGroup",r.editDishForm),u.xp6(3),u.Q6J("ngIf",r.editDishForm.controls.name.hasError("minlength")),u.xp6(1),u.Q6J("ngIf",r.editDishForm.controls.name.hasError("maxlength")),u.xp6(3),u.Q6J("ngIf",r.editDishForm.controls.cuisine.hasError("minlength")),u.xp6(1),u.Q6J("ngIf",r.editDishForm.controls.cuisine.hasError("maxlength")),u.xp6(3),u.Q6J("ngIf",r.editDishForm.controls.type.hasError("minlength")),u.xp6(1),u.Q6J("ngIf",r.editDishForm.controls.type.hasError("maxlength")),u.xp6(3),u.Q6J("ngIf",r.editDishForm.controls.time.hasError("minlength")),u.xp6(1),u.Q6J("ngIf",r.editDishForm.controls.time.hasError("maxlength")),u.xp6(11),u.Q6J("ngIf",r.editDishForm.controls.pictures.hasError("pattern")),u.xp6(3),u.Q6J("disabled",!r.editDishForm.valid))},directives:[H_,q_,Qh,Gh,Yh,Dg,sr,bb],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:stretch;width:100%;margin-left:0}.form-container[_ngcontent-%COMP%]{width:50%;height:300px;padding:1rem;background-color:#fff;overflow:auto;box-shadow:1px 0 10px #d3d3d3}.form-group[_ngcontent-%COMP%]{display:block;margin:1rem 0}form[_ngcontent-%COMP%]{position:relative}.edit[_ngcontent-%COMP%]{position:absolute;bottom:-3rem;right:1rem}input.ng-invalid[_ngcontent-%COMP%]{border-left:solid red 5px}input.ng-valid[_ngcontent-%COMP%]{border-left:solid green 5px}.alert-danger[_ngcontent-%COMP%]{padding:5px}@media (max-width: 760px){.form-container[_ngcontent-%COMP%]{width:100%}}"]}),n})();function mk(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",6),u.TgZ(1,"div",7),u.TgZ(2,"span"),u._uU(3),u.qZA(),u.TgZ(4,"button",8),u.NdJ("click",function(){const c=u.CHM(t).$implicit;return u.oxw().editDish(c)}),u._uU(5,"EDIT"),u.qZA(),u.TgZ(6,"app-remove",9),u.NdJ("itemRemoved",function(o){return u.CHM(t),u.oxw().onItemRemoved(o)}),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(3),u.Oqu(t.name),u.xp6(3),u.Q6J("currentDish",t)}}function _k(n,e){if(1&n&&u._UZ(0,"app-add",10),2&n){const t=u.oxw();u.Q6J("isHidden",t.isAddHidden)}}function yk(n,e){if(1&n&&u._UZ(0,"app-edit-dish",11),2&n){const t=u.oxw();u.Q6J("currentDish",t.currentDish)}}const vk=[{path:"",component:mP},{path:"login",component:CP},{path:"register",component:DP},{path:"dishes/:page",component:gP},{path:"dish/:dish.name",component:$O,canActivate:[Db]},{path:"cart",component:LR,canActivate:[Db]},{path:"dishmanager",component:(()=>{class n{constructor(t,r,o){this.dishService=t,this.cartService=r,this.counterService=o,this.counter=0,this.dishes=[],this.isEditHidden=!0,this.isAddHidden=!0}ngOnInit(){this.counterService.currentCounter.subscribe(t=>this.counter=t),this.subscription=this.dishService.getDishesList().snapshotChanges().pipe((0,it.U)(t=>t.map(r=>Object.assign({key:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.dishes=t})}ngOnDestroy(){this.subscription.unsubscribe()}onItemRemoved(t){this.counterService.changeCounter(this.counter-t.ordered)}editDish(t){this.setCurrentDish(t),this.isEditHidden=!this.isEditHidden}setCurrentDish(t){this.currentDish=t}addDishToggle(){this.isAddHidden=!this.isAddHidden}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Cc),u.Y36(Eg),u.Y36(tw))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-dish-manager"]],decls:10,vars:3,consts:[[1,"dishes"],["class","dish",4,"ngFor","ngForOf"],[1,"add-dish"],[1,"addDishButton",3,"click"],[3,"isHidden",4,"ngIf"],[3,"currentDish",4,"ngIf"],[1,"dish"],[1,"card"],["type","submit",1,"edit",3,"click"],[3,"currentDish","itemRemoved"],[3,"isHidden"],[3,"currentDish"]],template:function(t,r){1&t&&(u.TgZ(0,"main"),u.TgZ(1,"h3"),u._uU(2,"Dania"),u.qZA(),u.TgZ(3,"section",0),u.YNc(4,mk,7,2,"div",1),u.qZA(),u.qZA(),u.TgZ(5,"div",2),u.TgZ(6,"div",3),u.NdJ("click",function(){return r.addDishToggle()}),u._uU(7,"Dodaj danie"),u.qZA(),u.YNc(8,_k,1,1,"app-add",4),u.qZA(),u.YNc(9,yk,1,1,"app-edit-dish",5)),2&t&&(u.xp6(4),u.Q6J("ngForOf",r.dishes),u.xp6(4),u.Q6J("ngIf",!r.isAddHidden),u.xp6(1),u.Q6J("ngIf",!r.isEditHidden))},directives:[Tr,sr,BP,sk,gk],styles:["main[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;width:45%;z-index:10}.dishes[_ngcontent-%COMP%]{height:300px;width:100%;overflow:auto}.dish[_ngcontent-%COMP%]{display:flex;align-items:stretch}.card[_ngcontent-%COMP%]{align-self:stretch;background-color:#fff;box-shadow:1px 1px 1px gray;padding:10px;width:100%}.card[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.add-dish[_ngcontent-%COMP%]{width:100%;position:absolute;top:4rem}button.edit[_ngcontent-%COMP%]{background-color:#cb9367;position:absolute;top:.5rem;right:2.5rem;color:#fff;padding:0 8px;border:none;z-index:1}button.edit[_ngcontent-%COMP%]:hover{background-color:#db9a69}button.edit[_ngcontent-%COMP%]:active{background-color:#e49051}.hidden[_ngcontent-%COMP%]{display:none}.show[_ngcontent-%COMP%]{display:flex}.addDishButton[_ngcontent-%COMP%]{position:absolute;top:2rem;right:1rem;color:#fff;text-align:center;padding:10px;width:6rem;font-size:12px;height:40px;background-color:#cb9367}@media (max-width: 768px){main[_ngcontent-%COMP%]{width:100%}.addDishButton[_ngcontent-%COMP%]{top:.5rem;left:7rem;height:40px;font-size:11px}}"]}),n})(),canActivate:[Db,AP]},{path:"adminview",component:VP,canActivate:[Db,TP]},{path:"**",component:_P}];let wk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Td.forRoot(vk,{scrollPositionRestoration:"enabled"})],Td]}),n})(),Ck=(()=>{class n{constructor(t){this.currencyService=t,this.currencies=Md}ngOnInit(){this.currencyService.currentCurrency.subscribe(t=>this.currency=t)}changeCurrency(){this.currencyService.setCurrency(this.currencies[this.currency.id%2])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Wf))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-currency"]],decls:7,vars:0,consts:[[1,"currency"],[1,"toggle"],["type","checkbox",3,"change"],["for","",1,"onbtn"],["for","",1,"offbtn"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"input",2),u.NdJ("change",function(){return r.changeCurrency()}),u.qZA(),u.TgZ(3,"label",3),u._uU(4,"\u20ac"),u.qZA(),u.TgZ(5,"label",4),u._uU(6,"$"),u.qZA(),u.qZA(),u.qZA())},styles:['input[type=checkbox][_ngcontent-%COMP%]{position:relative;width:50px;height:20px;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:20px;outline:none;transition:.3s;box-shadow:inset 0 0 5px #0003;cursor:pointer;background:rgb(255,255,255)}input[_ngcontent-%COMP%]:checked[type=checkbox]{background-color:#f29e5f}input[type=checkbox][_ngcontent-%COMP%]:before{z-index:2;position:absolute;content:"";left:0;width:20px;height:20px;background-color:#fff;border-radius:50%;transform:scale(1.1);box-shadow:0 2px 5px #0003}input[_ngcontent-%COMP%]:checked[type=checkbox]:before{left:30px}.toggle[_ngcontent-%COMP%]{position:relative;display:inline}label[_ngcontent-%COMP%]{position:absolute;color:#fff;font-weight:600;font-size:18px;pointer-events:none}.onbtn[_ngcontent-%COMP%]{bottom:0;left:8px}.offbtn[_ngcontent-%COMP%]{bottom:0;right:8px;color:#a3a3a3}']}),n})();function Ek(n,e){1&n&&(u.TgZ(0,"a",19),u.TgZ(1,"div",20),u._uU(2,"Login"),u.qZA(),u.qZA())}function bk(n,e){1&n&&(u.TgZ(0,"a",21),u.TgZ(1,"div",20),u._uU(2,"Register"),u.qZA(),u.qZA())}function Ik(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"a",22),u.NdJ("click",function(){return u.CHM(t),u.oxw().logout()}),u.TgZ(1,"div",20),u._uU(2," Logout "),u._UZ(3,"br"),u.qZA(),u.qZA()}}function Dk(n,e){1&n&&(u.TgZ(0,"a",23),u.TgZ(1,"div"),u._uU(2,"Cart"),u.qZA(),u.qZA())}function Tk(n,e){1&n&&(u.TgZ(0,"a",24),u.TgZ(1,"div"),u._uU(2,"Dish Manager"),u.qZA(),u.qZA())}function Ak(n,e){1&n&&(u.TgZ(0,"a",25),u.TgZ(1,"div"),u._uU(2,"Admin view"),u.qZA(),u.qZA())}function Sk(n,e){1&n&&(u.TgZ(0,"a",24),u.TgZ(1,"div"),u._uU(2,"Dish Manager"),u.qZA(),u.qZA())}function xk(n,e){1&n&&(u.TgZ(0,"a",30),u.TgZ(1,"li",16),u._uU(2,"Dishes manager"),u.qZA(),u.qZA())}function Mk(n,e){1&n&&(u.ynx(0),u.TgZ(1,"a",31),u.TgZ(2,"li",16),u._uU(3,"Admin view"),u.qZA(),u.qZA(),u.TgZ(4,"a",30),u.TgZ(5,"li",16),u._uU(6,"Dishes manager"),u.qZA(),u.qZA(),u.TgZ(7,"span",32),u._uU(8," ADMIN "),u.qZA(),u.BQk())}function Rk(n,e){if(1&n&&(u.TgZ(0,"span",32),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.hij(" Logged as ",t.authService.currentUser.email," ")}}function Ok(n,e){if(1&n){const t=u.EpF();u.ynx(0),u.TgZ(1,"a",26),u.TgZ(2,"li",16),u._uU(3,"Cart"),u.qZA(),u.qZA(),u.YNc(4,xk,3,0,"a",27),u.YNc(5,Mk,9,0,"ng-container",17),u.TgZ(6,"button",28),u.NdJ("click",function(){return u.CHM(t),u.oxw().logout()}),u._uU(7," Logout"),u._UZ(8,"br"),u.qZA(),u.YNc(9,Rk,2,1,"span",29),u.BQk()}if(2&n){const t=u.oxw();u.xp6(4),u.Q6J("ngIf",t.authService.isManager&&!t.authService.isAdmin),u.xp6(1),u.Q6J("ngIf",t.authService.isAdmin),u.xp6(4),u.Q6J("ngIf",!t.authService.isAdmin)}}function Pk(n,e){1&n&&(u.ynx(0),u.TgZ(1,"a",33),u.TgZ(2,"li",16),u._uU(3,"Login"),u.qZA(),u.qZA(),u.TgZ(4,"a",34),u.TgZ(5,"li",16),u._uU(6,"Register"),u.qZA(),u.qZA(),u.BQk())}const fx=function(){return["/dishes",1]};let kk=(()=>{class n{constructor(t,r){this.router=r,this.authService=t}ngOnInit(){}logout(){this.authService.logout().then(()=>this.router.navigate([""])).catch(t=>console.log(t.message))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wc),u.Y36(dr))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-menu"]],decls:32,vars:13,consts:[[1,"list"],[1,"hamburger"],["id","hamburger-check","type","checkbox"],["for","hamburger-check"],[1,"hamburgerlist"],["class","hamburgeritem","routerLink","login",4,"ngIf"],["class","hamburgeritem","routerLink","register",4,"ngIf"],["class","hamburgeritem",3,"click",4,"ngIf"],["routerLink","",1,"hamburgeritem"],[1,"hamburgeritem",3,"routerLink"],["class","hamburgeritem","routerLink","cart",4,"ngIf"],["class","hamburgeritem","routerLink","dishmanager",4,"ngIf"],["class","hamburgeritem","routerLink","adminview",4,"ngIf"],["routerLink","",1,"item"],["routerLinkActive","active",1,"home"],[1,"item",3,"routerLink"],["routerLinkActive","active"],[4,"ngIf"],[1,"item","currency"],["routerLink","login",1,"hamburgeritem"],[1,"auth"],["routerLink","register",1,"hamburgeritem"],[1,"hamburgeritem",3,"click"],["routerLink","cart",1,"hamburgeritem"],["routerLink","dishmanager",1,"hamburgeritem"],["routerLink","adminview",1,"hamburgeritem"],["routerLink","cart",1,"item"],["class","item","routerLink","dishmanager",4,"ngIf"],[1,"item","logout",3,"click"],["class","logged-as",4,"ngIf"],["routerLink","dishmanager",1,"item"],["routerLink","adminview",1,"item"],[1,"logged-as"],["routerLink","login",1,"item","login"],["routerLink","register",1,"item","register"]],template:function(t,r){1&t&&(u.TgZ(0,"nav"),u.TgZ(1,"ul",0),u.TgZ(2,"div",1),u._UZ(3,"input",2),u.TgZ(4,"label",3),u._UZ(5,"span"),u._UZ(6,"span"),u._UZ(7,"span"),u.qZA(),u.TgZ(8,"section",4),u.YNc(9,Ek,3,0,"a",5),u.YNc(10,bk,3,0,"a",6),u.YNc(11,Ik,4,0,"a",7),u.TgZ(12,"a",8),u.TgZ(13,"div"),u._uU(14,"Home"),u.qZA(),u.qZA(),u.TgZ(15,"a",9),u.TgZ(16,"div"),u._uU(17,"Dishes"),u.qZA(),u.qZA(),u.YNc(18,Dk,3,0,"a",10),u.YNc(19,Tk,3,0,"a",11),u.YNc(20,Ak,3,0,"a",12),u.YNc(21,Sk,3,0,"a",11),u.qZA(),u.qZA(),u.TgZ(22,"a",13),u.TgZ(23,"li",14),u._uU(24,"Home"),u.qZA(),u.qZA(),u.TgZ(25,"a",15),u.TgZ(26,"li",16),u._uU(27,"Dishes"),u.qZA(),u.qZA(),u.YNc(28,Ok,10,3,"ng-container",17),u.YNc(29,Pk,7,0,"ng-container",17),u.TgZ(30,"li",18),u._UZ(31,"app-currency"),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(9),u.Q6J("ngIf",!r.authService.isLoggedIn),u.xp6(1),u.Q6J("ngIf",!r.authService.isLoggedIn),u.xp6(1),u.Q6J("ngIf",r.authService.isLoggedIn),u.xp6(4),u.Q6J("routerLink",u.DdM(11,fx)),u.xp6(3),u.Q6J("ngIf",r.authService.isLoggedIn),u.xp6(1),u.Q6J("ngIf",r.authService.isManager&&!r.authService.isAdmin&&r.authService.isLoggedIn),u.xp6(1),u.Q6J("ngIf",r.authService.isAdmin&&r.authService.isLoggedIn),u.xp6(1),u.Q6J("ngIf",r.authService.isAdmin&&r.authService.isLoggedIn),u.xp6(4),u.Q6J("routerLink",u.DdM(12,fx)),u.xp6(3),u.Q6J("ngIf",r.authService.isLoggedIn),u.xp6(1),u.Q6J("ngIf",!r.authService.isLoggedIn))},directives:[sr,v,S,Ck],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box;font-family:"Roboto",sans-serif}nav[_ngcontent-%COMP%]{position:sticky;width:100%;top:0;z-index:2;background-color:#858585}.list[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0;height:64px;padding:0}li[_ngcontent-%COMP%]{display:inline-block;padding:20px;background-color:#858585}li[_ngcontent-%COMP%]:hover{background-color:#919191}li[_ngcontent-%COMP%]:active{background-color:#969696}a[_ngcontent-%COMP%]{text-decoration:none;color:#fff}.active[_ngcontent-%COMP%]{background-color:#cb9367}.active[_ngcontent-%COMP%]:hover{background-color:#df9258}.home[_ngcontent-%COMP%]:hover{background-color:#df9258}.home[_ngcontent-%COMP%]:active{background-color:#f39853}.login[_ngcontent-%COMP%]{margin-left:auto}.logout[_ngcontent-%COMP%]{display:inline-block;text-decoration:none;color:#fff;border:none;padding:20px;background-color:#858585;margin-left:auto}.logout[_ngcontent-%COMP%]:hover{background-color:#919191}.logout[_ngcontent-%COMP%]:active{background-color:#969696}.logged-as[_ngcontent-%COMP%]{position:absolute;right:10px;top:4rem;color:#afaeae;font-size:1rem}.header[_ngcontent-%COMP%]{position:absolute;top:1rem;color:#fff}.hamburgerlist[_ngcontent-%COMP%]{list-style-type:none;display:none}.hamburger[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}@media (max-width: 768px){.item[_ngcontent-%COMP%]{display:none}.currency[_ngcontent-%COMP%]{display:block;margin-left:auto}.auth[_ngcontent-%COMP%]{color:#363636}.hamburger[_ngcontent-%COMP%]{position:absolute;left:1rem;top:1rem}.hamburger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:33px;height:4px;margin-bottom:5px;background:whitesmoke;border-radius:3px;z-index:1;transition:transform .4s,opacity .1s;margin-right:10px}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{width:90vw;height:90vh;z-index:-1}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){transform:translateY(10px) rotate(45deg)}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){opacity:0}input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){transform:translateY(-8px) rotate(-45deg)}.hamburgerlist[_ngcontent-%COMP%]{display:block;opacity:0;background-color:#f1f1f1;position:absolute;width:50vw;height:-moz-fit-content;height:fit-content;top:-16px;left:0;transition:transform .5s ease-in-out,opacity .3s ease-in;transform:translate(-400px,64px);z-index:-1}.hamburger[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .hamburgerlist[_ngcontent-%COMP%]{transform:translate(-1rem,64px);opacity:1;z-index:10}.hamburgerlist[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:1.5rem;padding:25px 2rem;background-color:none}.hamburger[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .hamburgerlist[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:block;padding:25px 2rem;z-index:10}.hamburgerlist[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#848484;transition:color .2s}.hamburgerlist[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#939393}.hamburgerlist[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#e6e6e6}.hamburgerlist[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:active{background-color:#d6d4d4}}@media (max-width: 500px){.hamburgerlist[_ngcontent-%COMP%]{width:60vw}.hamburgerlist[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:1rem;padding:20px 1rem}.hamburger[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .hamburgerlist[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:20px 1rem;font-size:1rem}}']}),n})(),Nk=(()=>{class n{constructor(){this.title="restaurant"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&(u._UZ(0,"app-menu"),u._UZ(1,"router-outlet"))},directives:[kk,hd],styles:["header[_ngcontent-%COMP%]{text-align:center;padding:2rem}"]}),n})();const px="firebasestorage.googleapis.com",gx="storageBucket";class mr extends ft.ZR{constructor(e,t){super(uA(e),`Firebase Storage: ${t} (${uA(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mr.prototype)}_codeEquals(e){return uA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function uA(n){return"storage/"+n}function cA(){return new mr("unknown","An unknown error occurred, please check the error payload for server response.")}function mx(){return new mr("canceled","User canceled the upload/download.")}function _x(){return new mr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function G_(n){return new mr("invalid-argument",n)}function yx(){return new mr("app-deleted","The Firebase app was deleted.")}function vx(n){return new mr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uw(n,e){return new mr("invalid-format","String does not match format '"+n+"': "+e)}function cw(n){throw new mr("internal-error","Internal error: "+n)}class is{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=is.makeFromUrl(e,t)}catch(o){return new is(e,"")}if(""===r.path)return r;throw function(n){return new mr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",_=new RegExp("^gs://"+o+"(/(.*))?$","i");function T(lt){lt.path_=decodeURIComponent(lt.path)}const O=t.replace(/[.]/g,"\\."),Lt=[{regex:_,indices:{bucket:1,path:3},postModify:function(lt){"/"===lt.path.charAt(lt.path.length-1)&&(lt.path_=lt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${O}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:T},{regex:new RegExp(`^https?://${t===px?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:T}];for(let lt=0;lt<Lt.length;lt++){const ln=Lt[lt],fi=ln.regex.exec(e);if(fi){let hw=fi[ln.indices.path];hw||(hw=""),r=new is(fi[ln.indices.bucket],hw),ln.postModify(r);break}}if(null==r)throw function(n){return new mr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Yk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Tb(n){return"string"==typeof n||n instanceof String}function wx(n){return lA()&&n instanceof Blob}function lA(){return"undefined"!=typeof Blob}function dA(n,e,t,r){if(r<e)throw G_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw G_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ll(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Cx(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Jh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Jh||(Jh={})),Jh))();class nN{constructor(e,t,r,o,c,f,_,C,T,R,O){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=f,this.callback_=_,this.errorCallback_=C,this.timeout_=T,this.progressCallback_=R,this.connectionFactory_=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,z)=>{this.resolve_=q,this.reject_=z,this.start_()})}start_(){const t=(r,o)=>{const c=this.resolve_,f=this.reject_,_=o.connection;if(o.wasSuccessCode)try{const C=this.callback_(_,_.getResponse());!function(n){return void 0!==n}(C)?c():c(C)}catch(C){f(C)}else if(null!==_){const C=cA();C.serverResponse=_.getErrorText(),f(this.errorCallback_?this.errorCallback_(_,C):C)}else f(o.canceled?this.appDelete_?yx():mx():new mr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new Ab(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,o=null,c=null,f=!1,_=0;function C(){return 2===_}let T=!1;function R(...Me){T||(T=!0,e.apply(null,Me))}function O(Me){o=setTimeout(()=>{o=null,n(z,C())},Me)}function q(){c&&clearTimeout(c)}function z(Me,...Tt){if(T)return void q();if(Me)return q(),void R.call(null,Me,...Tt);if(C()||f)return q(),void R.call(null,Me,...Tt);let Lt;r<64&&(r*=2),1===_?(_=2,Lt=0):Lt=1e3*(r+Math.random()),O(Lt)}let ie=!1;function Pe(Me){ie||(ie=!0,q(),!T&&(null!==o?(Me||(_=2),clearTimeout(o),O(0)):Me||(_=1)))}return O(0),c=setTimeout(()=>{f=!0,Pe(!0)},t),Pe}((r,o)=>{if(o)return void r(!1,new Ab(!1,null,!0));const c=this.connectionFactory_();this.pendingConnection_=c;const f=_=>{null!==this.progressCallback_&&this.progressCallback_(_.loaded,_.lengthComputable?_.total:-1)};null!==this.progressCallback_&&c.addUploadProgressListener(f),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&c.removeUploadProgressListener(f),this.pendingConnection_=null;const _=c.getErrorCode()===Jh.NO_ERROR,C=c.getStatus();if(!_||this.isRetryStatusCode_(C)){const R=c.getErrorCode()===Jh.ABORT;return void r(!1,new Ab(!1,null,R))}const T=-1!==this.successCodes_.indexOf(C);r(!0,new Ab(T,c))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),c=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||c}}class Ab{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function cN(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(lA())return new Blob(n);throw new mr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const xo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hA{constructor(e,t){this.data=e,this.contentType=t||null}}function fA(n,e){switch(n){case xo.RAW:return new hA(Ex(e));case xo.BASE64:case xo.BASE64URL:return new hA(bx(n,e));case xo.DATA_URL:return new hA(function(n){const e=new Ix(n);return e.base64?bx(xo.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw uw(xo.DATA_URL,"Malformed data URL.")}return Ex(e)}(e.rest)}(e),function(n){return new Ix(n).contentType}(e))}throw cA()}function Ex(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function bx(n,e){switch(n){case xo.BASE64:{const o=-1!==e.indexOf("-"),c=-1!==e.indexOf("_");if(o||c)throw uw(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case xo.BASE64URL:{const o=-1!==e.indexOf("+"),c=-1!==e.indexOf("/");if(o||c)throw uw(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(o){throw uw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class Ix{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw uw(xo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class bc{constructor(e,t){let r=0,o="";wx(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(wx(this.data_)){const o=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new bc(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new bc(r,!0)}}static getBlob(...e){if(lA()){const t=e.map(r=>r instanceof bc?r.data_:r);return new bc(cN.apply(null,t))}{const t=e.map(f=>Tb(f)?fA(xo.RAW,f).data:f.data_);let r=0;t.forEach(f=>{r+=f.byteLength});const o=new Uint8Array(r);let c=0;return t.forEach(f=>{for(let _=0;_<f.length;_++)o[c++]=f[_]}),new bc(o,!0)}}uploadData(){return this.data_}}function pA(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Dx(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function yN(n,e){return e}class Ds{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||yN}}let Sb=null;function lw(){if(Sb)return Sb;const n=[];n.push(new Ds("bucket")),n.push(new Ds("generation")),n.push(new Ds("metageneration")),n.push(new Ds("name","fullPath",!0));const t=new Ds("name");t.xform=function(c,f){return function(n){return!Tb(n)||n.length<2?n:Dx(n)}(f)},n.push(t);const o=new Ds("size");return o.xform=function(c,f){return void 0!==f?Number(f):f},n.push(o),n.push(new Ds("timeCreated")),n.push(new Ds("updated")),n.push(new Ds("md5Hash",null,!0)),n.push(new Ds("cacheControl",null,!0)),n.push(new Ds("contentDisposition",null,!0)),n.push(new Ds("contentEncoding",null,!0)),n.push(new Ds("contentLanguage",null,!0)),n.push(new Ds("contentType",null,!0)),n.push(new Ds("metadata","customMetadata",!0)),Sb=n,Sb}function Tx(n,e,t){const r=pA(e);return null===r?null:function(n,e,t){const r={type:"file"},o=t.length;for(let c=0;c<o;c++){const f=t[c];r[f.local]=f.xform(r,e[f.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const c=new is(n.bucket,n.fullPath);return e._makeStorageReference(c)}})}(r,n),r}(n,r,t)}function gA(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const c=e[o];c.writable&&(t[c.server]=n[c.local])}return JSON.stringify(t)}const Ax="prefixes";class Ic{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Dc(n){if(!n)throw cA()}function xb(n,e){return function(r,o){const c=Tx(n,o,e);return Dc(null!==c),c}}function z_(n){return function(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new mr("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new mr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new mr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new mr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function dw(n){const e=z_(n);return function(r,o){let c=e(r,o);return 404===r.getStatus()&&(c=function(n){return new mr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),c.serverResponse=o.serverResponse,c}}function xx(n,e,t){const o=Ll(e.fullServerUrl(),n.host,n._protocol),f=n.maxOperationRetryTime,_=new Ic(o,"GET",xb(n,t),f);return _.errorHandler=dw(e),_}function AN(n,e,t,r,o){const c={};c.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(c.delimiter=t),r&&(c.pageToken=r),o&&(c.maxResults=o);const _=Ll(e.bucketOnlyServerUrl(),n.host,n._protocol),T=n.maxOperationRetryTime,R=new Ic(_,"GET",function(n,e){return function(r,o){const c=function(n,e,t){const r=pA(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Ax])for(const o of t[Ax]){const c=o.replace(/\/$/,""),f=n._makeStorageReference(new is(e,c));r.prefixes.push(f)}if(t.items)for(const o of t.items){const c=n._makeStorageReference(new is(e,o.name));r.items.push(c)}return r}(n,e,r)}(n,e,o);return Dc(null!==c),c}}(n,e.bucket),T);return R.urlParams=c,R.errorHandler=z_(e),R}function Rx(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class Mb{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function mA(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){Dc(!1)}return Dc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const NN={STATE_CHANGED:"state_changed"},Ts={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _A(n){switch(n){case"running":case"pausing":case"canceling":return Ts.RUNNING;case"paused":return Ts.PAUSED;case"success":return Ts.SUCCESS;case"canceled":return Ts.CANCELED;default:return Ts.ERROR}}class FN{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const c=e;this.next=c.next,this.error=c.error,this.complete=c.complete}}}function W_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class UN extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw cw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw cw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw cw("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw cw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw cw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function pu(){return new UN}class Nx{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=lw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,c)=>{this._resolve=o,this._reject=c,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const c=e.bucketOnlyServerUrl(),f=Rx(e,r,o),_={name:f.fullPath},C=Ll(c,n.host,n._protocol),R={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":f.contentType,"Content-Type":"application/json; charset=utf-8"},O=gA(f,t),ie=new Ic(C,"POST",function(Pe){let Me;mA(Pe);try{Me=Pe.getResponseHeader("X-Goog-Upload-URL")}catch(Tt){Dc(!1)}return Dc(Tb(Me)),Me},n.maxUploadRetryTime);return ie.urlParams=_,ie.headers=R,ie.body=O,ie.errorHandler=z_(e),ie}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,pu,e,t);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function(n,e,t,r){const C=new Ic(t,"POST",function(T){const R=mA(T,["active","final"]);let O=null;try{O=T.getResponseHeader("X-Goog-Upload-Size-Received")}catch(z){Dc(!1)}O||Dc(!1);const q=Number(O);return Dc(!isNaN(q)),new Mb(q,r.size(),"final"===R)},n.maxUploadRetryTime);return C.headers={"X-Goog-Upload-Command":"query"},C.errorHandler=z_(e),C}(this._ref.storage,this._ref._location,e,this._blob),c=this._ref.storage._makeRequest(o,pu,t,r);this._request=c,c.getPromise().then(f=>{f=f,this._request=void 0,this._updateProgress(f.current),this._needToFetchStatus=!1,f.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Mb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,c)=>{let f;try{f=function(n,e,t,r,o,c,f,_){const C=new Mb(0,0);if(f?(C.current=f.current,C.total=f.total):(C.current=0,C.total=r.size()),r.size()!==C.total)throw new mr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const T=C.total-C.current;let R=T;o>0&&(R=Math.min(R,o));const O=C.current,ie={"X-Goog-Upload-Command":R===T?"upload, finalize":"upload","X-Goog-Upload-Offset":`${C.current}`},Pe=r.slice(O,O+R);if(null===Pe)throw _x();const Lt=new Ic(t,"POST",function(lt,ln){const fi=mA(lt,["active","final"]),Xh=C.current+R,hw=r.size();let wA;return wA="final"===fi?xb(e,c)(lt,ln):null,new Mb(Xh,hw,"final"===fi,wA)},e.maxUploadRetryTime);return Lt.headers=ie,Lt.body=Pe.uploadData(),Lt.progressCallback=_||null,Lt.errorHandler=z_(n),Lt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(C){return this._error=C,void this._transition("error")}const _=this._ref.storage._makeRequest(f,pu,o,c);this._request=_,_.getPromise().then(C=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(C.current),C.finalized?(this._metadata=C.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=xx(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,pu,e,t);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const c=e.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"},C=function(){let Lt="";for(let lt=0;lt<2;lt++)Lt+=Math.random().toString().slice(2);return Lt}();f["Content-Type"]="multipart/related; boundary="+C;const T=Rx(e,r,o),R=gA(T,t),z=bc.getBlob("--"+C+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+R+"\r\n--"+C+"\r\nContent-Type: "+T.contentType+"\r\n\r\n",r,"\r\n--"+C+"--");if(null===z)throw _x();const ie={name:T.fullPath},Pe=Ll(c,n.host,n._protocol),Tt=n.maxUploadRetryTime,xt=new Ic(Pe,"POST",xb(n,t),Tt);return xt.urlParams=ie,xt.headers=f,xt.body=z.uploadData(),xt.errorHandler=z_(e),xt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,pu,e,t);this._request=o,o.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=mx(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=_A(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const c=new FN(t||void 0,r||void 0,o||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(_A(this._state)){case Ts.SUCCESS:W_(this._resolve.bind(null,this.snapshot))();break;case Ts.CANCELED:case Ts.ERROR:W_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(_A(this._state)){case Ts.RUNNING:case Ts.PAUSED:e.next&&W_(e.next.bind(e,this.snapshot))();break;case Ts.SUCCESS:e.complete&&W_(e.complete.bind(e))();break;default:e.error&&W_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Tg{constructor(e,t){this._service=e,this._location=t instanceof is?t:is.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Tg(e,t)}get root(){const e=new is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Dx(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new is(this._location.bucket,e);return new Tg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw vx(e)}}function Lx(n,e,t){return yA.apply(this,arguments)}function yA(){return yA=(0,he.Z)(function*(n,e,t){const o=yield Ux(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield Lx(n,e,o.nextPageToken))}),yA.apply(this,arguments)}function Ux(n,e){null!=e&&"number"==typeof e.maxResults&&dA("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=AN(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,pu)}function YN(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const o=Ll(e.fullServerUrl(),n.host,n._protocol),f=n.maxOperationRetryTime,_=new Ic(o,"GET",function(n,e){return function(r,o){const c=Tx(n,o,e);return Dc(null!==c),function(n,e,t,r){const o=pA(e);if(null===o||!Tb(o.downloadTokens))return null;const c=o.downloadTokens;if(0===c.length)return null;const f=encodeURIComponent;return c.split(",").map(T=>{const O=n.fullPath;return Ll("/b/"+f(n.bucket)+"/o/"+f(O),t,r)+Cx({alt:"media",token:T})})[0]}(c,o,n.host,n._protocol)}}(n,t),f);return _.errorHandler=dw(e),_}(n.storage,n._location,lw());return n.storage.makeRequestWithTokens(e,pu).then(t=>{if(null===t)throw new mr("no-download-url","The given file does not have any download URLs.");return t})}function Vx(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new is(n._location.bucket,t);return new Tg(n.storage,r)}function Bx(n,e){if(n instanceof vA){const t=n;if(null==t._bucket)throw new mr("no-default-bucket","No default bucket found. Did you set the '"+gx+"' property when initializing the app?");const r=new Tg(t,t._bucket);return null!=e?Bx(r,e):r}return void 0!==e?Vx(n,e):n}function eF(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof vA)return function(n,e){return new Tg(n,e)}(n,e);throw G_("To use ref(service, url), the first argument must be a Storage instance.")}return Bx(n,e)}function jx(n,e){const t=null==e?void 0:e[gx];return null==t?null:is.makeFromBucketSpec(t,n)}class vA{constructor(e,t,r,o,c){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=c,this._bucket=null,this._host=px,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?is.makeFromBucketSpec(o,this._host):jx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?is.makeFromBucketSpec(this._url,e):jx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,he.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,he.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tg(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new Yk(yx());{const c=function(n,e,t,r,o,c){const f=Cx(n.urlParams),_=n.url+f,C=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(C,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(C,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(C,c),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(C,r),new nN(_,n.method,C,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,he.Z)(function*(){const[o,c]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,c).getPromise()})()}}const Zx="@firebase/storage";function Hx(n,e){return eF(n=(0,ft.m9)(n),e)}(0,wo._registerComponent)(new Yu.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new vA(t,r,o,e,wo.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,wo.registerVersion)(Zx,"0.9.0",""),(0,wo.registerVersion)(Zx,"0.9.0","esm2017");class Rb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Gx{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Rb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Rb(r,this,this._ref))},t)}on(e,t,r,o){let c;return t&&(c="function"==typeof t?f=>t(new Rb(f,this,this._ref)):{next:t.next?f=>t.next(new Rb(f,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,c,r||void 0,o||void 0)}}class zx{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ul(e,this._service))}get items(){return this._delegate.items.map(e=>new Ul(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ul{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return Vx(n,e)}(this._delegate,e);return new Ul(t,this.storage)}get root(){return new Ul(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ul(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Gx(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Nx(n,new bc(e),t)}(n=(0,ft.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=xo.RAW,r){this._throwIfRoot("putString");const o=fA(t,e),c=Object.assign({},r);return null==c.contentType&&null!=o.contentType&&(c.contentType=o.contentType),new Gx(new Nx(this._delegate,new bc(o.data,!0),c),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return Lx(n,e).then(()=>e)}(n=(0,ft.m9)(n))}(this._delegate).then(e=>new zx(e,this.storage))}list(e){return function(n,e){return Ux(n=(0,ft.m9)(n),e)}(this._delegate,e||void 0).then(t=>new zx(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=xx(n.storage,n._location,lw());return n.storage.makeRequestWithTokens(e,pu)}(n=(0,ft.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const c=Ll(e.fullServerUrl(),n.host,n._protocol),_=gA(t,r),T=n.maxOperationRetryTime,R=new Ic(c,"PATCH",xb(n,r),T);return R.headers={"Content-Type":"application/json; charset=utf-8"},R.body=_,R.errorHandler=dw(e),R}(n.storage,n._location,e,lw());return n.storage.makeRequestWithTokens(t,pu)}(n=(0,ft.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return YN(n=(0,ft.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=Ll(e.fullServerUrl(),n.host,n._protocol),_=new Ic(r,"DELETE",function(C,T){},n.maxOperationRetryTime);return _.successCodes=[200,204],_.errorHandler=dw(e),_}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,pu)}(n=(0,ft.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw vx(e)}}class Wx{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Kx(e))throw G_("ref() expected a child path but got a URL, use refFromURL instead.");return new Ul(Hx(this._delegate,e),this)}refFromURL(e){if(!Kx(e))throw G_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{is.makeFromUrl(e,this._delegate.host)}catch(t){throw G_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ul(Hx(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,ft.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function Kx(n){return/^[A-Za-z]+:\/\//.test(n)}function mF(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Wx(t,r)}function Yx(n){const e=function(n){return new Yr.y(e=>{const t=f=>e.next(f);t(n.snapshot);const c=n.on("state_changed",t);return n.then(f=>{t(f),e.complete()},f=>{t(n.snapshot),(f=>{e.error(f)})(f)}),function(){c()}}).pipe(function(n,e=Go.z){return(0,vr.e)((t,r)=>{let o=null,c=null,f=null;const _=()=>{if(o){o.unsubscribe(),o=null;const T=c;c=null,r.next(T)}};function C(){const T=f+n,R=e.now();if(R<T)return o=this.schedule(void 0,T-R),void r.add(o);_()}t.subscribe(new xn.Q(r,T=>{c=T,f=e.now(),o||(o=e.schedule(C,n),r.add(o))},()=>{_(),r.complete()},void 0,()=>{c=o=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,it.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Ob(n){return{getDownloadURL:()=>Je(void 0).pipe(Fn.fc,mn(()=>n.getDownloadURL()),Fn.iC),getMetadata:()=>Je(void 0).pipe(Fn.fc,mn(()=>n.getMetadata()),Fn.iC),delete:()=>(0,Wt.D)(n.delete()),child:e=>Ob(n.child(e)),updateMetadata:e=>(0,Wt.D)(n.updateMetadata(e)),put:(e,t)=>Yx(n.put(e,t)),putString:(e,t,r)=>Yx(n.putString(e,t,r)),list:e=>(0,Wt.D)(n.list(e)),listAll:()=>(0,Wt.D)(n.listAll())}}!function(n){const e={TaskState:Ts,TaskEvent:NN,StringFormat:xo,Storage:Wx,Reference:Ul};n.INTERNAL.registerComponent(new Yu.wA("storage-compat",mF,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.8")}(hI.Z);const vF=new u.OlP("angularfire2.storageBucket"),wF=new u.OlP("angularfire2.storage.maxUploadRetryTime"),CF=new u.OlP("angularfire2.storage.maxOperationRetryTime"),EF=new u.OlP("angularfire2.storage.use-emulator");let bF=(()=>{class n{constructor(t,r,o,c,f,_,C,T,R,O){const q=(0,Ai.on)(t,f,r);this.storage=(0,Ai.cc)(`${q.name}.storage.${o}`,"AngularFireStorage",q.name,()=>{const z=f.runOutsideAngular(()=>q.storage(o||void 0)),ie=R;return ie&&z.useEmulator(...ie),C&&z.setMaxUploadRetryTime(C),T&&z.setMaxOperationRetryTime(T),z},[C,T])}ref(t){return Ob(this.storage.ref(t))}refFromURL(t){return Ob(this.storage.refFromURL(t))}upload(t,r,o){return Ob(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ai.Dh),u.LFG(Ai.xv,8),u.LFG(vF,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Fn.HU),u.LFG(wF,8),u.LFG(CF,8),u.LFG(EF,8),u.LFG(fm,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),IF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),DF=(()=>{class n{constructor(){Ku.Z.registerVersion("angularfire",Fn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[bF],imports:[IF]}),n})();const Qx_firebase={apiKey:"AIzaSyDLtCDWJIll82OPakNoBsvbkGI6N6ECBCA",authDomain:"restaurantmenuapp-6fcea.firebaseapp.com",databaseURL:"https://restaurantmenuapp-6fcea-default-rtdb.europe-west1.firebasedatabase.app",projectId:"restaurantmenuapp-6fcea",storageBucket:"restaurantmenuapp-6fcea.appspot.com",messagingSenderId:"242907112754",appId:"1:242907112754:web:917ef47d9819475a35a32b",measurementId:"G-HZRJ60HFY7"};let TF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[Nk]}),n.\u0275inj=u.cJS({providers:[Eg,Wf,Cc,tw,aA,wc,Z_,fb,UT],imports:[[ba,wk,MO,hx,Ai.hO.initializeApp(Qx_firebase),DF,Gw]]}),n})();(0,u.G48)(),ko().bootstrapModule(TF).catch(n=>console.error(n))},9162:(ze,me,P)=>{"use strict";function ne(X,ce,_e,ve){return new(_e||(_e=Promise))(function(de,Et){function Zt(yt){try{bt(ve.next(yt))}catch(At){Et(At)}}function Vn(yt){try{bt(ve.throw(yt))}catch(At){Et(At)}}function bt(yt){yt.done?de(yt.value):function(de){return de instanceof _e?de:new _e(function(Et){Et(de)})}(yt.value).then(Zt,Vn)}bt((ve=ve.apply(X,ce||[])).next())})}function se(X){return this instanceof se?(this.v=X,this):new se(X)}function W(X,ce,_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,ve=_e.apply(X,ce||[]),de=[];return Oe={},Et("next"),Et("throw"),Et("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function Et(nn){ve[nn]&&(Oe[nn]=function(Ir){return new Promise(function($r,rn){de.push([nn,Ir,$r,rn])>1||Zt(nn,Ir)})})}function Zt(nn,Ir){try{!function(nn){nn.value instanceof se?Promise.resolve(nn.value.v).then(bt,yt):At(de[0][2],nn)}(ve[nn](Ir))}catch($r){At(de[0][3],$r)}}function bt(nn){Zt("next",nn)}function yt(nn){Zt("throw",nn)}function At(nn,Ir){nn(Ir),de.shift(),de.length&&Zt(de[0][0],de[0][1])}}function Ce(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,ce=X[Symbol.asyncIterator];return ce?ce.call(X):(X=function(X){var ce="function"==typeof Symbol&&Symbol.iterator,_e=ce&&X[ce],ve=0;if(_e)return _e.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&ve>=X.length&&(X=void 0),{value:X&&X[ve++],done:!X}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),_e={},ve("next"),ve("throw"),ve("return"),_e[Symbol.asyncIterator]=function(){return this},_e);function ve(de){_e[de]=X[de]&&function(Et){return new Promise(function(Zt,Vn){!function(de,Et,Zt,Vn){Promise.resolve(Vn).then(function(bt){de({value:bt,done:Zt})},Et)}(Zt,Vn,(Et=X[de](Et)).done,Et.value)})}}}P.d(me,{mG:()=>ne,qq:()=>se,FC:()=>W,KL:()=>Ce})},3668:(ze,me,P)=>{"use strict";P.d(me,{deG:()=>Nu,tb:()=>Jp,AFp:()=>Yp,ip1:()=>m_,CZH:()=>Cs,hGG:()=>$0,z2F:()=>kl,sBO:()=>O0,Sil:()=>eg,_Vd:()=>Dl,EJc:()=>y_,SBq:()=>vh,qLn:()=>cl,vpe:()=>To,tBr:()=>_n,XFs:()=>dt,OlP:()=>tn,zs3:()=>Wi,ZZ4:()=>N_,aQg:()=>Vh,soG:()=>Xp,YKP:()=>un,h0i:()=>Ch,PXZ:()=>VD,R0b:()=>qr,FiY:()=>cr,Lbi:()=>Nh,g9A:()=>__,Qsj:()=>fE,FYo:()=>Xv,JOm:()=>qs,tp0:()=>Jr,Rgc:()=>Sh,dDg:()=>b_,q4F:()=>er,GfV:()=>gE,s_b:()=>au,ifc:()=>Ge,eFA:()=>I_,G48:()=>$D,Gpc:()=>V,X6Q:()=>qD,_c5:()=>QE,VLi:()=>ND,c2e:()=>kE,zSh:()=>Ye,wAp:()=>mt,vHH:()=>Ue,cg1:()=>Bv,kL8:()=>GC,dqk:()=>wt,sIi:()=>Bd,CqO:()=>bC,QGY:()=>Dn,F4k:()=>gp,RDi:()=>sf,AaK:()=>ne,qOj:()=>Nr,TTD:()=>Rs,_Bn:()=>yh,xp6:()=>Vb,uIk:()=>ap,ekj:()=>Sv,Suo:()=>Sl,Xpm:()=>bn,lG2:()=>Js,Yz7:()=>rn,cJS:()=>An,oAB:()=>ra,Yjl:()=>Sc,Y36:()=>wl,_UZ:()=>EC,BQk:()=>th,ynx:()=>eh,qZA:()=>Pm,TgZ:()=>tu,EpF:()=>mv,n5z:()=>ku,LFG:()=>H,$8M:()=>po,$Z:()=>CC,NdJ:()=>_v,CRH:()=>xl,oxw:()=>DC,ALo:()=>d0,lcZ:()=>h0,G7q:()=>f0,Q6J:()=>pp,MGl:()=>yp,DdM:()=>a0,VKq:()=>u0,WLB:()=>vE,l5B:()=>wE,qbA:()=>Ih,iGM:()=>dc,CHM:()=>us,LSH:()=>pd,YNc:()=>hC,_uU:()=>Um,Oqu:()=>Tp,hij:()=>Ap,AsE:()=>rh});var u=P(273),Y=P(7908),k=P(8305),ae=P(3719),te=P(3174);function fe(i){for(let s in i)if(i[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function re(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ne(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ne).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=fe({__forward_ref__:fe});function V(i){return i.__forward_ref__=V,i.toString=function(){return ne(this())},i}function Q(i){return Le(i)?i():i}function Le(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===V}class Ue extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function W(i){return"string"==typeof i?i:null==i?"":String(i)}function oe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():W(i)}function Se(i,s){const a=s?` in ${s}`:"";throw new Ue("201",`No provider for ${oe(i)} found${a}`)}function yt(i,s){null==i&&function(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function rn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function An(i){return{providers:i.providers||[],imports:i.imports||[]}}function gi(i){return Ut(i,ki)||Ut(i,Gn)}function Ut(i,s){return i.hasOwnProperty(s)?i[s]:null}function mi(i){return i&&(i.hasOwnProperty(Te)||i.hasOwnProperty(kn))?i[Te]:null}const ki=fe({\u0275prov:fe}),Te=fe({\u0275inj:fe}),Gn=fe({ngInjectableDef:fe}),kn=fe({ngInjectorDef:fe});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let Bt;function Hr(i){const s=Bt;return Bt=i,s}function at(i,s,a){const l=gi(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&dt.Optional?null:void 0!==s?s:void Se(ne(i),"Injector")}function Mt(i){return{toString:i}.toString()}var Rt=(()=>((Rt=Rt||{})[Rt.OnPush=0]="OnPush",Rt[Rt.Default=1]="Default",Rt))(),Ge=(()=>{return(i=Ge||(Ge={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ge;var i})();const ot="undefined"!=typeof globalThis&&globalThis,Tc="undefined"!=typeof window&&window,As="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,wt=ot||"undefined"!=typeof global&&global||Tc||As,Z={},L=[],$=fe({\u0275cmp:fe}),ye=fe({\u0275dir:fe}),ee=fe({\u0275pipe:fe}),We=fe({\u0275mod:fe}),ct=fe({\u0275fac:fe}),Gt=fe({__NG_ELEMENT_ID__:fe});let nr=0;function bn(i){return Mt(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Rt.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ge.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,g=i.features,y=i.pipes;return l.id+=nr++,l.inputs=gu(i.inputs,a),l.outputs=gu(i.outputs),g&&g.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(kt):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(rr):null,l})}function kt(i){return sn(i)||function(i){return i[ye]||null}(i)}function rr(i){return function(i){return i[ee]||null}(i)}const Qs={};function ra(i){return Mt(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Qs[i.id]=i.type),s})}function gu(i,s){if(null==i)return Z;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,s&&(s[d]=g)}return a}const Js=bn;function Sc(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function sn(i){return i[$]||null}function ir(i,s){const a=i[We]||null;if(!a&&!0===s)throw new Error(`Type ${ne(i)} does not have '\u0275mod' property.`);return a}function Ni(i){return Array.isArray(i)&&"object"==typeof i[1]}function Fi(i){return Array.isArray(i)&&!0===i[1]}function Bn(i){return 0!=(8&i.flags)}function ss(i){return 2==(2&i.flags)}function xc(i){return 1==(1&i.flags)}function oi(i){return null!==i.template}function ef(i){return 0!=(512&i[2])}function Li(i,s){return i.hasOwnProperty(ct)?i[ct]:null}class Oc{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Rs(){return Oo}function Oo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Pc),Os}function Os(){const i=or(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Z)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Pc(i,s,a,l){const d=or(i)||function(i,s){return i[Hl]=s}(i,{previous:Z,current:null}),g=d.current||(d.current={}),y=d.previous,w=this.declaredInputs[a],E=y[w];g[w]=new Oc(E&&E.currentValue,s,y===Z),i[l]=s}Rs.ngInherit=!0;const Hl="__ngSimpleChanges__";function or(i){return i[Hl]||null}let wu;function sf(i){wu=i}function Jt(i){return!!i.listen}const Nc={createRenderer:(i,s)=>void 0!==wu?wu:"undefined"!=typeof document?document:void 0};function Mn(i){for(;Array.isArray(i);)i=i[0];return i}function Ei(i,s){return Mn(s[i])}function Rn(i,s){return Mn(s[i.index])}function io(i,s){return i.data[s]}function so(i,s){return i[s]}function zt(i,s){const a=s[i];return Ni(a)?a:a[0]}function as(i){return 4==(4&i[2])}function ha(i){return 128==(128&i[2])}function Sr(i,s){return null==s?null:i[s]}function fa(i){i[18]=0}function Ps(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const Qe={lFrame:Uc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function bu(){return Qe.bindingsEnabled}function be(){return Qe.lFrame.lView}function Ot(){return Qe.lFrame.tView}function us(i){return Qe.lFrame.contextLView=i,i[8]}function pn(){let i=ma();for(;null!==i&&64===i.type;)i=i.parent;return i}function ma(){return Qe.lFrame.currentTNode}function ar(i,s){const a=Qe.lFrame;a.currentTNode=i,a.isParent=s}function Du(){return Qe.lFrame.isParent}function ao(){Qe.lFrame.isParent=!1}function _a(){return Qe.isInCheckNoChangesMode}function uo(i){Qe.isInCheckNoChangesMode=i}function Wn(){const i=Qe.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Ns(){return Qe.lFrame.bindingIndex++}function Ui(i){const s=Qe.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function Ca(i,s){const a=Qe.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ea(s)}function Ea(i){Qe.lFrame.currentDirectiveIndex=i}function Au(){return Qe.lFrame.currentQueryIndex}function ba(i){Qe.lFrame.currentQueryIndex=i}function Kl(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Su(i,s,a){if(a&dt.SkipSelf){let d=s,g=i;for(;!(d=d.parent,null!==d||a&dt.Host||(d=Kl(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;s=d,i=g}const l=Qe.lFrame=Ia();return l.currentTNode=s,l.lView=i,!0}function xu(i){const s=Ia(),a=i[1];Qe.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Ia(){const i=Qe.lFrame,s=null===i?null:i.child;return null===s?Uc(i):s}function Uc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Da(){const i=Qe.lFrame;return Qe.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Yl=Da;function Ta(){const i=Da();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function on(){return Qe.lFrame.selectedIndex}function Fs(i){Qe.lFrame.selectedIndex=i}function gn(){const i=Qe.lFrame;return io(i.tView,i.selectedIndex)}function Ls(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:E,ngAfterViewChecked:A,ngOnDestroy:x}=g;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function Mu(i,s,a){Bc(i,s,3,a)}function Sa(i,s,a,l){(3&i[2])===a&&Bc(i,s,a,l)}function Jl(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Bc(i,s,a,l){const g=null!=l?l:-1,y=s.length-1;let w=0;for(let E=void 0!==l?65535&i[18]:0;E<y;E++)if("number"==typeof s[E+1]){if(w=s[E],null!=l&&w>=l)break}else s[E]<0&&(i[18]+=65536),(w<g||-1==g)&&(Xl(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Xl(i,s,a,l){const d=a[l]<0,g=a[l+1],w=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class xa{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Wt(i,s,a){const l=Jt(i);let d=0;for(;d<a.length;){const g=a[d];if("number"==typeof g){if(0!==g)break;d++;const y=a[d++],w=a[d++],E=a[d++];l?i.setAttribute(s,w,E,y):s.setAttributeNS(y,w,E)}else{const y=g,w=a[++d];Je(y)?l&&i.setProperty(s,y,w):l?i.setAttribute(s,y,w):s.setAttribute(y,w),d++}}return d}function co(i){return 3===i||4===i||6===i}function Je(i){return 64===i.charCodeAt(0)}function Vi(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||jn(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function jn(i,s,a,l,d){let g=0,y=i.length;if(-1===s)y=-1;else for(;g<i.length;){const w=i[g++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=g-1;break}}}for(;g<i.length;){const w=i[g];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[g+1]=d));if(l===i[g+1])return void(i[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==y&&(i.splice(y,0,s),g=y+1),i.splice(g++,0,a),null!==l&&i.splice(g++,0,l),null!==d&&i.splice(g++,0,d)}function Yr(i){return-1!==i}function Fo(i){return 32767&i}function Ra(i,s){let a=function(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Ou=!0;function lo(i){const s=Ou;return Ou=i,s}let df=0;function Lo(i,s){const a=xn(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Uo(l.data,i),Uo(s,null),Uo(l.blueprint,null));const d=Pu(i,s),g=i.injectorIndex;if(Yr(d)){const y=Fo(d),w=Ra(d,s),E=w[1].data;for(let A=0;A<8;A++)s[g+A]=w[y+A]|E[y+A]}return s[g+8]=d,g}function Uo(i,s){i.push(0,0,0,0,0,0,0,0,s)}function xn(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Pu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const g=d[1],y=g.type;if(l=2===y?g.declTNode:1===y?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ls(i,s,a){!function(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Gt)&&(l=a[Gt]),null==l&&(l=a[Gt]=df++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Ii(i,s,a){if(a&dt.Optional)return i;Se(s,"NodeInjector")}function Zc(i,s,a,l){if(a&dt.Optional&&void 0===l&&(l=null),0==(a&(dt.Self|dt.Host))){const d=i[9],g=Hr(void 0);try{return d?d.get(s,l,a&dt.Optional):at(s,l,a&dt.Optional)}finally{Hr(g)}}return Ii(l,s,a)}function Vo(i,s,a,l=dt.Default,d){if(null!==i){const g=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Gt)?i[Gt]:void 0;return"number"==typeof s?s>=0?255&s:Oa:s}(a);if("function"==typeof g){if(!Su(s,i,l))return l&dt.Host?Ii(d,a,l):Zc(s,a,l,d);try{const y=g(l);if(null!=y||l&dt.Optional)return y;Se(a)}finally{Yl()}}else if("number"==typeof g){let y=null,w=xn(i,s),E=-1,A=l&dt.Host?s[16][6]:null;for((-1===w||l&dt.SkipSelf)&&(E=-1===w?Pu(i,s):s[w+8],-1!==E&&vr(l,!1)?(y=s[1],w=Fo(E),s=Ra(E,s)):w=-1);-1!==w;){const x=s[1];if(fo(g,w,x.data)){const N=qc(w,s,a,y,l,A);if(N!==ho)return N}E=s[w+8],-1!==E&&vr(l,s[1].data[w+8]===A)&&fo(g,w,s)?(y=x,w=Fo(E),s=Ra(E,s)):w=-1}}}return Zc(s,a,l,d)}const ho={};function Oa(){return new hn(pn(),be())}function qc(i,s,a,l,d,g){const y=s[1],w=y.data[i+8],x=Zn(w,y,a,null==l?ss(w)&&Ou:l!=y&&0!=(3&w.type),d&dt.Host&&g===w);return null!==x?Vs(s,y,x,w):ho}function Zn(i,s,a,l,d){const g=i.providerIndexes,y=s.data,w=1048575&g,E=i.directiveStart,x=g>>20,j=d?w+x:i.directiveEnd;for(let K=l?w:w+x;K<j;K++){const pe=y[K];if(K<E&&a===pe||K>=E&&pe.type===a)return K}if(d){const K=y[E];if(K&&oi(K)&&K.type===a)return E}return null}function Vs(i,s,a,l){let d=i[a];const g=s.data;if(function(i){return i instanceof xa}(d)){const y=d;y.resolving&&function(i,s){throw new Ue("200",`Circular dependency in DI detected for ${i}`)}(oe(g[a]));const w=lo(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?Hr(y.injectImpl):null;Su(i,l,dt.Default);try{d=i[a]=y.factory(void 0,g,i,l),s.firstCreatePass&&a>=l.directiveStart&&function(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=s.type.prototype;if(l){const y=Oo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],s)}finally{null!==E&&Hr(E),lo(w),y.resolving=!1,Yl()}}return d}function fo(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function vr(i,s){return!(i&dt.Self||i&dt.Host&&s)}class hn{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Vo(this._tNode,this._lView,s,l,a)}}function ku(i){return Mt(()=>{const s=i.prototype.constructor,a=s[ct]||mn(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const g=d[ct]||mn(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function mn(i){return Le(i)?()=>{const s=mn(Q(i));return s&&s()}:Li(i)}function po(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(co(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===s)return a[d+1];d+=2}}}return null}(pn(),i)}const Bs="__parameters__";function an(i,s,a){return Mt(()=>{const l=function(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...g){if(this instanceof d)return l.apply(this,g),this;const y=new d(...g);return w.annotation=y,w;function w(E,A,x){const N=E.hasOwnProperty(Bs)?E[Bs]:Object.defineProperty(E,Bs,{value:[]})[Bs];for(;N.length<=x;)N.push(null);return(N[x]=N[x]||[]).push(y),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class tn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=rn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Nu=new tn("AnalyzeForEntryComponents");function Qr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Qr(l,s)):s!==i&&s.push(l)}return s}function Zi(i,s){i.forEach(a=>Array.isArray(a)?Zi(a,s):s(a))}function $c(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function go(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function wr(i,s,a){let l=jo(i,s);return l>=0?i[1|l]=a:(l=~l,function(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function qi(i,s){const a=jo(i,s);if(a>=0)return i[1|a]}function jo(i,s){return function(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const g=l+(d-l>>1),y=i[g<<a];if(s===y)return g<<a;y>s?d=g:l=g+1}return~(d<<a)}(i,s,1)}const La={},Lu="__NG_DI_FLAG__",hs="ngTempTokenPath",Ef=/\n/gm,b="__source",I=fe({provide:String,useValue:fe});let M;function F(i){const s=M;return M=i,s}function G(i,s=dt.Default){if(void 0===M)throw new Error("inject() must be called from an injection context");return null===M?at(i,void 0,s):M.get(i,s&dt.Optional?null:void 0,s)}function H(i,s=dt.Default){return(Bt||G)(Q(i),s)}function je(i){const s=[];for(let a=0;a<i.length;a++){const l=Q(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let d,g=dt.Default;for(let y=0;y<l.length;y++){const w=l[y],E=Kt(w);"number"==typeof E?-1===E?d=w.token:g|=E:d=w}s.push(H(d,g))}else s.push(H(l))}return s}function Pt(i,s){return i[Lu]=s,i.prototype[Lu]=s,i}function Kt(i){return i[Lu]}const _n=Pt(an("Inject",i=>({token:i})),-1),cr=Pt(an("Optional"),8),Jr=Pt(an("SkipSelf"),4);class Sf{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Zs(i){return i instanceof Sf?i.changingThisBreaksApplicationSecurity:i}const Vg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Mf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Pn=(()=>((Pn=Pn||{})[Pn.NONE=0]="NONE",Pn[Pn.HTML=1]="HTML",Pn[Pn.STYLE=2]="STYLE",Pn[Pn.SCRIPT=3]="SCRIPT",Pn[Pn.URL=4]="URL",Pn[Pn.RESOURCE_URL=5]="RESOURCE_URL",Pn))();function pd(i){const s=function(){const i=be();return i&&i[12]}();return s?s.sanitize(Pn.URL,i)||"":function(i,s){const a=function(i){return i instanceof Sf&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?Zs(i):function(i){return(i=String(i)).match(Vg)||i.match(Mf)?i:"unsafe:"+i}(W(i))}const _d="__ngContext__";function lr(i,s){i[_d]=s}function kf(i){const s=function(i){return i[_d]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Lf(i){return i.ngOriginalError}function my(i,...s){i.error(...s)}class cl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=(i=s)&&i.ngErrorLogger||my;var i;l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Lf(s);for(;a&&Lf(a);)a=Lf(a);return a||null}}const jf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(wt))();function zi(i){return i instanceof Function?i():i}var qs=(()=>((qs=qs||{})[qs.Important=1]="Important",qs[qs.DashCase=2]="DashCase",qs))();function Gu(i,s){return undefined(i,s)}function Ya(i){const s=i[3];return Fi(s)?s[3]:s}function Qa(i){return $f(i[13])}function Id(i){return $f(i[4])}function $f(i){for(;null!==i&&!Fi(i);)i=i[4];return i}function Ja(i,s,a,l,d){if(null!=l){let g,y=!1;Fi(l)?g=l:Ni(l)&&(y=!0,l=l[0]);const w=Mn(l);0===i&&null!==a?null==d?Dd(s,a,w):Hs(s,a,w,d||null,!0):1===i&&null!==a?Hs(s,a,w,d||null,!0):2===i?function(i,s,a){const l=zu(i,s);l&&function(i,s,a,l){Jt(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=g&&function(i,s,a,l,d){const g=a[7];g!==Mn(a)&&Ja(s,i,l,g,d);for(let w=10;w<a.length;w++){const E=a[w];Md(E[1],E,i,s,l,g)}}(s,i,g,a,d)}}function m(i,s,a){return Jt(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function J(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,Ps(d,-1)),a.splice(l,1)}function Re(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&J(d,l),s>0&&(i[a-1][4]=l[4]);const g=go(i,10+s);!function(i,s){Md(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const y=g[19];null!==y&&y.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function xe(i,s){if(!(256&s[2])){const a=s[11];Jt(a)&&a.destroyNode&&Md(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return Xe(i[1],i);for(;s;){let a=null;if(Ni(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Ni(s)&&Xe(s[1],s),s=s[3];null===s&&(s=i),Ni(s)&&Xe(s[1],s),a=s&&s[4]}s=a}}(s)}}function Xe(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof xa)){const g=a[l+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const w=d[g[y]],E=g[y+1];try{E.call(w)}finally{}}else try{g.call(d)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const y=a[g+1],w="function"==typeof y?y(s):Mn(s[y]),E=l[d=a[g+2]],A=a[g+3];"boolean"==typeof A?w.removeEventListener(a[g],E,A):A>=0?l[d=A]():l[d=-A].unsubscribe(),g+=2}else{const y=l[d=a[g+1]];a[g].call(y)}if(null!==l){for(let g=d+1;g<l.length;g++)l[g]();s[7]=null}}(i,s),1===s[1].type&&Jt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Fi(s[3])){a!==s[3]&&J(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function wn(i,s,a){return function(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===Ge.None||d===Ge.Emulated)return null}return Rn(l,a)}(i,s.parent,a)}function Hs(i,s,a,l,d){Jt(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function Dd(i,s,a){Jt(i)?i.appendChild(s,a):s.appendChild(a)}function Td(i,s,a,l,d){null!==l?Hs(i,s,a,l,d):Dd(i,s,a)}function zu(i,s){return Jt(i)?i.parentNode(s):s.parentNode}let Gf=function(i,s,a){return 40&i.type?Rn(i,a):null};function xd(i,s,a,l){const d=wn(i,l,s),g=s[11],w=function(i,s,a){return Gf(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)Td(g,d,a[E],w,!1);else Td(g,d,a,w,!1)}function nm(i,s){if(null!==s){const a=s.type;if(3&a)return Rn(s,i);if(4&a)return Ey(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return nm(i,l);{const d=i[s.index];return Fi(d)?Ey(-1,d):Mn(d)}}if(32&a)return Gu(s,i)()||Mn(i[s.index]);{const l=Cy(i,s);return null!==l?Array.isArray(l)?l[0]:nm(Ya(i[16]),l):nm(i,s.next)}}return null}function Cy(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Ey(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return nm(l,d)}return s[7]}function he(i,s,a,l,d,g,y){for(;null!=a;){const w=l[a.index],E=a.type;if(y&&0===s&&(w&&lr(Mn(w),l),a.flags|=4),64!=(64&a.flags))if(8&E)he(i,s,a.child,l,d,g,!1),Ja(s,i,d,w,g);else if(32&E){const A=Gu(a,l);let x;for(;x=A();)Ja(s,i,d,x,g);Ja(s,i,d,w,g)}else 16&E?Ku(i,s,l,a,d,g):Ja(s,i,d,w,g);a=y?a.projectionNext:a.next}}function Md(i,s,a,l,d,g){he(a,l,i.firstChild,s,d,g,!1)}function Ku(i,s,a,l,d,g){const y=a[16],E=y[6].projection[l.projection];if(Array.isArray(E))for(let A=0;A<E.length;A++)Ja(s,i,d,E[A],g);else he(i,s,E,y[3],d,g,!0)}function Kf(i,s,a){Jt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function by(i,s,a){Jt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function vw(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const g=s.length;if(d+g===l||i.charCodeAt(d+g)<=32)return d}a=d+1}}const Iy="ng-template";function ww(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==vw(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function rm(i){return 4===i.type&&i.value!==Iy}function Fn(i,s,a){return s===(4!==i.type||a?i.value:Iy)}function Ai(i,s,a){let l=4;const d=i.attrs||[],g=function(i){for(let s=0;s<i.length;s++)if(co(i[s]))return s;return i.length}(d);let y=!1;for(let w=0;w<s.length;w++){const E=s[w];if("number"!=typeof E){if(!y)if(4&l){if(l=2|1&l,""!==E&&!Fn(i,E,a)||""===E&&1===s.length){if(Gs(l))return!1;y=!0}}else{const A=8&l?E:s[++w];if(8&l&&null!==i.attrs){if(!ww(i.attrs,A,a)){if(Gs(l))return!1;y=!0}continue}const N=im(8&l?"class":E,d,rm(i),a);if(-1===N){if(Gs(l))return!1;y=!0;continue}if(""!==A){let j;j=N>g?"":d[N+1].toLowerCase();const K=8&l?j:null;if(K&&-1!==vw(K,A,0)||2&l&&A!==j){if(Gs(l))return!1;y=!0}}}}else{if(!y&&!Gs(l)&&!Gs(E))return!1;if(y&&Gs(E))continue;y=!1,l=E|1&l}}return Gs(l)||y}function Gs(i){return 0==(1&i)}function im(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let g=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)g=!0;else{if(1===y||2===y){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=g?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function Cw(i,s,a=!1){for(let l=0;l<s.length;l++)if(Ai(i,s[l],a))return!0;return!1}function Fb(i,s){return i?":not("+s.trim()+")":s}function Lb(i){let s=i[0],a=1,l=2,d="",g=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const w=i[++a];d+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!Gs(y)&&(s+=Fb(g,d),d=""),l=y,g=g||!Gs(l);a++}return""!==d&&(s+=Fb(g,d)),s}const St={};function Vb(i){Bb(Ot(),be(),on()+i,_a())}function Bb(i,s,a,l){if(!l)if(3==(3&s[2])){const g=i.preOrderCheckHooks;null!==g&&Mu(s,g,a)}else{const g=i.preOrderHooks;null!==g&&Sa(s,g,0,a)}Fs(a)}function Ty(i,s){return i<<17|s<<2}function qo(i){return i>>17&32767}function Yu(i){return 2|i}function ft(i){return(131068&i)>>2}function $o(i,s){return-131069&i|s<<2}function Sy(i){return 1|i}function um(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const y=i.data[g];ba(d),y.contentQueries(2,s[g],g)}}}function hl(i,s,a,l,d,g,y,w,E,A){const x=s.blueprint.slice();return x[0]=d,x[2]=140|l,fa(x),x[3]=x[15]=i,x[8]=a,x[10]=y||i&&i[10],x[11]=w||i&&i[11],x[12]=E||i&&i[12]||null,x[9]=A||i&&i[9]||null,x[6]=g,x[16]=2==s.type?i[16]:x,x}function Od(i,s,a,l,d){let g=i.data[s];if(null===g)g=function(i,s,a,l,d){const g=ma(),y=Du(),E=i.data[s]=function(i,s,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=E),null!==g&&(y?null==g.child&&null!==E.parent&&(g.child=E):null===g.next&&(g.next=E)),E}(i,s,a,l,d),Qe.lFrame.inI18n&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const y=function(){const i=Qe.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return ar(g,!0),g}function Pd(i,s,a,l){if(0===a)return-1;const d=s.length;for(let g=0;g<a;g++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function Ju(i,s,a){xu(s);try{const l=i.viewQuery;null!==l&&gm(1,l,a);const d=i.template;null!==d&&cm(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&um(i,s),i.staticViewQueries&&gm(2,i.viewQuery,a);const g=i.components;null!==g&&function(i,s){for(let a=0;a<s.length;a++)ZA(i,s[a])}(s,g)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Ta()}}function Xu(i,s,a,l){const d=s[2];if(256==(256&d))return;xu(s);const g=_a();try{fa(s),function(i){Qe.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&cm(i,s,a,2,l);const y=3==(3&d);if(!g)if(y){const A=i.preOrderCheckHooks;null!==A&&Mu(s,A,null)}else{const A=i.preOrderHooks;null!==A&&Sa(s,A,0,null),Jl(s,0)}if(function(i){for(let s=Qa(i);null!==s;s=Id(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(1024&d[2])&&Ps(g,1),d[2]|=1024}}}(s),function(i){for(let s=Qa(i);null!==s;s=Id(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];ha(l)&&Xu(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&um(i,s),!g)if(y){const A=i.contentCheckHooks;null!==A&&Mu(s,A)}else{const A=i.contentHooks;null!==A&&Sa(s,A,1),Jl(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Fs(~d);else{const g=d,y=a[++l],w=a[++l];Ca(y,g),w(2,s[g])}}}finally{Fs(-1)}}(i,s);const w=i.components;null!==w&&function(i,s){for(let a=0;a<s.length;a++)oI(i,s[a])}(s,w);const E=i.viewQuery;if(null!==E&&gm(2,E,l),!g)if(y){const A=i.viewCheckHooks;null!==A&&Mu(s,A)}else{const A=i.viewHooks;null!==A&&Sa(s,A,2),Jl(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),g||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Ps(s[3],-1))}finally{Ta()}}function By(i,s,a,l){const d=s[10],g=!_a(),y=as(s);try{g&&!y&&d.begin&&d.begin(),y&&Ju(i,s,l),Xu(i,s,a,l)}finally{g&&!y&&d.end&&d.end()}}function cm(i,s,a,l,d){const g=on(),y=2&l;try{Fs(-1),y&&s.length>20&&Bb(i,s,20,_a()),a(l,d)}finally{Fs(g)}}function jy(i,s,a){if(Bn(s)){const d=s.directiveEnd;for(let g=s.directiveStart;g<d;g++){const y=i.data[g];y.contentQueries&&y.contentQueries(1,a[g],g)}}}function Zy(i,s,a){!bu()||(function(i,s,a,l){const d=a.directiveStart,g=a.directiveEnd;i.firstCreatePass||Lo(a,s),lr(l,s);const y=a.initialInputs;for(let w=d;w<g;w++){const E=i.data[w],A=oi(E);A&&rI(s,a,E);const x=Vs(s,i,w,a);lr(x,s),null!==y&&fm(0,w-d,x,E,0,y),A&&(zt(a.index,s)[8]=x)}}(i,s,a,Rn(a,s)),128==(128&a.flags)&&function(i,s,a){const l=a.directiveStart,d=a.directiveEnd,y=a.index,w=Qe.lFrame.currentDirectiveIndex;try{Fs(y);for(let E=l;E<d;E++){const A=i.data[E],x=s[E];Ea(E),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Uw(A,x)}}finally{Fs(-1),Ea(w)}}(i,s,a))}function lm(i,s,a=Rn){const l=s.localNames;if(null!==l){let d=s.index+1;for(let g=0;g<l.length;g+=2){const y=l[g+1],w=-1===y?a(s,i):i[y];i[d++]=w}}}function ep(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=dm(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function dm(i,s,a,l,d,g,y,w,E,A){const x=20+l,N=x+d,j=function(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:St);return a}(x,N),K="function"==typeof A?A():A;return j[1]={type:i,blueprint:j,template:a,queries:null,viewQuery:w,declTNode:s,data:j.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:K,incompleteFirstPass:!1}}function xw(i,s,a,l){const d=zy(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&Wy(i).push(l,d.length-1))}function Mw(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function li(i,s,a,l,d,g,y,w){const E=Rn(s,a);let x,A=s.inputs;!w&&null!=A&&(x=A[l])?(Gw(i,a,x,l,d),ss(s)&&function(i,s){const a=zt(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=y?y(d,s.value||"",l):d,Jt(g)?g.setProperty(E,l,d):Je(l)||(E.setProperty?E.setProperty(l,d):E[l]=d))}function hm(i,s,a,l){let d=!1;if(bu()){const g=function(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const y=l[g];Cw(a,y.selectors,!1)&&(d||(d=[]),ls(Lo(a,s),i,y.type),oi(y)?(nI(i,a),d.unshift(y)):d.push(y))}return d}(i,s,a),y=null===l?null:{"":-1};if(null!==g){d=!0,Vw(a,i.data.length,g.length);for(let x=0;x<g.length;x++){const N=g[x];N.providersResolver&&N.providersResolver(N)}let w=!1,E=!1,A=Pd(i,s,g.length,null);for(let x=0;x<g.length;x++){const N=g[x];a.mergedAttrs=Vi(a.mergedAttrs,N.hostAttrs),Hy(i,a,s,A,N),VA(A,N,y),null!==N.contentQueries&&(a.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(a.flags|=128);const j=N.type.prototype;!w&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!E&&(j.ngOnChanges||j.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),A++}!function(i,s){const l=s.directiveEnd,d=i.data,g=s.attrs,y=[];let w=null,E=null;for(let A=s.directiveStart;A<l;A++){const x=d[A],N=x.inputs,j=null===g||rm(s)?null:BA(N,g);y.push(j),w=Mw(N,A,w),E=Mw(x.outputs,A,E)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=w,s.outputs=E}(i,a)}y&&function(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const g=a[s[d+1]];if(null==g)throw new Ue("301",`Export of name '${s[d+1]}' not found!`);l.push(s[d],g)}}}(a,l,y)}return a.mergedAttrs=Vi(a.mergedAttrs,a.attrs),d}function qy(i,s,a,l,d,g){const y=g.hostBindings;if(y){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const E=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=E&&w.push(E),w.push(l,d,y)}}function Uw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function nI(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function VA(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;oi(s)&&(a[""]=i)}}function Vw(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Hy(i,s,a,l,d){i.data[l]=d;const g=d.factory||(d.factory=Li(d.type)),y=new xa(g,oi(d),null);i.blueprint[l]=y,a[l]=y,qy(i,s,0,l,Pd(i,a,d.hostVars,St),d)}function rI(i,s,a){const l=Rn(s,i),d=ep(a),g=i[10],y=pm(i,hl(i,d,null,a.onPush?64:16,l,s,g,g.createRenderer(l,a),null,null));i[s.index]=y}function Co(i,s,a,l,d,g){const y=Rn(i,s);!function(i,s,a,l,d,g,y){if(null==g)Jt(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const w=null==y?W(g):y(g,l||"",d);Jt(i)?i.setAttribute(s,d,w,a):a?s.setAttributeNS(a,d,w):s.setAttribute(d,w)}}(s[11],y,g,i.value,a,l,d)}function fm(i,s,a,l,d,g){const y=g[s];if(null!==y){const w=l.setInput;for(let E=0;E<y.length;){const A=y[E++],x=y[E++],N=y[E++];null!==w?l.setInput(a,N,A,x):a[x]=N}}}function BA(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function iI(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function oI(i,s){const a=zt(s,i);if(ha(a)){const l=a[1];80&a[2]?Xu(l,a,l.template,a[8]):a[5]>0&&Gy(a)}}function Gy(i){for(let l=Qa(i);null!==l;l=Id(l))for(let d=10;d<l.length;d++){const g=l[d];if(1024&g[2]){const y=g[1];Xu(y,g,y.template,g[8])}else g[5]>0&&Gy(g)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=zt(a[l],i);ha(d)&&d[5]>0&&Gy(d)}}function ZA(i,s){const a=zt(s,i),l=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Ju(l,a,a[8])}function pm(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function jw(i){for(;i;){i[2]|=64;const s=Ya(i);if(ef(i)&&!s)return i;i=s}return null}function qw(i,s,a){const l=s[10];l.begin&&l.begin();try{Xu(i,s,i.template,a)}catch(d){throw np(s,d),d}finally{l.end&&l.end()}}function aI(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=kf(a),d=l[1];By(d,l,d.template,a)}}(i[8])}function gm(i,s,a){ba(0),s(i,a)}const Hw=(()=>Promise.resolve(null))();function zy(i){return i[7]||(i[7]=[])}function Wy(i){return i.cleanup||(i.cleanup=[])}function np(i,s){const a=i[9],l=a?a.get(cl,null):null;l&&l.handleError(s)}function Gw(i,s,a,l,d){for(let g=0;g<a.length;){const y=a[g++],w=a[g++],E=s[y],A=i.data[y];null!==A.setInput?A.setInput(E,d,l,w):E[w]=d}}function Go(i,s,a){const l=Ei(s,i);!function(i,s,a){Jt(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function kd(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,g=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?g=w:1==g?d=ue(d,w):2==g&&(l=ue(l,w+": "+s[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Yy=new tn("INJECTOR",-1);class zo{get(s,a=La){if(a===La){const l=new Error(`NullInjectorError: No provider for ${ne(s)}!`);throw l.name="NullInjectorError",l}return a}}const Ye=new tn("Set Injector scope."),fl={},Dt={};let Nd;function mm(){return void 0===Nd&&(Nd=new zo),Nd}function Fd(i,s=null,a=null,l){const d=zw(i,s,a,l);return d._resolveInjectorDefTypes(),d}function zw(i,s=null,a=null,l){return new Qy(i,a,s||mm(),l)}class Qy{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&Zi(a,w=>this.processProvider(w,s,a)),Zi([s],w=>this.processInjectorType(w,[],g)),this.records.set(Yy,Xa(void 0,this));const y=this.records.get(Ye);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof s?null:ne(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=La,l=dt.Default){this.assertNotDestroyed();const d=F(this),g=Hr(void 0);try{if(!(l&dt.SkipSelf)){let w=this.records.get(s);if(void 0===w){const E=("function"==typeof(i=s)||"object"==typeof i&&i instanceof tn)&&gi(s);w=E&&this.injectableDefInScope(E)?Xa(Jy(s),fl):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&dt.Self?mm():this.parent).get(s,a=l&dt.Optional&&a===La?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[hs]=y[hs]||[]).unshift(ne(s)),d)throw y;return function(i,s,a,l){const d=i[hs];throw s[b]&&d.unshift(s[b]),i.message=function(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=ne(s);if(Array.isArray(s))d=s.map(ne).join(" -> ");else if("object"==typeof s){let g=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];g.push(y+":"+("string"==typeof w?JSON.stringify(w):ne(w)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(Ef,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[hs]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{Hr(g),F(d)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(ne(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,l){if(!(s=Q(s)))return!1;let d=mi(s);const g=null==d&&s.ngModule||void 0,y=void 0===g?s:g,w=-1!==l.indexOf(y);if(void 0!==g&&(d=mi(g)),null==d)return!1;if(null!=d.imports&&!w){let x;l.push(y);try{Zi(d.imports,N=>{this.processInjectorType(N,a,l)&&(void 0===x&&(x=[]),x.push(N))})}finally{}if(void 0!==x)for(let N=0;N<x.length;N++){const{ngModule:j,providers:K}=x[N];Zi(K,pe=>this.processProvider(pe,j,K||L))}}this.injectorDefTypes.add(y);const E=Li(y)||(()=>new y);this.records.set(y,Xa(E,fl));const A=d.providers;if(null!=A&&!w){const x=s;Zi(A,N=>this.processProvider(N,x,A))}return void 0!==g&&void 0!==s.providers}processProvider(s,a,l){let d=Ld(s=Q(s))?s:Q(s&&s.provide);const g=(i=s,kr(i)?Xa(void 0,i.useValue):Xa(Pr(i),fl));var i;if(Ld(s)||!0!==s.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=Xa(void 0,fl,!0),y.factory=()=>je(y.multi),this.records.set(d,y)),d=s,y.multi.push(s)}this.records.set(d,g)}hydrate(s,a){return a.value===fl&&(a.value=Dt,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Jy(i){const s=gi(i),a=null!==s?s.factory:Li(i);if(null!==a)return a;if(i instanceof tn)throw new Error(`Token ${ne(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const l=function(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${ne(i)}: (${l.join(", ")}).`)}const a=function(i){const s=i&&(i[ki]||i[Gn]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function Pr(i,s,a){let l;if(Ld(i)){const d=Q(i);return Li(d)||Jy(d)}if(kr(i))l=()=>Q(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...je(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))l=()=>H(Q(i.useExisting));else{const d=Q(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return Li(d)||Jy(d);l=()=>new d(...je(i.deps))}return l}function Xa(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function kr(i){return null!==i&&"object"==typeof i&&I in i}function Ld(i){return"function"==typeof i}let Wi=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return Fd({name:""},l,a,"");{const g=null!=(d=a.name)?d:"";return Fd({name:g},a.parent,a.providers,g)}}}return i.THROW_IF_NOT_FOUND=La,i.NULL=new zo,i.\u0275prov=rn({token:i,providedIn:"any",factory:()=>H(Yy)}),i.__NG_ELEMENT_ID__=-1,i})();function oC(i,s){Ls(kf(i)[1],pn())}function Nr(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(oi(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");d=s.\u0275dir}if(d){if(a){l.push(d);const y=i;y.inputs=iv(i.inputs),y.declaredInputs=iv(i.declaredInputs),y.outputs=iv(i.outputs);const w=d.hostBindings;w&&EI(i,w);const E=d.viewQuery,A=d.contentQueries;if(E&&op(i,E),A&&CI(i,A),re(i.inputs,d.inputs),re(i.declaredInputs,d.declaredInputs),re(i.outputs,d.outputs),oi(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let y=0;y<g.length;y++){const w=g[y];w&&w.ngInherit&&w(i),w===Nr&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=Vi(d.hostAttrs,a=Vi(a,d.hostAttrs))}}(l)}function iv(i){return i===Z?{}:i===L?[]:i}function op(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function CI(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,g)=>{s(l,d,g),a(l,d,g)}:s}function EI(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let Vd=null;function tc(){if(!Vd){const i=wt.Symbol;if(i&&i.iterator)Vd=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Vd=l)}}}return Vd}function Bd(i){return!!Em(i)&&(Array.isArray(i)||!(i instanceof Map)&&tc()in i)}function Em(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Eo(i,s,a){return i[s]=a}function pl(i,s){return i[s]}function Xr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function gl(i,s,a,l){const d=Xr(i,s,a);return Xr(i,s+1,l)||d}function Ki(i,s,a,l,d,g){const y=gl(i,s,a,l);return gl(i,s+2,d,g)||y}function ap(i,s,a,l){const d=be();return Xr(d,Ns(),s)&&(Ot(),Co(gn(),d,i,s,a,l)),ap}function qn(i,s,a,l){return Xr(i,Ns(),a)?s+W(a)+l:St}function eu(i,s,a,l,d,g){const w=gl(i,Qe.lFrame.bindingIndex,a,d);return Ui(2),w?s+W(a)+l+W(d)+g:St}function hC(i,s,a,l,d,g,y,w){const E=be(),A=Ot(),x=i+20,N=A.firstCreatePass?function(i,s,a,l,d,g,y,w,E){const A=s.consts,x=Od(s,i,4,y||null,Sr(A,w));hm(s,a,x,Sr(A,E)),Ls(s,x);const N=x.tViews=dm(2,x,l,d,g,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,x),N.queries=s.queries.embeddedTView(x)),x}(x,A,E,s,a,l,d,g,y):A.data[x];ar(N,!1);const j=E[11].createComment("");xd(A,E,j,N),lr(j,E),pm(E,E[x]=iI(j,E,j,N)),xc(N)&&Zy(A,E,N),null!=y&&lm(E,N,w)}function wl(i,s=dt.Default){const a=be();return null===a?H(i,s):Vo(pn(),a,Q(i),s)}function CC(){throw new Error("invalid")}function pp(i,s,a){const l=be();return Xr(l,Ns(),s)&&li(Ot(),gn(),l,i,s,l[11],a,!1),pp}function rc(i,s,a,l,d){const y=d?"class":"style";Gw(i,a,s.inputs[y],y,l)}function tu(i,s,a,l){const d=be(),g=Ot(),y=20+i,w=d[11],E=d[y]=m(w,s,Qe.lFrame.currentNamespace),A=g.firstCreatePass?function(i,s,a,l,d,g,y){const w=s.consts,A=Od(s,i,2,d,Sr(w,g));return hm(s,a,A,Sr(w,y)),null!==A.attrs&&kd(A,A.attrs,!1),null!==A.mergedAttrs&&kd(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(y,g,d,0,s,a,l):g.data[y];ar(A,!0);const x=A.mergedAttrs;null!==x&&Wt(w,E,x);const N=A.classes;null!==N&&by(w,E,N);const j=A.styles;null!==j&&Kf(w,E,j),64!=(64&A.flags)&&xd(g,d,E,A),0===Qe.lFrame.elementDepthCount&&lr(E,d),Qe.lFrame.elementDepthCount++,xc(A)&&(Zy(g,d,A),jy(g,A,d)),null!==l&&lm(d,A)}function Pm(){let i=pn();Du()?ao():(i=i.parent,ar(i,!1));const s=i;Qe.lFrame.elementDepthCount--;const a=Ot();a.firstCreatePass&&(Ls(a,i),Bn(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&rc(a,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&rc(a,s,be(),s.stylesWithoutHost,!1)}function EC(i,s,a,l){tu(i,s,a,l),Pm()}function eh(i,s,a){const l=be(),d=Ot(),g=i+20,y=d.firstCreatePass?function(i,s,a,l,d){const g=s.consts,y=Sr(g,l),w=Od(s,i,8,"ng-container",y);return null!==y&&kd(w,y,!0),hm(s,a,w,Sr(g,d)),null!==s.queries&&s.queries.elementStart(s,w),w}(g,d,l,s,a):d.data[g];ar(y,!0);const w=l[g]=l[11].createComment("");xd(d,l,w,y),lr(w,l),xc(y)&&(Zy(d,l,y),jy(d,y,l)),null!=a&&lm(l,y)}function th(){let i=pn();const s=Ot();Du()?ao():(i=i.parent,ar(i,!1)),s.firstCreatePass&&(Ls(s,i),Bn(i)&&s.queries.elementEnd(i))}function mv(){return be()}function Dn(i){return!!i&&"function"==typeof i.then}function gp(i){return!!i&&"function"==typeof i.subscribe}const bC=gp;function _v(i,s,a,l){const d=be(),g=Ot(),y=pn();return function(i,s,a,l,d,g,y,w){const E=xc(l),x=i.firstCreatePass&&Wy(i),N=s[8],j=zy(s);let K=!0;if(3&l.type||w){const Be=Rn(l,s),tt=w?w(Be):Be,we=j.length,pt=w?Ft=>w(Mn(Ft[l.index])):l.index;if(Jt(a)){let Ft=null;if(!w&&E&&(Ft=function(i,s,a,l){const d=i.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const y=d[g];if(y===a&&d[g+1]===l){const w=s[7],E=d[g+2];return w.length>E?w[E]:null}"string"==typeof y&&(g+=2)}return null}(i,s,d,l.index)),null!==Ft)(Ft.__ngLastListenerFn__||Ft).__ngNextListenerFn__=g,Ft.__ngLastListenerFn__=g,K=!1;else{g=vv(l,s,N,g,!1);const cn=a.listen(tt,d,g);j.push(g,cn),x&&x.push(d,pt,we,we+1)}}else g=vv(l,s,N,g,!0),tt.addEventListener(d,g,y),j.push(g),x&&x.push(d,pt,we,y)}else g=vv(l,s,N,g,!1);const pe=l.outputs;let ke;if(K&&null!==pe&&(ke=pe[d])){const Be=ke.length;if(Be)for(let tt=0;tt<Be;tt+=2){const Pi=s[ke[tt]][ke[tt+1]].subscribe(g),fu=j.length;j.push(g,Pi),x&&x.push(d,l.index,fu,-(fu+1))}}}(g,d,d[11],y,i,s,!!a,l),_v}function yv(i,s,a,l){try{return!1!==a(l)}catch(d){return np(i,d),!1}}function vv(i,s,a,l,d){return function g(y){if(y===Function)return l;const w=2&i.flags?zt(i.index,s):s;0==(32&s[2])&&jw(w);let E=yv(s,0,l,y),A=g.__ngNextListenerFn__;for(;A;)E=yv(s,0,A,y)&&E,A=A.__ngNextListenerFn__;return d&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function DC(i=1){return function(i){return(Qe.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,Qe.lFrame.contextLView))[8]}(i)}function yp(i,s,a,l,d){const g=be(),y=qn(g,s,a,l);return y!==St&&li(Ot(),gn(),g,i,y,g[11],d,!1),yp}function Tv(i,s,a,l,d){const g=i[a+1],y=null===s;let w=l?qo(g):ft(g),E=!1;for(;0!==w&&(!1===E||y);){const x=i[w+1];xC(i[w],s)&&(E=!0,i[w+1]=l?Sy(x):Yu(x)),w=l?qo(x):ft(x)}E&&(i[a+1]=l?Yu(g):Sy(g))}function xC(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&jo(i,s)>=0}function Sv(i,s){return function(i,s,a,l){const d=be(),g=Ot(),y=Ui(2);g.firstUpdatePass&&function(i,s,a,l){const d=i.data;if(null===d[a+1]){const g=d[on()],y=function(i,s){return s>=i.expandoStartIndex}(i,a);(function(i,s){return 0!=(i.flags&(s?16:32))})(g,l)&&null===s&&!y&&(s=!1),s=function(i,s,a,l){const d=function(i){const s=Qe.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let g=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=ic(a=Dp(null,i,s,a,l),s.attrs,l),g=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==d)if(a=Dp(d,i,s,a,l),null===g){let E=function(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==ft(l))return i[qo(l)]}(i,s,l);void 0!==E&&Array.isArray(E)&&(E=Dp(null,i,s,E[1],l),E=ic(E,s.attrs,l),function(i,s,a,l){i[qo(a?s.classBindings:s.styleBindings)]=l}(i,s,l,E))}else g=function(i,s,a){let l;const d=s.directiveEnd;for(let g=1+s.directiveStylingLast;g<d;g++)l=ic(l,i[g].hostAttrs,a);return ic(l,s.attrs,a)}(i,s,l)}return void 0!==g&&(l?s.residualClasses=g:s.residualStyles=g),a}(d,g,s,l),function(i,s,a,l,d,g){let y=g?s.classBindings:s.styleBindings,w=qo(y),E=ft(y);i[l]=a;let x,A=!1;if(Array.isArray(a)){const N=a;x=N[1],(null===x||jo(N,x)>0)&&(A=!0)}else x=a;if(d)if(0!==E){const j=qo(i[w+1]);i[l+1]=Ty(j,w),0!==j&&(i[j+1]=$o(i[j+1],l)),i[w+1]=function(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=Ty(w,0),0!==w&&(i[w+1]=$o(i[w+1],l)),w=l;else i[l+1]=Ty(E,0),0===w?w=l:i[E+1]=$o(i[E+1],l),E=l;A&&(i[l+1]=Yu(i[l+1])),Tv(i,x,l,!0),Tv(i,x,l,!1),function(i,s,a,l,d){const g=d?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof s&&jo(g,s)>=0&&(a[l+1]=Sy(a[l+1]))}(s,x,i,l,g),y=Ty(w,E),g?s.classBindings=y:s.styleBindings=y}(d,g,s,a,y,l)}}(g,i,y,l),s!==St&&Xr(d,y,s)&&function(i,s,a,l,d,g,y,w){if(!(3&s.type))return;const E=i.data,A=E[w+1];sc(function(i){return 1==(1&i)}(A)?Rv(E,s,a,d,ft(A),y):void 0)||(sc(g)||function(i){return 2==(2&i)}(A)&&(g=Rv(E,null,a,d,w,y)),function(i,s,a,l,d){const g=Jt(i);if(s)d?g?i.addClass(a,l):a.classList.add(l):g?i.removeClass(a,l):a.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:qs.DashCase;if(null==d)g?i.removeStyle(a,l,y):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),y|=qs.Important),g?i.setStyle(a,l,d,y):a.style.setProperty(l,d,w?"important":"")}}}(l,y,Ei(on(),a),d,g))}(g,g.data[on()],d,d[11],i,d[y+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ne(Zs(i)))),i}(s,a),l,y)}(i,s,null,!0),Sv}function Dp(i,s,a,l,d){let g=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(g=s[w],l=ic(l,g.hostAttrs,d),g!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function ic(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let g=0;g<s.length;g++){const y=s[g];"number"==typeof y?d=y:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),wr(i,y,!!a||s[++g]))}return void 0===i?null:i}function Rv(i,s,a,l,d,g){const y=null===s;let w;for(;d>0;){const E=i[d],A=Array.isArray(E),x=A?E[1]:E,N=null===x;let j=a[d+1];j===St&&(j=N?L:void 0);let K=N?qi(j,l):x===l?j:void 0;if(A&&!sc(K)&&(K=qi(E,l)),sc(K)&&(w=K,y))return w;const pe=i[d+1];d=y?qo(pe):ft(pe)}if(null!==s){let E=g?s.residualClasses:s.residualStyles;null!=E&&(w=qi(E,l))}return w}function sc(i){return void 0!==i}function Um(i,s=""){const a=be(),l=Ot(),d=i+20,g=l.firstCreatePass?Od(l,d,1,s,null):l.data[d],y=a[d]=function(i,s){return Jt(i)?i.createText(s):i.createTextNode(s)}(a[11],s);xd(l,a,y,g),ar(g,!1)}function Tp(i){return Ap("",i,""),Tp}function Ap(i,s,a){const l=be(),d=qn(l,i,s,a);return d!==St&&Go(l,on(),d),Ap}function rh(i,s,a,l,d){const g=be(),y=eu(g,i,s,a,l,d);return y!==St&&Go(g,on(),y),rh}const De=void 0;var HC=["en",[["a","p"],["AM","PM"],De],[["AM","PM"],De,De],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],De,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],De,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",De,"{1} 'at' {0}",De],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let ah={};function Bv(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=jv(s);if(a)return a;const l=s.split("-")[0];if(a=jv(l),a)return a;if("en"===l)return HC;throw new Error(`Missing locale data for the locale "${i}".`)}function GC(i){return Bv(i)[mt.PluralCase]}function jv(i){return i in ah||(ah[i]=wt.ng&&wt.ng.common&&wt.ng.common.locales&&wt.ng.common.locales[i]),ah[i]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const Nt="en-US";let uc=Nt;function lc(i,s,a,l,d){if(i=Q(i),Array.isArray(i))for(let g=0;g<i.length;g++)lc(i[g],s,a,l,d);else{const g=Ot(),y=be();let w=Ld(i)?i:Q(i.provide),E=Pr(i);const A=pn(),x=1048575&A.providerIndexes,N=A.directiveStart,j=A.providerIndexes>>20;if(Ld(i)||!i.multi){const K=new xa(E,d,wl),pe=su(w,s,d?x:x+j,N);-1===pe?(ls(Lo(A,y),g,w),iu(g,i,s.length),s.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(K),y.push(K)):(a[pe]=K,y[pe]=K)}else{const K=su(w,s,x+j,N),pe=su(w,s,x,x+j),ke=K>=0&&a[K],Be=pe>=0&&a[pe];if(d&&!Be||!d&&!ke){ls(Lo(A,y),g,w);const tt=function(i,s,a,l,d){const g=new xa(i,a,wl);return g.multi=[],g.index=s,g.componentProviders=0,Qv(g,d,l&&!a),g}(d?_h:lE,a.length,d,l,E);!d&&Be&&(a[pe].providerFactory=tt),iu(g,i,s.length,0),s.push(w),A.directiveStart++,A.directiveEnd++,d&&(A.providerIndexes+=1048576),a.push(tt),y.push(tt)}else iu(g,i,K>-1?K:pe,Qv(a[d?pe:K],E,!d&&l));!d&&l&&Be&&a[pe].componentProviders++}}}function iu(i,s,a,l){const d=Ld(s),g=function(i){return!!i.useClass}(s);if(d||g){const E=(g?Q(s.useClass):s).prototype.ngOnDestroy;if(E){const A=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const x=A.indexOf(a);-1===x?A.push(a,[l,E]):A[x+1].push(l,E)}else A.push(a,E)}}}function Qv(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function su(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function lE(i,s,a,l){return t_(this.multi,[])}function _h(i,s,a,l){const d=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Vs(a,a[1],this.providerFactory.index,l);g=w.slice(0,y),t_(d,g);for(let E=y;E<w.length;E++)g.push(w[E])}else g=[],t_(d,g);return g}function t_(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function yh(i,s=[]){return a=>{a.providersResolver=(l,d)=>function(i,s,a){const l=Ot();if(l.firstCreatePass){const d=oi(i);lc(a,l.data,l.blueprint,d,!0),lc(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class hE{}class sD{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${ne(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Dl=(()=>{class i{}return i.NULL=new sD,i})();function oD(){return Tl(pn(),be())}function Tl(i,s){return new vh(Rn(i,s))}let vh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=oD,i})();function Vp(i){return i instanceof vh?i.nativeElement:i}class Xv{}let fE=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function(){const i=be(),a=zt(pn().index,i);return function(i){return i[11]}(Ni(a)?a:i)}(),i})(),e0=(()=>{class i{}return i.\u0275prov=rn({token:i,providedIn:"root",factory:()=>null}),i})();class gE{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const er=new gE("13.0.3"),jt={};function jp(i,s,a,l,d=!1){for(;null!==a;){const g=s[a.index];if(null!==g&&l.push(Mn(g)),Fi(g))for(let w=10;w<g.length;w++){const E=g[w],A=E[1].firstChild;null!==A&&jp(E[1],E,A,l)}const y=a.type;if(8&y)jp(i,s,a.child,l);else if(32&y){const w=Gu(a,s);let E;for(;E=w();)l.push(E)}else if(16&y){const w=Cy(s,a);if(Array.isArray(w))l.push(...w);else{const E=Ya(s[16]);jp(E[1],E,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class wh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return jp(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Fi(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Re(s,l),go(a,l))}this._attachedToViewContainer=!1}xe(this._lView[1],this._lView)}onDestroy(s){xw(this._lView[1],this._lView,null,s)}markForCheck(){jw(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){qw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){uo(!0);try{qw(i,s,a)}finally{uo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Md(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class br extends wh{constructor(s){super(s),this._view=s}detectChanges(){aI(this._view)}checkNoChanges(){!function(i){uo(!0);try{aI(i)}finally{uo(!1)}}(this._view)}get context(){return null}}class Zp extends Dl{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=sn(s);return new Ji(a,this.ngModule)}}function Vr(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const mE=new tn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>jf});class Ji extends hE{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(Lb).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Vr(this.componentDef.inputs)}get outputs(){return Vr(this.componentDef.outputs)}create(s,a,l,d){const g=(d=d||this.ngModule)?function(i,s){return{get:(a,l,d)=>{const g=i.get(a,jt,d);return g!==jt||l===jt?g:s.get(a,l,d)}}}(s,d.injector):s,y=g.get(Xv,Nc),w=g.get(e0,null),E=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=l?function(i,s,a){if(Jt(i))return i.selectRootElement(s,a===Ge.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(E,l,this.componentDef.encapsulation):m(y.createRenderer(null,this.componentDef),A,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(A)),N=this.componentDef.onPush?576:528,j=function(i,s){return{components:[],scheduler:i||jf,clean:Hw,playerHandler:s||null,flags:0}}(),K=dm(0,null,null,1,0,null,null,null,null,null),pe=hl(null,K,j,N,null,null,y,E,w,g);let ke,Be;xu(pe);try{const tt=function(i,s,a,l,d,g){const y=a[1];a[20]=i;const E=Od(y,20,2,"#host",null),A=E.mergedAttrs=s.hostAttrs;null!==A&&(kd(E,A,!0),null!==i&&(Wt(d,i,A),null!==E.classes&&by(d,i,E.classes),null!==E.styles&&Kf(d,i,E.styles)));const x=l.createRenderer(i,s),N=hl(a,ep(s),null,s.onPush?64:16,a[20],E,l,x,g||null,null);return y.firstCreatePass&&(ls(Lo(E,a),y,s.type),nI(y,E),Vw(E,a.length,1)),pm(a,N),a[20]=N}(x,this.componentDef,pe,y,E);if(x)if(l)Wt(E,x,["ng-version",er.full]);else{const{attrs:we,classes:pt}=function(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let g=i[l];if("string"==typeof g)2===d?""!==g&&s.push(g,i[++l]):8===d&&a.push(g);else{if(!Gs(d))break;d=g}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);we&&Wt(E,x,we),pt&&pt.length>0&&by(E,x,pt.join(" "))}if(Be=io(K,20),void 0!==a){const we=Be.projection=[];for(let pt=0;pt<this.ngContentSelectors.length;pt++){const Ft=a[pt];we.push(null!=Ft?Array.from(Ft):null)}}ke=function(i,s,a,l,d){const g=a[1],y=function(i,s,a){const l=pn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Hy(i,l,s,Pd(i,s,1,null),a));const d=Vs(s,i,l.directiveStart,l);lr(d,s);const g=Rn(l,s);return g&&lr(g,s),d}(g,a,s);if(l.components.push(y),i[8]=y,d&&d.forEach(E=>E(y,s)),s.contentQueries){const E=pn();s.contentQueries(1,y,E.directiveStart)}const w=pn();return!g.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Fs(w.index),qy(a[1],w,0,w.directiveStart,w.directiveEnd,s),Uw(s,y)),y}(tt,this.componentDef,pe,j,[oC]),Ju(K,pe,null)}finally{Ta()}return new cD(this.componentType,ke,Tl(Be,pe),pe,Be)}}class cD extends class{}{constructor(s,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new br(d),this.componentType=s}get injector(){return new hn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Ch{}class un{}const Eh=new Map;class s0 extends Ch{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Zp(this);const l=ir(s);this._bootstrapComponents=zi(l.bootstrap),this._r3Injector=zw(s,a,[{provide:Ch,useValue:this},{provide:Dl,useValue:this.componentFactoryResolver}],ne(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Wi.THROW_IF_NOT_FOUND,l=dt.Default){return s===Wi||s===Ch||s===Yy?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class o0 extends un{constructor(s){super(),this.moduleType=s,null!==ir(s)&&function(i){const s=new Set;!function a(l){const d=ir(l,!0),g=d.id;null!==g&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ne(s)} vs ${ne(s.name)}`)}(g,Eh.get(g),l),Eh.set(g,l));const y=zi(d.imports);for(const w of y)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new s0(this.moduleType,s)}}function a0(i,s,a){const l=Wn()+i,d=be();return d[l]===St?Eo(d,l,a?s.call(a):s()):pl(d,l)}function u0(i,s,a,l){return Th(be(),Wn(),i,s,a,l)}function vE(i,s,a,l,d){return function(i,s,a,l,d,g,y){const w=s+a;return gl(i,w,d,g)?Eo(i,w+2,y?l.call(y,d,g):l(d,g)):Dh(i,w+2)}(be(),Wn(),i,s,a,l,d)}function wE(i,s,a,l,d,g,y){return function(i,s,a,l,d,g,y,w,E){const A=s+a;return Ki(i,A,d,g,y,w)?Eo(i,A+4,E?l.call(E,d,g,y,w):l(d,g,y,w)):Dh(i,A+4)}(be(),Wn(),i,s,a,l,d,g,y)}function Ih(i,s,a,l,d,g,y,w){const E=Wn()+i,A=be(),x=Ki(A,E,a,l,d,g);return Xr(A,E+4,y)||x?Eo(A,E+5,w?s.call(w,a,l,d,g,y):s(a,l,d,g,y)):pl(A,E+5)}function Dh(i,s){const a=i[s];return a===St?void 0:a}function Th(i,s,a,l,d,g){const y=s+a;return Xr(i,y,d)?Eo(i,y+1,g?l.call(g,d):l(d)):Dh(i,y+1)}function d0(i,s){const a=Ot();let l;const d=i+20;a.firstCreatePass?(l=function(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const g=l.factory||(l.factory=Li(l.type)),y=Hr(wl);try{const w=lo(!1),E=g();return lo(w),function(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,be(),d,E),E}finally{Hr(y)}}function h0(i,s,a){const l=i+20,d=be(),g=so(d,l);return $p(d,l)?Th(d,Wn(),s,g.transform,a,g):g.transform(a)}function f0(i,s,a){const l=i+20,d=be(),g=so(d,l);return $p(d,l)?function(i,s,a,l,d,g){let y=s+a,w=!1;for(let E=0;E<d.length;E++)Xr(i,y++,d[E])&&(w=!0);return w?Eo(i,y,l.apply(g,d)):Dh(i,y)}(d,Wn(),s,g.transform,a,g):g.transform.apply(g,a)}function $p(i,s){return i[1].data[s].pure}function i_(i){return s=>{setTimeout(i,void 0,s)}}const To=class extends u.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var E,A,x;let d=s,g=a||(()=>null),y=l;if(s&&"object"==typeof s){const N=s;d=null==(E=N.next)?void 0:E.bind(N),g=null==(A=N.error)?void 0:A.bind(N),y=null==(x=N.complete)?void 0:x.bind(N)}this.__isAsync&&(g=i_(g),d&&(d=i_(d)),y&&(y=i_(y)));const w=super.subscribe({next:d,error:g,complete:y});return s instanceof Y.w0&&s.add(w),w}};function gD(){return this._results[tc()]()}class s_{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=tc(),l=s_.prototype;l[a]||(l[a]=gD)}get changes(){return this._changes||(this._changes=new To)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=Qr(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],g=s[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Sh=(()=>{class i{}return i.__NG_ELEMENT_ID__=_D,i})();const IE=Sh,mD=class extends IE{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=hl(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),Ju(a,l,s),new wh(l)}};function _D(){return ou(pn(),be())}function ou(i,s){return 4&i.type?new mD(s,i,Tl(i,s)):null}let au=(()=>{class i{}return i.__NG_ELEMENT_ID__=yD,i})();function yD(){return TE(pn(),be())}const vD=au,DE=class extends vD{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Tl(this._hostTNode,this._hostLView)}get injector(){return new hn(this._hostTNode,this._hostLView)}get parentInjector(){const s=Pu(this._hostTNode,this._hostLView);if(Yr(s)){const a=Ra(s,this._hostLView),l=Fo(s);return new hn(a[1].data[l+8],a)}return new hn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=p0(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,g){const y=s&&!("function"==typeof s);let w;if(y)w=a;else{const N=a||{};w=N.index,l=N.injector,d=N.projectableNodes,g=N.ngModuleRef}const E=y?s:new Ji(sn(s)),A=l||this.parentInjector;if(!g&&null==E.ngModule&&A){const N=A.get(Ch,null);N&&(g=N)}const x=E.create(A,d,void 0,g);return this.insert(x.hostView,w),x}insert(s,a){const l=s._lView,d=l[1];if(Fi(l[3])){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const N=l[3],j=new DE(N,N[6],N[3]);j.detach(j.indexOf(s))}}const g=this._adjustIndex(a),y=this._lContainer;!function(i,s,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=s),l<g-10?(s[4]=a[d],$c(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(d,l,y,g);const w=Ey(g,y),E=l[11],A=zu(E,y[7]);return null!==A&&function(i,s,a,l,d,g){l[0]=d,l[6]=s,Md(i,l,a,1,d,g)}(d,y[6],E,l,A,w),s.attachToViewContainerRef(),$c(ws(y),g,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=p0(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Re(this._lContainer,a);l&&(go(ws(this._lContainer),a),xe(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Re(this._lContainer,a);return l&&null!=go(ws(this._lContainer),a)?new wh(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function p0(i){return i[8]}function ws(i){return i[8]||(i[8]=[])}function TE(i,s){let a;const l=s[i.index];if(Fi(l))a=l;else{let d;if(8&i.type)d=Mn(l);else{const g=s[11];d=g.createComment("");const y=Rn(i,s);Hs(g,zu(g,y),d,function(i,s){return Jt(i)?i.nextSibling(s):s.nextSibling}(g,y),!1)}s[i.index]=a=iI(l,s,d,i),pm(s,a)}return new DE(a,i,s)}class Mi{constructor(s){this.queryList=s,this.matches=null}clone(){return new Mi(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jo{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const y=a.getByIndex(g);d.push(this.queries[y.indexInDeclarationView].clone())}return new Jo(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Hp(s,a).matches&&this.queries[a].setDirty()}}class Tn{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class jr{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(s,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new jr(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class g0{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new g0(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(s,a,wD(a,g)),this.matchTNodeWithReadOption(s,a,Zn(a,s,g,!1,!1))}else l===Sh?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Zn(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===vh||d===au||d===Sh&&4&a.type)this.addMatch(a.index,-2);else{const g=Zn(a,s,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function wD(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function Xo(i,s,a,l){return-1===a?function(i,s){return 11&i.type?Tl(i,s):4&i.type?ou(i,s):null}(s,i):-2===a?function(i,s,a){return a===vh?Tl(s,i):a===Sh?ou(s,i):a===au?TE(s,i):void 0}(i,s,l):Vs(i,i[1],a,s)}function Zr(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const g=i.data,y=a.matches,w=[];for(let E=0;E<y.length;E+=2){const A=y[E];w.push(A<0?null:Xo(s,g[A],y[E+1],a.metadata.read))}d.matches=w}return d.matches}function Ri(i,s,a,l){const d=i.queries.getByIndex(a),g=d.matches;if(null!==g){const y=Zr(i,s,d,a);for(let w=0;w<g.length;w+=2){const E=g[w];if(E>0)l.push(y[w/2]);else{const A=g[w+1],x=s[-E];for(let N=10;N<x.length;N++){const j=x[N];j[17]===j[3]&&Ri(j[1],j,A,l)}if(null!==x[9]){const N=x[9];for(let j=0;j<N.length;j++){const K=N[j];Ri(K[1],K,A,l)}}}}}return l}function dc(i){const s=be(),a=Ot(),l=Au();ba(l+1);const d=Hp(a,l);if(i.dirty&&as(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const g=d.crossesNgTemplate?Ri(a,s,l,[]):Zr(a,s,d,l);i.reset(g,Vp),i.notifyOnChanges()}return!0}return!1}function Sl(i,s,a,l){const d=Ot();if(d.firstCreatePass){const g=pn();(function(i,s,a){null===i.queries&&(i.queries=new jr),i.queries.track(new g0(s,a))})(d,new Tn(s,a,l),g.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function(i,s,a){const l=new s_(4==(4&a));xw(i,s,l,l.destroy),null===s[19]&&(s[19]=new Jo),s[19].queries.push(new Mi(l))}(d,be(),a)}function xl(){return i=be(),s=Au(),i[19].queries[s].queryList;var i,s}function Hp(i,s){return i.queries.getByIndex(s)}function g_(...i){}const m_=new tn("Application Initializer");let Cs=(()=>{class i{constructor(a){this.appInits=a,this.resolve=g_,this.reject=g_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(Dn(g))a.push(g);else if(bC(g)){const y=new Promise((w,E)=>{g.subscribe({complete:w,error:E})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(H(m_,8))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();const Yp=new tn("AppId"),OE={provide:Yp,useFactory:function(){return`${Qp()}${Qp()}${Qp()}`},deps:[]};function Qp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const __=new tn("Platform Initializer"),Nh=new tn("Platform ID"),Jp=new tn("appBootstrapListener");let kE=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();const Xp=new tn("LocaleId"),y_=new tn("DefaultCurrencyCode");class NE{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let eg=(()=>{class i{compileModuleSync(a){return new o0(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=zi(ir(a).declarations).reduce((y,w)=>{const E=sn(w);return E&&y.push(new Ji(E)),y},[]);return new NE(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();const OD=(()=>Promise.resolve(0))();function v_(i){"undefined"==typeof Zone?OD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class qr{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new To(!1),this.onMicrotaskEmpty=new To(!1),this.onStable=new To(!1),this.onError=new To(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let i=wt.requestAnimationFrame,s=wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(wt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,C_(i),i.isCheckStableRunning=!0,tg(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),C_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,y,w)=>{try{return LE(i),a.invokeTask(d,g,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&s(),E_(i)}},onInvoke:(a,l,d,g,y,w,E)=>{try{return LE(i),a.invoke(d,g,y,w,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),E_(i)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,C_(i),tg(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(qr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+d,s,Fh,g_,g_);try{return g.runTask(y,a,l)}finally{g.cancelTask(y)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const Fh={};function tg(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function C_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function LE(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function E_(i){i._nesting--,tg(i)}class kD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new To,this.onMicrotaskEmpty=new To,this.onStable=new To,this.onError=new To}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let b_=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qr.assertNotInAngularZone(),v_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())v_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(H(qr))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})(),UE=(()=>{class i{constructor(){this._applications=new Map,ng.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return ng.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();class S0{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function ND(i){ng=i}let yn,ng=new S0;const VE=new tn("AllowMultipleToken");class VD{constructor(s,a){this.name=s,this.token=a}}function I_(i,s,a=[]){const l=`Platform: ${s}`,d=new tn(l);return(g=[])=>{let y=D_();if(!y||y.injector.get(VE,!1))if(i)i(a.concat(g).concat({provide:d,useValue:!0}));else{const w=a.concat(g).concat({provide:d,useValue:!0},{provide:Ye,useValue:"platform"});!function(i){if(yn&&!yn.destroyed&&!yn.injector.get(VE,!1))throw new Ue("400","");yn=i.get(rg);const s=i.get(__,null);s&&s.forEach(a=>a())}(Wi.create({providers:w,name:l}))}return function(i){const s=D_();if(!s)throw new Ue("401","");return s}()}}function D_(){return yn&&!yn.destroyed?yn:null}let rg=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function(i,s){let a;return a="noop"===i?new kD:("zone.js"===i?void 0:i)||new qr({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),E=[{provide:qr,useValue:w}];return w.run(()=>{const A=Wi.create({providers:E,parent:this.injector,name:a.moduleType.name}),x=a.create(A),N=x.injector.get(cl,null);if(!N)throw new Ue("402","");return w.runOutsideAngular(()=>{const j=w.onError.subscribe({next:K=>{N.handleError(K)}});x.onDestroy(()=>{sg(this._modules,x),j.unsubscribe()})}),function(i,s,a){try{const l=a();return Dn(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(N,w,()=>{const j=x.injector.get(Cs);return j.runInitializers(),j.donePromise.then(()=>(function(i){yt(i,"Expected localeId to be defined"),"string"==typeof i&&(uc=i.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Xp,Nt)||Nt),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=A_({},l);return function(i,s,a){const l=new o0(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(kl);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ue("403","");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue("404","");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(H(Wi))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();function A_(i,s){return Array.isArray(s)?s.reduce(A_,i):_t(_t({},i),s)}let kl=(()=>{class i{constructor(a,l,d,g,y){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=g,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new k.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),E=new k.y(A=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{qr.assertNotInAngularZone(),v_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{qr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{x.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ae.T)(w,E.pipe((0,te.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Ue("405","");let d;d=a instanceof hE?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const g=function(i){return i.isBoundToModule}(d)?void 0:this._injector.get(Ch),w=d.create(Wi.NULL,[],l||d.selector,g),E=w.location.nativeElement,A=w.injector.get(b_,null),x=A&&w.injector.get(UE);return A&&x&&x.registerApplication(E,A),w.onDestroy(()=>{this.detachView(w.hostView),sg(this.components,w),x&&x.unregisterApplication(E)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Ue("101","");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;sg(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Jp,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(H(qr),H(Wi),H(cl),H(Dl),H(Cs))},i.\u0275prov=rn({token:i,factory:i.\u0275fac}),i})();function sg(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let M0=!0,jE=!1;function qD(){return jE=!0,M0}function $D(){if(jE)throw new Error("Cannot enable prod mode after platform setup.");M0=!1}let O0=(()=>{class i{}return i.__NG_ELEMENT_ID__=ZE,i})();function ZE(i){return function(i,s,a){if(ss(i)&&!a){const l=zt(i.index,s);return new wh(l,l)}return 47&i.type?new wh(s[16],s):null}(pn(),be(),16==(16&i))}class O_{constructor(){}supports(s){return Bd(s)}create(s){return new KD(s)}}const WD=(i,s)=>s;class KD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||WD}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const y=!l||a&&a.currentIndex<P_(l,d,g)?a:l,w=P_(y,d,g),E=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{g||(g=[]);const A=w-d,x=E-d;if(A!=x){for(let j=0;j<A;j++){const K=j<g.length?g[j]:g[j]=0,pe=K+j;x<=pe&&pe<A&&(g[j]=K+1)}g[y.previousIndex]=x-A}}w!==E&&s(y,w,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Bd(s))throw new Error(`Error trying to diff '${ne(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,g,y,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)g=s[w],y=this._trackByFn(w,g),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,g,y,w)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,y,w),l=!0),a=a._next}else d=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[tc()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{y=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,w,y,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let g;return null===s?g=this._itTail:(g=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,g,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,g,d)):s=this._addAfter(new zE(a,l),g,d),s}_verifyReinsertion(s,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?s=this._reinsertAfter(g,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,g=s._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new KE),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new KE),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class zE{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class WE{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class KE{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new WE,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function P_(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class YE{constructor(){}supports(s){return s instanceof Map||Em(s)}create(){return new U0}}class U0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Em(s)))throw new Error(`Error trying to diff '${ne(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const g=d._prev,y=d._next;return g&&(g._next=y),y&&(y._prev=g),d._next=null,d._prev=null,d}const l=new YD(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class YD{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function k_(){return new N_([new O_])}let N_=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||k_()),deps:[[i,new Jr,new cr]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=rn({token:i,providedIn:"root",factory:k_}),i})();function F_(){return new Vh([new YE])}let Vh=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||F_()),deps:[[i,new Jr,new cr]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=rn({token:i,providedIn:"root",factory:F_}),i})();const Bh=[new YE],B0=new N_([new O_]),jh=new Vh(Bh),QE=I_(null,"core",[{provide:Nh,useValue:"unknown"},{provide:rg,deps:[Wi]},{provide:UE,deps:[]},{provide:kE,deps:[]}]),Z0=[{provide:kl,useClass:kl,deps:[qr,Wi,cl,Dl,Cs]},{provide:mE,deps:[qr],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:Cs,useClass:Cs,deps:[[new cr,m_]]},{provide:eg,useClass:eg,deps:[]},OE,{provide:N_,useFactory:function(){return B0},deps:[]},{provide:Vh,useFactory:function(){return jh},deps:[]},{provide:Xp,useFactory:function(i){return i||"undefined"!=typeof $localize&&$localize.locale||Nt},deps:[[new _n(Xp),new cr,new Jr]]},{provide:y_,useValue:"USD"}];let $0=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(H(kl))},i.\u0275mod=ra({type:i}),i.\u0275inj=An({providers:Z0}),i})()},6293:(ze,me,P)=>{"use strict";P.d(me,{Z:()=>Ue});var u=P(4213),Y=P(1177),k=P(1572),ae=P(3855);class te{constructor(se,W){this._delegate=se,this.firebase=W,(0,k._addComponent)(se,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=se.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this._delegate.automaticDataCollectionEnabled=se}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(se=>{this._delegate.checkDestroyed(),se()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(se,W=k._DEFAULT_ENTRY_NAME){var oe;this._delegate.checkDestroyed();const Ce=this._delegate.container.getProvider(se);return!Ce.isInitialized()&&"EXPLICIT"===(null===(oe=Ce.getComponent())||void 0===oe?void 0:oe.instantiationMode)&&Ce.initialize(),Ce.getImmediate({identifier:W})}_removeServiceInstance(se,W=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(se).clearInstance(W)}_addComponent(se){(0,k._addComponent)(this._delegate,se)}_addOrOverwriteComponent(se){(0,k._addOrOverwriteComponent)(this._delegate,se)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ue(){const Fe=function(Fe){const se={},W={__esModule:!0,initializeApp:function(He,ut={}){const X=k.initializeApp(He,ut);if((0,u.r3)(se,X.name))return se[X.name];const ce=new Fe(X,W);return se[X.name]=ce,ce},app:Ce,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function(He){const ut=He.name,X=ut.replace("-compat","");if(k._registerComponent(He)&&"PUBLIC"===He.type){const ce=(_e=Ce())=>{if("function"!=typeof _e[X])throw re.create("invalid-app-argument",{appName:ut});return _e[X]()};void 0!==He.serviceProps&&(0,u.ZB)(ce,He.serviceProps),W[X]=ce,Fe.prototype[X]=function(..._e){return this._getService.bind(this,ut).apply(this,He.multipleInstances?_e:[])}}return"PUBLIC"===He.type?W[X]:null},removeApp:function(He){delete se[He]},useAsService:function(He,ut){return"serverAuth"===ut?null:ut},modularAPIs:k}};function Ce(He){if(!(0,u.r3)(se,He=He||k._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:He});return se[He]}return W.default=W,Object.defineProperty(W,"apps",{get:function(){return Object.keys(se).map(He=>se[He])}}),Ce.App=Fe,W}(te);return Fe.INTERNAL=Object.assign(Object.assign({},Fe.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function(W){(0,u.ZB)(Fe,W)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Fe}(),V=new ae.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){V.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Fe=self.firebase.SDK_VERSION;Fe&&Fe.indexOf("LITE")>=0&&V.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ue=B;(0,k.registerVersion)("@firebase/app-compat","0.1.12",undefined)},1572:(ze,me,P)=>{"use strict";P.r(me),P.d(me,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Mo,_DEFAULT_ENTRY_NAME:()=>Vn,_addComponent:()=>nn,_addOrOverwriteComponent:()=>Ir,_apps:()=>yt,_clearComponents:()=>An,_components:()=>At,_getProvider:()=>rn,_registerComponent:()=>$r,_removeServiceInstance:()=>na,deleteApp:()=>Gn,getApp:()=>ki,getApps:()=>Te,initializeApp:()=>mi,onLog:()=>Bt,registerVersion:()=>dt,setLogLevel:()=>_i});var u=P(8239),Y=P(1177),k=P(3855),ae=P(4213);class te{constructor(ht){this.container=ht}getPlatformInfoString(){return this.container.getProviders().map(Mt=>{if(function(at){const ht=at.getComponent();return"VERSION"===(null==ht?void 0:ht.type)}(Mt)){const Rt=Mt.getImmediate();return`${Rt.library}/${Rt.version}`}return null}).filter(Mt=>Mt).join(" ")}}const re="@firebase/app",ue=new k.Yd("@firebase/app"),Vn="[DEFAULT]",bt={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},yt=new Map,At=new Map;function nn(at,ht){try{at.container.addComponent(ht)}catch(Mt){ue.debug(`Component ${ht.name} failed to register with FirebaseApp ${at.name}`,Mt)}}function Ir(at,ht){at.container.addOrOverwriteComponent(ht)}function $r(at){const ht=at.name;if(At.has(ht))return ue.debug(`There were multiple attempts to register component ${ht}.`),!1;At.set(ht,at);for(const Mt of yt.values())nn(Mt,at);return!0}function rn(at,ht){return at.container.getProvider(ht)}function na(at,ht,Mt=Vn){rn(at,ht).clearInstance(Mt)}function An(){At.clear()}const Ut=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class En{constructor(ht,Mt,Rt){this._isDeleted=!1,this._options=Object.assign({},ht),this._config=Object.assign({},Mt),this._name=Mt.name,this._automaticDataCollectionEnabled=Mt.automaticDataCollectionEnabled,this._container=Rt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ht){this.checkDestroyed(),this._automaticDataCollectionEnabled=ht}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ht){this._isDeleted=ht}checkDestroyed(){if(this.isDeleted)throw Ut.create("app-deleted",{appName:this._name})}}const Mo="9.6.1";function mi(at,ht={}){"object"!=typeof ht&&(ht={name:ht});const Mt=Object.assign({name:Vn,automaticDataCollectionEnabled:!1},ht),Rt=Mt.name;if("string"!=typeof Rt||!Rt)throw Ut.create("bad-app-name",{appName:String(Rt)});const Gr=yt.get(Rt);if(Gr){if((0,ae.vZ)(at,Gr.options)&&(0,ae.vZ)(Mt,Gr.config))return Gr;throw Ut.create("duplicate-app",{appName:Rt})}const qt=new Y.H0(Rt);for(const ot of At.values())qt.addComponent(ot);const Ge=new En(at,Mt,qt);return yt.set(Rt,Ge),Ge}function ki(at=Vn){const ht=yt.get(at);if(!ht)throw Ut.create("no-app",{appName:at});return ht}function Te(){return Array.from(yt.values())}function Gn(at){return kn.apply(this,arguments)}function kn(){return(kn=(0,u.Z)(function*(at){const ht=at.name;yt.has(ht)&&(yt.delete(ht),yield Promise.all(at.container.getProviders().map(Mt=>Mt.delete())),at.isDeleted=!0)})).apply(this,arguments)}function dt(at,ht,Mt){var Rt;let Gr=null!==(Rt=bt[at])&&void 0!==Rt?Rt:at;Mt&&(Gr+=`-${Mt}`);const qt=Gr.match(/\s|\//),Ge=ht.match(/\s|\//);if(qt||Ge){const ot=[`Unable to register library "${Gr}" with version "${ht}":`];return qt&&ot.push(`library name "${Gr}" contains illegal characters (whitespace or "/")`),qt&&Ge&&ot.push("and"),Ge&&ot.push(`version name "${ht}" contains illegal characters (whitespace or "/")`),void ue.warn(ot.join(" "))}$r(new Y.wA(`${Gr}-version`,()=>({library:Gr,version:ht}),"VERSION"))}function Bt(at,ht){if(null!==at&&"function"!=typeof at)throw Ut.create("invalid-log-argument");(0,k.Am)(at,ht)}function _i(at){(0,k.Ub)(at)}$r(new Y.wA("platform-logger",ht=>new te(ht),"PRIVATE")),dt(re,"0.7.11",""),dt(re,"0.7.11","esm2017"),dt("fire-js","")},1177:(ze,me,P)=>{"use strict";P.d(me,{wA:()=>k,H0:()=>ne});var u=P(8239),Y=P(4213);class k{constructor(B,V,Q){this.name=B,this.instanceFactory=V,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ae="[DEFAULT]";class te{constructor(B,V){this.name=B,this.container=V,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const V=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(V)){const Q=new Y.BH;if(this.instancesDeferred.set(V,Q),this.isInitialized(V)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:V});Le&&Q.resolve(Le)}catch(Le){}}return this.instancesDeferred.get(V).promise}getImmediate(B){var V;const Q=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),Le=null!==(V=null==B?void 0:B.optional)&&void 0!==V&&V;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Ee){if(Le)return null;throw Ee}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if("EAGER"===B.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ae})}catch(V){}for(const[V,Q]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(V);try{const Ee=this.getOrInitializeService({instanceIdentifier:Le});Q.resolve(Ee)}catch(Ee){}}}}clearInstance(B=ae){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,u.Z)(function*(){const V=Array.from(B.instances.values());yield Promise.all([...V.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...V.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ae){return this.instances.has(B)}getOptions(B=ae){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:V={}}=B,Q=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:Q,options:V});for(const[Ee,Ue]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Ee)&&Ue.resolve(Le);return Le}onInit(B,V){var Q;const Le=this.normalizeInstanceIdentifier(V),Ee=null!==(Q=this.onInitCallbacks.get(Le))&&void 0!==Q?Q:new Set;Ee.add(B),this.onInitCallbacks.set(Le,Ee);const Ue=this.instances.get(Le);return Ue&&B(Ue,Le),()=>{Ee.delete(B)}}invokeOnInitCallbacks(B,V){const Q=this.onInitCallbacks.get(V);if(Q)for(const Le of Q)try{Le(B,V)}catch(Ee){}}getOrInitializeService({instanceIdentifier:B,options:V={}}){let Q=this.instances.get(B);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=B,ue===ae?void 0:ue),options:V}),this.instances.set(B,Q),this.instancesOptions.set(B,V),this.invokeOnInitCallbacks(Q,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Q)}catch(Le){}var ue;return Q||null}normalizeInstanceIdentifier(B=ae){return this.component?this.component.multipleInstances?B:ae:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ne{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const V=this.getProvider(B.name);if(V.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);V.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const V=new te(B,this);return this.providers.set(B,V),V}getProviders(){return Array.from(this.providers.values())}}},3855:(ze,me,P)=>{"use strict";P.d(me,{in:()=>Y,Yd:()=>re,Ub:()=>ne,Am:()=>ue});const u=[];var Y=(()=>{return(B=Y||(Y={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",Y;var B})();const k={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ae=Y.INFO,te={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},fe=(B,V,...Q)=>{if(V<B.logLevel)return;const Le=(new Date).toISOString(),Ee=te[V];if(!Ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${V})`);console[Ee](`[${Le}]  ${B.name}:`,...Q)};class re{constructor(V){this.name=V,this._logLevel=ae,this._logHandler=fe,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(V){if(!(V in Y))throw new TypeError(`Invalid value "${V}" assigned to \`logLevel\``);this._logLevel=V}setLogLevel(V){this._logLevel="string"==typeof V?k[V]:V}get logHandler(){return this._logHandler}set logHandler(V){if("function"!=typeof V)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=V}get userLogHandler(){return this._userLogHandler}set userLogHandler(V){this._userLogHandler=V}debug(...V){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...V),this._logHandler(this,Y.DEBUG,...V)}log(...V){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...V),this._logHandler(this,Y.VERBOSE,...V)}info(...V){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...V),this._logHandler(this,Y.INFO,...V)}warn(...V){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...V),this._logHandler(this,Y.WARN,...V)}error(...V){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...V),this._logHandler(this,Y.ERROR,...V)}}function ne(B){u.forEach(V=>{V.setLogLevel(B)})}function ue(B,V){for(const Q of u){let Le=null;V&&V.level&&(Le=k[V.level]),Q.userLogHandler=null===B?null:(Ee,Ue,...Fe)=>{const se=Fe.map(W=>{if(null==W)return null;if("string"==typeof W)return W;if("number"==typeof W||"boolean"==typeof W)return W.toString();if(W instanceof Error)return W.message;try{return JSON.stringify(W)}catch(oe){return null}}).filter(W=>W).join(" ");Ue>=(null!=Le?Le:Ee.logLevel)&&B({level:Y[Ue].toLowerCase(),message:se,args:Fe,type:Ee.name})}}}},8239:(ze,me,P)=>{"use strict";function u(k,ae,te,fe,re,ne,ue){try{var B=k[ne](ue),V=B.value}catch(Q){return void te(Q)}B.done?ae(V):Promise.resolve(V).then(fe,re)}function Y(k){return function(){var ae=this,te=arguments;return new Promise(function(fe,re){var ne=k.apply(ae,te);function ue(V){u(ne,fe,re,ue,B,"next",V)}function B(V){u(ne,fe,re,ue,B,"throw",V)}ue(void 0)})}}P.d(me,{Z:()=>Y})}},ze=>{ze(ze.s=9917)}]);